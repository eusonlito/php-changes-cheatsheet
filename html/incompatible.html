<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>Backward Incompatible Changes in PHP 8.3, 8.2, 8.1, 8.0, 7.4, 7.3, 7.2, 7.1, 7.0, 5.6, 5.5, 5.4, 5.3, 5.2, 5.0</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="author" content="Lito && Ã“scar Otero">
        <meta name="title" content="Backward Incompatible Changes in PHP 8.3, 8.2, 8.1, 8.0, 7.4, 7.3, 7.2, 7.1, 7.0, 5.6, 5.5, 5.4, 5.3, 5.2, 5.0">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://eusonlito.github.io/php-changes-cheatsheet">
        <meta property="og:title" content="Backward Incompatible Changes in PHP 8.3, 8.2, 8.1, 8.0, 7.4, 7.3, 7.2, 7.1, 7.0, 5.6, 5.5, 5.4, 5.3, 5.2, 5.0">
        <meta property="og:image" content="./images/social.png">

        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:url" content="https://eusonlito.github.io/php-changes-cheatsheet">
        <meta name="twitter:site" content="@lito_ordes">
        <meta name="twitter:creator" content="@lito_ordes">
        <meta name="twitter:title" content="Backward Incompatible Changes in PHP 8.3, 8.2, 8.1, 8.0, 7.4, 7.3, 7.2, 7.1, 7.0, 5.6, 5.5, 5.4, 5.3, 5.2, 5.0">
        <meta name="twitter:image" content="./images/social.png">

        <link href="//fonts.googleapis.com/css?family=Fira+Sans|Droid+Sans|Source+Sans+Pro" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="./phpnet.css?1706799624" type="text/css" media="screen">
        <link rel="stylesheet" href="./styles.css?1706799624" type="text/css" media="screen">

        <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="./favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">

        <link rel="icon" href="./favicon.ico" type="image/x-icon">

        <meta name="theme-color" content="#ffffff">
    </head>

    <body class="docs">
        <section class="info-wrapper">
    <nav id="head-nav" class="navbar">
        <h1><a href="index.html"> Backward Incompatible Changes in PHP 8.3, 8.2, 8.1, 8.0, 7.4, 7.3, 7.2, 7.1, 7.0, 5.6, 5.5, 5.4, 5.3, 5.2, 5.0</a></h1>
    </nav>

    <main class="info-main">
        <article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration83.incompatible.php" target="_blank">PHP 8.3</a></h1>
    </header>

    <div id="migration83.incompatible" class="sect1">
 <h2 class="title">Backward Incompatible Changes</h2>

 <div class="sect2" id="migration83.incompatible.core">
  <h3 class="title">PHP Core</h3>

  <div class="sect3" id="migration83.incompatible.core.overflowing-call-stack">

   <h4 class="title">Programs that were very close to overflowing the call stack</h4>
   <p class="para">
    Programs that were very close to overflowing the call stack may now throw an
    <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> when using more than
    zend.max_allowed_stack_size-zend.reserved_stack_size bytes of stack
    (fiber.stack_size-zend.reserved_stack_size for fibers).
   </p>
  </div>

  <div class="sect3" id="migration83.incompatible.core.proc-get-status-multiple-times">
   <h4 class="title">Executing proc_get_status() multiple times</h4>
   <p class="para">
    Executing <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.proc-get-status.php" class="function">proc_get_status()</a></span> multiple times will now always
    return the right value on POSIX systems. Previously, only the first call
    of the function returned the right value. Executing
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.proc-close.php" class="function">proc_close()</a></span> after <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.proc-get-status.php" class="function">proc_get_status()</a></span>
    will now also return the right exit code. Previously this would return
    <code class="literal">-1</code>.
    Internally, this works by caching the result on POSIX systems.
    If the previous behaviour is required, it is possible to check the
    <code class="literal">"cached"</code> key in the array returned by
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.proc-get-status.php" class="function">proc_get_status()</a></span> to check whether the result was cached.
   </p>
  </div>

  <div class="sect3" id="migration83.incompatible.core.zend-max-execution-timers">
   <h4 class="title">Zend Max Execution Timers</h4>
   <p class="para">
    Zend Max Execution Timers is now enabled by default for ZTS builds on
    Linux.
   </p>
  </div>

  <div class="sect3" id="migration83.incompatible.core.traits-with-static-properties">
   <h4 class="title">Uses of traits with static properties</h4>
   <p class="para">
    Uses of traits with static properties will now redeclare static properties
    inherited from the parent class. This will create a separate static
    property storage for the current class. This is analogous to adding the
    static property to the class directly without traits.
   </p>
  </div>

  <div class="sect3" id="migration83.incompatible.core.negative-index-to-empty-array">
   <h4 class="title">Assigning a negative index to an empty array</h4>
   <p class="para">
    Assigning a negative index <var class="varname">$n</var> to an empty array will now make sure that the
    next index is <code class="code">$n+1</code> instead of <code class="literal">0</code>.
   </p>
  </div>

  <div class="sect3" id="migration83.incompatible.core.class-constant-visibility-check">
   <h4 class="title">Class constant visibility variance check</h4>
   <p class="para">
    Class constant visibility variance is now correctly checked when inherited
    from interfaces.
   </p>
  </div>

  <div class="sect3" id="migration83.incompatible.core.weakmap-entries-maps-to-itself">
   <h4 class="title">WeakMap entries whose key maps to itself</h4>
   <p class="para">
    <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.weakmap.php" class="classname">WeakMap</a></span> entries whose key maps to itself (possibly
    transitively) may now be removed during cycle collection if the key is not
    reachable except by iterating over the WeakMap (reachability via iteration is
    considered weak).
    Previously, such entries would never be automatically removed.
   </p>
  </div>
 </div>

 <div class="sect2" id="migration83.incompatible.date">
  <h3 class="title">Date</h3>

  <p class="para">
   The DateTime extension has introduced Date extension specific exceptions
   and errors under the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.dateerror.php" class="classname">DateError</a></span> and
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.dateexception.php" class="classname">DateException</a></span> hierarchies, instead of warnings and
   generic exceptions. This improves error handling, at the expense
   of having to check for errors and exceptions.
  </p>
 </div>

 <div class="sect2" id="migration83.incompatible.dom">
  <h3 class="title">DOM</h3>

  <p class="para">
   Calling <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/domchildnode.after.php" class="methodname">DOMChildNode::after()</a></span>,
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/domchildnode.before.php" class="methodname">DOMChildNode::before()</a></span>,
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/domchildnode.replacewith.php" class="methodname">DOMChildNode::replaceWith()</a></span>
   on a node that has no parent is now a no-op instead of a hierarchy
   exception, which is the behaviour demanded by the DOM specification.
  </p>

  <p class="para">
   Using the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.domparentnode.php" class="classname">DOMParentNode</a></span>
   and <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.domchildnode.php" class="classname">DOMChildNode</a></span> methods without a document now
   works instead of throwing a <strong><code>DOM_HIERARCHY_REQUEST_ERR</code></strong>
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.domexception.php" class="classname">DOMException</a></span>.
   This is in line with the behaviour demanded by the DOM specification.
  </p>

  <p class="para">
   Calling <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/domdocument.createattributens.php" class="methodname">DOMDocument::createAttributeNS()</a></span> without specifying
   a prefix would incorrectly create a default namespace, placing the element
   inside the namespace instead of the attribute. This bug is now fixed.
  </p>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/domdocument.createattributens.php" class="methodname">DOMDocument::createAttributeNS()</a></span> would previously
   incorrectly throw a <strong><code>DOM_NAMESPACE_ERRNAMESPACE_ERR</code></strong>
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.domexception.php" class="classname">DOMException</a></span> when the prefix was already used for a
   different URI. It now correctly chooses a different prefix when there's a
   prefix name conflict.
  </p>

  <p class="para">
   New methods and properties were added to some DOM classes.
   If a userland class inherits from these classes and declare a method or property
   with the same name, the declarations must be compatible. Otherwise, a typical
   compile error about incompatible declarations will be thrown.
   See the <a target="_blank" href="https://www.php.net/manual/en/migration83.new-features.php#migration83.new-features.dom" class="link">list of new features</a>
   and <a target="_blank" href="https://www.php.net/manual/en/migration83.new-functions.php#migration83.new-functions.dom" class="link">new functions</a> for
   a list of the newly implemented methods and properties.
  </p>
 </div>

 <div class="sect2" id="migration83.incompatible.ffi">
  <h3 class="title">FFI</h3>

  <p class="para">
   C functions that have a return type of <span class="type"><span class="type void">void</span></span> now return <strong><code>null</code></strong> instead of
   returning the following object <code class="literal">object(FFI\CData:void) { }</code>
  </p>
 </div>

 <div class="sect2" id="migration83.incompatible.opcache">
  <h3 class="title">Opcache</h3>

  <p class="para">
   The <a target="_blank" href="https://www.php.net/manual/en/opcache.configuration.php#ini.opcache.consistency-checks" class="link">opcache.consistency_checks</a>
   INI directive was removed. This feature was broken with the tracing JIT,
   as well as with inheritance cache, and has been disabled without a way to
   enable it since PHP 8.1.18 and PHP 8.2.5.
   Both the tracing JIT and inheritance cache may modify shm after the script
   has been persisted by invalidating its checksum. The attempted fix skipped
   over the modifiable pointers but was rejected due to complexity. For this
   reason, it was decided to remove the feature instead.
  </p>
 </div>

 <div class="sect2" id="migration83.incompatible.phar">
  <h3 class="title">Phar</h3>

  <p class="para">
   The type of <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.phar.php" class="classname">Phar</a></span> class constants are now declared.
  </p>
 </div>

 <div class="sect2" id="migration83.incompatible.standard">
  <h3 class="title">Standard</h3>

  <p class="para">
   The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.range.php" class="function">range()</a></span> function has had various changes:
   </p><ul class="simplelist"><li class="member">A <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span> is now thrown when passing <span class="type">object</span>s,
    <span class="type">resource</span>s, or <span class="type">array</span>s as the boundary inputs.</li>
    <li class="member">A more descriptive <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.valueerror.php" class="classname">ValueError</a></span> is thrown when
    passing <code class="literal">0</code> for <code class="parameter">$step</code>.</li>
    <li class="member">A <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.valueerror.php" class="classname">ValueError</a></span> is now thrown when using a
    negative <code class="parameter">$step</code> for increasing ranges.</li>
    <li class="member">If <code class="parameter">$step</code> is a float that can be interpreted
    as an int, it is now done so.</li>
    <li class="member">A <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.valueerror.php" class="classname">ValueError</a></span> is now thrown if any argument
    is infinity or NAN.</li>
    <li class="member">An <strong><code>E_WARNING</code></strong> is now emitted if
    <code class="parameter">$start</code> or <code class="parameter">$end</code> is the empty
    string. The value continues to be cast to the value <code class="literal">0</code>.</li>
    <li class="member">An <strong><code>E_WARNING</code></strong> is now emitted if
    <code class="parameter">$start</code> or <code class="parameter">$end</code> has more than
    one byte, only if it is a non-numeric string.</li>
    <li class="member">An <strong><code>E_WARNING</code></strong> is now emitted if
    <code class="parameter">$start</code> or <code class="parameter">$end</code> is cast to an
    integer because the other boundary input is a number.
    (e.g. <code class="code">range(5, 'z');</code>).</li>
    <li class="member">An <strong><code>E_WARNING</code></strong> is now emitted if
    <code class="parameter">$step</code> is a float when trying to generate a range of
    characters, except if both boundary inputs are numeric strings (e.g.
    <code class="code">range('5', '9', 0.5);</code> does not produce a warning).</li>
    <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.range.php" class="function">range()</a></span> now produce a list of characters if one
    of the boundary inputs is a string digit instead of casting the other input
    to int (e.g. <code class="code">range('9', 'A');</code>).</li>
   </ul><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />range</span><span style="color: #007700">(</span><span style="color: #DD0000">'9'</span><span style="color: #007700">, </span><span style="color: #DD0000">'A'</span><span style="color: #007700">);  </span><span style="color: #FF8000">// ["9", ":", ";", "&lt;", "=", "&gt;", "?", "@", "A"], as of PHP 8.3.0<br></span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #DD0000">'9'</span><span style="color: #007700">, </span><span style="color: #DD0000">'A'</span><span style="color: #007700">);  </span><span style="color: #FF8000">// [9, 8, 7, 6, 5, 4, 3, 2, 1, 0], prior to PHP 8.3.0<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  

  <p class="para">
   The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.file.php" class="function">file()</a></span> flags error check now catches all invalid flags.
   Notably <strong><code>FILE_APPEND</code></strong> was previously silently accepted.
  </p>
 </div>

 <div class="sect2" id="migration83.incompatible.SNMP">
  <h3 class="title">SNMP</h3>

  <p class="para">
   The type of <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.snmp.php" class="classname">SNMP</a></span> class constants are now declared.
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration82.incompatible.php" target="_blank">PHP 8.2</a></h1>
    </header>

    <div id="migration82.incompatible" class="sect1">
 <h2 class="title">Backward Incompatible Changes</h2>

 <div class="sect2" id="migration82.incompatible.date">
  <h3 class="title">Date</h3>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/datetime.createfromimmutable.php" class="methodname">DateTime::createFromImmutable()</a></span> now has a tentative
   return type of <span class="type"><span class="type static">static</span></span>, previously it was <span class="type"><a target="_blank" href="https://www.php.net/manual/en/class.datetime.php" class="type DateTime">DateTime</a></span>.
  </p>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/datetimeimmutable.createfrommutable.php" class="methodname">DateTimeImmutable::createFromMutable()</a></span> now has a tentative
   return type of <span class="type"><span class="type static">static</span></span>, previously it was <span class="type"><a target="_blank" href="https://www.php.net/manual/en/class.datetimeimmutable.php" class="type DateTimeImmutable">DateTimeImmutable</a></span>.
  </p>

  <p class="para">
   <code class="literal">number</code> symbols in <a target="_blank" href="https://www.php.net/manual/en/" class="link">relative formats</a>
   no longer accept multiple signs, e.g. <code class="literal">+-2</code>.
  </p>
 </div>

 <div class="sect2" id="migration82.incompatible.odbc">
  <h3 class="title">ODBC</h3>

  <p class="para">
   The ODBC extension now escapes the username and password for the case when
   both a connection string and username/password are passed, and the string
   must be appended to. Before, user values containing values needing escaping
   could have created a malformed connection string, or injected values from
   user-provided data. The escaping rules should be identical to the .NET BCL
   DbConnectionOptions behaviour.
  </p>
 </div>

 <div class="sect2" id="migration82.incompatible.pdo-odbc">
  <h3 class="title">PDO_ODBC</h3>

  <p class="para">
   The PDO_ODBC extension also escapes the username and password when a
   connection string is passed. See the <a target="_blank" href="https://www.php.net/manual/en/migration82.incompatible.php#migration82.incompatible.odbc" class="link">change to the ODBC extension</a> for
   further details.
  </p>
 </div>

 <div class="sect2" id="migration82.incompatible.standard">
  <h3 class="title">Standard</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.glob.php" class="function">glob()</a></span> now returns an empty <span class="type">array</span> if all paths are
   restricted by <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.open-basedir" class="link">open_basedir</a>.
   Previously it returned <strong><code>false</code></strong>.
   Moreover, a warning is now emitted even if only some paths are restricted by
   <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.open-basedir" class="link">open_basedir</a>.
  </p>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/filesystemiterator.construct.php" class="methodname">FilesystemIterator::__construct()</a></span>: prior to PHP 8.2.0,
   <strong><code>FilesystemIterator::SKIP_DOTS</code></strong> constant was always set
   and couldn't be disabled. In order to maintain the previous behaviour the constant
   must be explicitly set when using the <code class="parameter">flags</code> parameter.
   The default value from <code class="parameter">flags</code> parameter has
   not been modified.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strtolower.php" class="function">strtolower()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strtoupper.php" class="function">strtoupper()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stristr.php" class="function">stristr()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stripos.php" class="function">stripos()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strripos.php" class="function">strripos()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.lcfirst.php" class="function">lcfirst()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ucfirst.php" class="function">ucfirst()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ucwords.php" class="function">ucwords()</a></span>,
   and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.str-ireplace.php" class="function">str_ireplace()</a></span> are no longer locale-sensitive.
   They now perform ASCII case conversion, as if the locale were "C".
   Localized versions of these functions are available in the <a target="_blank" href="https://www.php.net/manual/en/book.mbstring.php" class="link">MBString extension</a>.
   Moreover, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-change-key-case.php" class="function">array_change_key_case()</a></span>, and sorting with
   <strong><code>SORT_FLAG_CASE</code></strong> now also use ASCII case conversion.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.str-split.php" class="function">str_split()</a></span> returns an empty <span class="type">array</span> for an empty <span class="type">string</span> now.
   Previously it returned an array with a single empty string entry.
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-str-split.php" class="function">mb_str_split()</a></span> is not affected by this change as it was
   already behaving like that.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ksort.php" class="function">ksort()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.krsort.php" class="function">krsort()</a></span> now do numeric string
   comparison under <strong><code>SORT_REGULAR</code></strong> using the standard PHP 8 rules now.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.var-export.php" class="function">var_export()</a></span> no longer omits the leading backslash for exported classes,
   i.e. these are now fully qualified.
  </p>
 </div>

 <div class="sect2" id="migration82.incompatible.spl">
  <h3 class="title">Standard PHP Library (SPL)</h3>

  <p class="para">
   The following methods now enforce their signature:
   </p><ul class="simplelist"><li class="member"><span class="methodname"><strong>SplFileInfo::_bad_state_ex()</strong></span></li>
    <li class="member"><span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.getcsvcontrol.php" class="methodname">SplFileObject::getCsvControl()</a></span></li>
    <li class="member"><span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.fflush.php" class="methodname">SplFileObject::fflush()</a></span></li>
    <li class="member"><span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.ftell.php" class="methodname">SplFileObject::ftell()</a></span></li>
    <li class="member"><span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.fgetc.php" class="methodname">SplFileObject::fgetc()</a></span></li>
    <li class="member"><span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.fpassthru.php" class="methodname">SplFileObject::fpassthru()</a></span></li>
   </ul><p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.haschildren.php" class="methodname">SplFileObject::hasChildren()</a></span> now has a tentative
   return type of <span class="type"><span class="type false">false</span></span>, previously it was <span class="type">bool</span>.
  </p>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.getchildren.php" class="methodname">SplFileObject::getChildren()</a></span> now has a tentative
   return type of <span class="type">null</span>, previously it was
   <span class="type">?</span><span class="type"><span class="type"><a target="_blank" href="https://www.php.net/manual/en/class.recursiveiterator.php" class="type RecursiveIterator">RecursiveIterator</a></span><span class="type"></span></span>.
  </p>

  <p class="para">
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.globiterator.php" class="classname">GlobIterator</a></span> now returns an empty <span class="type">array</span> if all
   paths are restricted by <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.open-basedir" class="link">open_basedir</a>.
   Previously it returned <strong><code>false</code></strong>.
   Moreover, a warning is now emitted even if only some paths are restricted by
   <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.open-basedir" class="link">open_basedir</a>.
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration81.incompatible.php" target="_blank">PHP 8.1</a></h1>
    </header>

    <div id="migration81.incompatible" class="sect1">
 <h2 class="title">Backward Incompatible Changes</h2>

 <div class="sect2" id="migration81.incompatible.core">
  <h3 class="title">PHP Core</h3>

  <div class="sect3" id="migration81.incompatible.core.globals-access">
   <h4 class="title">$GLOBALS Access Restrictions</h4>

   <p class="para">
    Access to the <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.globals.php" class="classname">$GLOBALS</a></var> array is now subject to
    a number of restrictions.
    Read and write access to individual array elements like
    <code class="code">$GLOBALS['var']</code> continues to work as-is.
    Read-only access to the entire <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.globals.php" class="classname">$GLOBALS</a></var> array also
    continues to be supported.
    However, write access to the entire <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.globals.php" class="classname">$GLOBALS</a></var> array
    is no longer supported. For example, <code class="code">array_pop($GLOBALS)</code>
    will result in an error.
   </p>
  </div>

  <div class="sect3" id="migration81.incompatible.core.static-variable-inheritance">
   <h4 class="title">
    Usage of <span class="modifier">static</span> Variables in Inherited Methods
   </h4>

   <p class="para">
    When a method using static variables is inherited (but not overridden), the
    inherited method will now share static variables with the parent method.
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">class </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br>    public static function </span><span style="color: #0000BB">counter</span><span style="color: #007700">() {<br>        static </span><span style="color: #0000BB">$counter </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$counter</span><span style="color: #007700">++;<br>        return </span><span style="color: #0000BB">$counter</span><span style="color: #007700">;<br>    }<br>}<br>class </span><span style="color: #0000BB">B </span><span style="color: #007700">extends </span><span style="color: #0000BB">A </span><span style="color: #007700">{}<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">counter</span><span style="color: #007700">()); </span><span style="color: #FF8000">// int(1)<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">counter</span><span style="color: #007700">()); </span><span style="color: #FF8000">// int(2)<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">B</span><span style="color: #007700">::</span><span style="color: #0000BB">counter</span><span style="color: #007700">()); </span><span style="color: #FF8000">// int(3), previously int(1)<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">B</span><span style="color: #007700">::</span><span style="color: #0000BB">counter</span><span style="color: #007700">()); </span><span style="color: #FF8000">// int(4), previously int(2)<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>

    This means that static variables in methods now behave the same way as
    static properties.
   
  </div>

  <div class="sect3" id="migration81.incompatible.core.optional-before-required">
   <h4 class="title">Optional parameters specified before required parameters</h4>

   <p class="para">
    An <a target="_blank" href="https://www.php.net/manual/en/functions.arguments.php#functions.arguments.default" class="link">optional parameter</a>
    specified before required parameters is now always treated as required,
    even when called using
    <a target="_blank" href="https://www.php.net/manual/en/functions.arguments.php#functions.named-arguments" class="link">named arguments</a>.
    As of PHP 8.0.0, but prior to PHP 8.1.0, the below emits a deprecation notice
    on the definition, but runs successfully when called. As of PHP 8.1.0, an error
    of class <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.argumentcounterror.php" class="classname">ArgumentCountError</a></span> is thrown, as it would be when
    called with positional arguments.

    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">makeyogurt</span><span style="color: #007700">(</span><span style="color: #0000BB">$container </span><span style="color: #007700">= </span><span style="color: #DD0000">"bowl"</span><span style="color: #007700">, </span><span style="color: #0000BB">$flavour</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #DD0000">"Making a </span><span style="color: #0000BB">$container</span><span style="color: #DD0000"> of </span><span style="color: #0000BB">$flavour</span><span style="color: #DD0000"> yogurt.\n"</span><span style="color: #007700">;<br>}<br>try<br>{<br>    echo </span><span style="color: #0000BB">makeyogurt</span><span style="color: #007700">(</span><span style="color: #0000BB">flavour</span><span style="color: #007700">: </span><span style="color: #DD0000">"raspberry"</span><span style="color: #007700">);<br>}<br>catch (</span><span style="color: #0000BB">Error $e</span><span style="color: #007700">)<br>{<br>    echo </span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">), </span><span style="color: #DD0000">' - '</span><span style="color: #007700">, </span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

     <p class="para">Output of the above example in PHP 8.0:</p>
     <div class="example-contents screen">
<div class="cdata"><pre>
Deprecated: Required parameter $flavour follows optional parameter $container
 in example.php on line 3
Making a bowl of raspberry yogurt.
</pre></div>
     </div>
     <p class="para">Output of the above example in PHP 8.1:</p>
     <div class="example-contents screen">
<div class="cdata"><pre>
Deprecated: Optional parameter $container declared before required parameter
 $flavour is implicitly treated as a required parameter in example.php on line 3
ArgumentCountError - makeyogurt(): Argument #1 ($container) not passed
</pre></div>
     </div>
    </div>
   
   <p class="para">
    Note that a default value of <strong><code>null</code></strong> can be used before required parameters to
    specify a <a target="_blank" href="https://www.php.net/manual/en/language.types.declarations.php#language.types.declarations.nullable" class="link">nullable type</a>,
    but the parameter will still be required.
   </p>
  </div>

  <div class="sect3" id="migration81.incompatible.core.type-compatibility-internal">
   <h4 class="title">Return Type Compatibility with Internal Classes</h4>

   <p class="para">
    Most non-final internal methods now require overriding methods to declare
    a compatible return type, otherwise a deprecated notice is emitted during
    inheritance validation.
    In case the return type cannot be declared for an overriding method due to
    PHP cross-version compatibility concerns,
    a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.returntypewillchange.php" class="classname">ReturnTypeWillChange</a></span> attribute can be added to silence
    the deprecation notice.
   </p>
  </div>

  <div class="sect3" id="migration81.incompatible.core.new-keywords">
   <h4 class="title">New Keywords</h4>
   <p class="para">
    <code class="literal">readonly</code> is a keyword now. However, it still may be used
    as function name.
   </p>
   <p class="para">
    <code class="literal">never</code> is now a reserved word, so it cannot be used to name a class,
    interface or trait, and is also prohibited from being used in namespaces.
   </p>
  </div>
 </div>

 <div class="sect2" id="migration81.incompatible.resource2object">
  <h3 class="title">Resource to Object Migration</h3>

  <p class="para">
   Several <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s have been migrated to <span class="type">object</span>s.
   Return value checks using <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-resource.php" class="function">is_resource()</a></span> should be replaced with checks for <strong><code>false</code></strong>.
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.fileinfo.php" class="link">FileInfo</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.finfo.php" class="classname">finfo</a></span> objects instead of
     <code class="literal">fileinfo</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.ftp.php" class="link">FTP</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.ftp-connection.php" class="classname">FTP\Connection</a></span> objects instead of
     <code class="literal">ftp</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.imap.php" class="link">IMAP</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.imap-connection.php" class="classname">IMAP\Connection</a></span> objects instead of
     <code class="literal">imap</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.ldap.php" class="link">LDAP</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.ldap-connection.php" class="classname">LDAP\Connection</a></span> objects instead of
     <code class="literal">ldap link</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.ldap.php" class="link">LDAP</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.ldap-result.php" class="classname">LDAP\Result</a></span> objects instead of
     <code class="literal">ldap result</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.ldap.php" class="link">LDAP</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.ldap-result-entry.php" class="classname">LDAP\ResultEntry</a></span> objects instead of
     <code class="literal">ldap result entry</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.pgsql.php" class="link">PgSQL</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pgsql-connection.php" class="classname">PgSql\Connection</a></span> objects instead of
     <code class="literal">pgsql link</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.pgsql.php" class="link">PgSQL</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pgsql-result.php" class="classname">PgSql\Result</a></span> objects instead of
     <code class="literal">pgsql result</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.pgsql.php" class="link">PgSQL</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pgsql-lob.php" class="classname">PgSql\Lob</a></span> objects instead of
     <code class="literal">pgsql large object</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.pspell.php" class="link">PSpell</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pspell-dictionary.php" class="classname">PSpell\Dictionary</a></span> objects instead of
     <code class="literal">pspell</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.pspell.php" class="link">PSpell</a> functions now accept and return
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pspell-config.php" class="classname">PSpell\Config</a></span> objects instead of
     <code class="literal">pspell config</code> <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration81.incompatible.mysqli">
  <h3 class="title">MySQLi</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/mysqli-result.fetch-fields.php" class="function">mysqli_fetch_fields()</a></span>, and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/mysqli-result.fetch-field-direct.php" class="function">mysqli_fetch_field_direct()</a></span> will now always return
   <code class="literal">0</code> for the <span class="property">max_length</span>.
   This information can be computed by iterating over the result set,
   and taking the maximum length. This is what PHP was doing
   internally previously.
  </p>

  <p class="para">
   The <strong><code>MYSQLI_STMT_ATTR_UPDATE_MAX_LENGTH</code></strong>
   option no longer has any effect.
  </p>

  <p class="para">
   The <strong><code>MYSQLI_STORE_RESULT_COPY_DATA</code></strong>
   option no longer has any effect. Passing any value to the
   <code class="parameter">mode</code> parameter of
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/mysqli.store-result.php" class="methodname">mysqli::store_result()</a></span> no longer has any effect.
  </p>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-connect.php" class="methodname">mysqli::connect()</a></span> now returns <strong><code>true</code></strong> instead of <strong><code>null</code></strong> on success.
  </p>

  <p class="para">
   The default error handling mode has been changed from "silent" to "exceptions"
   See the <a target="_blank" href="https://www.php.net/manual/en/mysqli-driver.report-mode.php" class="link">MySQLi reporting mode</a>
   page for more details on what this entails,
   and how to explicitly set this attribute.
   To restore the previous behaviour use:
   <code class="code">mysqli_report(MYSQLI_REPORT_OFF);</code>
  </p>

  <p class="para">
   Classes extending <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/mysqli-stmt.execute.php" class="methodname">mysqli_stmt::execute()</a></span>
   are now required to specify the additional optional parameter.
  </p>
 </div>

 <div class="sect2" id="migration81.incompatible.mysqlnd">
  <h3 class="title">MySQLnd</h3>

  <p class="para">
   The <a target="_blank" href="https://www.php.net/manual/en/mysqlnd.config.php#ini.mysqlnd.fetch_data_copy" class="link">mysqlnd.fetch_data_copy</a>
   INI directive has been removed.
   This should not result in user-visible behavior changes.
  </p>
 </div>

 <div class="sect2" id="migration81.incompatible.openssl">
  <h3 class="title">OpenSSL</h3>

  <p class="para">
   EC private keys will now be exported in <abbr title="Public Key Cryptography Standards">PKCS</abbr>#8 format rather than
   traditional format, just like all other keys.
  </p>
  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-pkcs7-encrypt.php" class="function">openssl_pkcs7_encrypt()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-cms-encrypt.php" class="function">openssl_cms_encrypt()</a></span> will now to default using
   AES-128-CBC rather than RC2-40. The RC2-40 cipher is considered
   insecure and not enabled by default by OpenSSL 3.
  </p>
 </div>

 <div class="sect2" id="migration81.incompatible.pdo">
  <h3 class="title">PHP Data Objects</h3>

  <p class="para">
   <strong><code>PDO::ATTR_STRINGIFY_FETCHES</code></strong> now stringifies values
   of type <span class="type">bool</span> to <code class="literal">"0"</code> or
   <code class="literal">"1"</code>. Previously <span class="type">bool</span>s were not stringified.
  </p>
  <p class="para">
   Calling <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/pdostatement.bindcolumn.php" class="methodname">PDOStatement::bindColumn()</a></span> with
   <strong><code>PDO::PARAM_LOB</code></strong> will now constantly bind a stream
   result when <strong><code>PDO::ATTR_STRINGIFY_FETCHES</code></strong> is not enabled.
   Previously, the result would either be a stream or a string depending on
   the used database driver and the time the binding is performed.
  </p>

  <div class="sect3" id="migration81.incompatible.pdo.mysql">
   <h4 class="title">MySQL Driver</h4>

   <p class="para">
    Integers and floats in result sets will now be returned using native
    PHP types instead of <span class="type">string</span>s when using emulated prepared statements.
    This matches the behavior of native prepared statements.
    The previous behaviour can be restored by enabling the
    <strong><code>PDO::ATTR_STRINGIFY_FETCHES</code></strong> option.
   </p>
  </div>

  <div class="sect3" id="migration81.incompatible.pdo.sqlite">
   <h4 class="title">SQLite Driver</h4>

   <p class="para">
    Integers and floats in results sets will now be returned using native
    PHP types.
    The previous behaviour can be restored by enabling the
    <strong><code>PDO::ATTR_STRINGIFY_FETCHES</code></strong> option.
   </p>
  </div>
 </div>

 <div class="sect2" id="migration81.incompatible.phar">
  <h3 class="title">Phar</h3>

  <p class="para">
   To comply with the <span class="interfacename"><a target="_blank" href="https://www.php.net/manual/en/class.arrayaccess.php" class="interfacename">ArrayAccess</a></span> interface,
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/phar.offsetunset.php" class="methodname">Phar::offsetUnset()</a></span> and
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/phardata.offsetunset.php" class="methodname">PharData::offsetUnset()</a></span> no longer return a <span class="type">bool</span>.
  </p>
 </div>

 <div class="sect2" id="migration81.incompatible.standard">
  <h3 class="title">Standard</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.version-compare.php" class="function">version_compare()</a></span> no longer accepts undocumented operator abbreviations.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars.php" class="function">htmlspecialchars()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.php" class="function">htmlentities()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars-decode.php" class="function">htmlspecialchars_decode()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.html-entity-decode.php" class="function">html_entity_decode()</a></span>,
   and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-html-translation-table.php" class="function">get_html_translation_table()</a></span>
   now use <code class="literal">ENT_QUOTES | ENT_SUBSTITUTE</code> rather than
   <strong><code>ENT_COMPAT</code></strong> by default.
   This means that <code class="literal">'</code> is escaped to
   <code class="literal">'</code> while previously nothing was done.
   Additionally, malformed UTF-8 will be replaced by a Unicode substitution
   character, instead of resulting in an empty string.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.debug-zval-dump.php" class="function">debug_zval_dump()</a></span> now prints the refcount of a reference
   wrappers with their refcount, instead of only prepending
   <code class="literal">&amp;</code> to the value.
   This more accurately models reference representation since PHP 7.0.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.debug-zval-dump.php" class="function">debug_zval_dump()</a></span> now prints <code class="literal">interned</code>
   instead of a dummy refcount for interned strings and immutable arrays.
  </p>
 </div>

 <div class="sect2" id="migration81.incompatible.spl">
  <h3 class="title">Standard PHP Library (SPL)</h3>

  <p class="para">
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.splfixedarray.php" class="classname">SplFixedArray</a></span>, will now be JSON encoded like an <span class="type">array</span>
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration80.incompatible.php" target="_blank">PHP 8.0</a></h1>
    </header>

    <div id="migration80.incompatible" class="sect1">
 <h2 class="title">Backward Incompatible Changes</h2>

 <div class="sect2" id="migration80.incompatible.core">
  <h3 class="title">PHP Core</h3>

  <div class="sect3" id="migration80.incompatible.core.string-number-comparision">
   <h4 class="title">String to Number Comparison</h4>

   <p class="para">
    Non-strict comparisons between numbers and non-numeric strings now work by casting the number to
    string and comparing the strings. Comparisons between numbers and numeric strings continue to
    work as before. Notably, this means that <code class="code">0 == "not-a-number"</code> is considered false
    now.
    </p><table class="doctable informaltable"><thead><tr><th>Comparison</th>
        <th>Before</th>
        <th>After</th>
       </tr></thead><tbody class="tbody"><tr><td><code class="code">0 == "0"</code></td>
        <td><strong><code>true</code></strong></td>
        <td><strong><code>true</code></strong></td>
       </tr><tr><td><code class="code">0 == "0.0"</code></td>
        <td><strong><code>true</code></strong></td>
        <td><strong><code>true</code></strong></td>
       </tr><tr><td><code class="code">0 == "foo"</code></td>
        <td><strong><code>true</code></strong></td>
        <td><strong><code>false</code></strong></td>
       </tr><tr><td><code class="code">0 == ""</code></td>
        <td><strong><code>true</code></strong></td>
        <td><strong><code>false</code></strong></td>
       </tr><tr><td><code class="code">42 == "   42"</code></td>
        <td><strong><code>true</code></strong></td>
        <td><strong><code>true</code></strong></td>
       </tr><tr><td><code class="code">42 == "42foo"</code></td>
        <td><strong><code>true</code></strong></td>
        <td><strong><code>false</code></strong></td>
       </tr></tbody></table></div>

  <div class="sect3" id="migration80.incompatible.core.other">
   <h4 class="title">Other incompatible Changes</h4>

   <ul class="itemizedlist"><li class="listitem">
     <p class="para">
      <code class="literal">match</code> is now a reserved keyword.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <code class="literal">mixed</code> is now a reserved word, so it cannot be used to name a class, interface or trait, and is also prohibited from being used in namespaces.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Assertion failures now throw by default. If the old behavior is desired,
      <code class="code">assert.exception=0</code> can be set in the INI settings.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Methods with the same name as the class are no longer interpreted as constructors. The
      <a target="_blank" href="https://www.php.net/manual/en/language.oop5.decon.php#object.construct" class="link">__construct()</a> method should be used instead.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The ability to call non-static methods statically has been removed. Thus
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-callable.php" class="function">is_callable()</a></span> will fail when checking for a non-static method with a classname
      (must check with an object instance).
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The <code class="code">(real)</code> and <code class="code">(unset)</code> casts have been removed.
     </p>
    </li>
    <li class="listitem">
      <p class="para">
       The <a target="_blank" href="https://www.php.net/manual/en/errorfunc.configuration.php#ini.track-errors" class="link">track_errors</a> ini directive has been removed. This
       means that <var class="varname">php_errormsg</var> is no longer available. The
       <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.error-get-last.php" class="function">error_get_last()</a></span> function may be used instead.
      </p>
    </li>
    <li class="listitem">
     <p class="para">
      The ability to define case-insensitive constants has been removed. The third argument to
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.define.php" class="function">define()</a></span> may no longer be <strong><code>true</code></strong>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The ability to specify an autoloader using an <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.autoload.php" class="function">__autoload()</a></span> function has been
      removed. <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.spl-autoload-register.php" class="function">spl_autoload_register()</a></span> should be used instead.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The <code class="parameter">errcontext</code> argument will no longer be passed to custom error handlers
      set with <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.set-error-handler.php" class="function">set_error_handler()</a></span>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.create-function.php" class="function">create_function()</a></span> has been removed. Anonymous functions may be used instead.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.each.php" class="function">each()</a></span> has been removed. <a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> or <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayiterator.php" class="classname">ArrayIterator</a></span>
      should be used instead.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The ability to unbind <var class="varname">this</var> from closures that were created from a method,
      using <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/closure.fromcallable.php" class="methodname">Closure::fromCallable()</a></span> or
      <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/reflectionmethod.getclosure.php" class="methodname">ReflectionMethod::getClosure()</a></span>, has been removed.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The ability to unbind <var class="varname">this</var> from proper closures that contain uses of
      <var class="varname">this</var> has also been removed.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The ability to use <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-key-exists.php" class="function">array_key_exists()</a></span> with objects has been removed.
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.isset.php" class="function">isset()</a></span> or <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.property-exists.php" class="function">property_exists()</a></span> may be used instead.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The behavior of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-key-exists.php" class="function">array_key_exists()</a></span> regarding the type of the
      <code class="parameter">key</code> parameter has been made consistent with <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.isset.php" class="function">isset()</a></span> and
      normal array access. All key types now use the usual coercions and array/object keys throw a
      <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Any array that has a number <span class="replaceable">n</span> as its first numeric key will use
      <span class="replaceable">n+1</span> for its next implicit key, even if <span class="replaceable">n</span> is
      negative.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The default error_reporting level is now <strong><code>E_ALL</code></strong>. Previously it excluded
      <strong><code>E_NOTICE</code></strong> and <strong><code>E_DEPRECATED</code></strong>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <a target="_blank" href="https://www.php.net/manual/en/errorfunc.configuration.php#ini.display-startup-errors" class="link">display_startup_errors</a> is now enabled by
      default.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Using <span class="type"><span class="type parent">parent</span></span> inside a class that has no parent will now result in a fatal
      compile-time error.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The <code class="literal">@</code> operator will no longer silence fatal errors
      (<strong><code>E_ERROR</code></strong>, <strong><code>E_CORE_ERROR</code></strong>,
      <strong><code>E_COMPILE_ERROR</code></strong>, <strong><code>E_USER_ERROR</code></strong>,
      <strong><code>E_RECOVERABLE_ERROR</code></strong>, <strong><code>E_PARSE</code></strong>). Error handlers that
      expect error_reporting to be <code class="literal">0</code> when <code class="literal">@</code> is used, should be
      adjusted to use a mask check instead:
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #FF8000">// Replace<br></span><span style="color: #007700">function </span><span style="color: #0000BB">my_error_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$err_no</span><span style="color: #007700">, </span><span style="color: #0000BB">$err_msg</span><span style="color: #007700">, </span><span style="color: #0000BB">$filename</span><span style="color: #007700">, </span><span style="color: #0000BB">$linenum</span><span style="color: #007700">) {<br>    if (</span><span style="color: #0000BB">error_reporting</span><span style="color: #007700">() == </span><span style="color: #0000BB">0</span><span style="color: #007700">) {<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    }<br></span><span style="color: #FF8000">// ...<br></span><span style="color: #007700">}<br><br></span><span style="color: #FF8000">// With<br></span><span style="color: #007700">function </span><span style="color: #0000BB">my_error_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$err_no</span><span style="color: #007700">, </span><span style="color: #0000BB">$err_msg</span><span style="color: #007700">, </span><span style="color: #0000BB">$filename</span><span style="color: #007700">, </span><span style="color: #0000BB">$linenum</span><span style="color: #007700">) {<br>    if (!(</span><span style="color: #0000BB">error_reporting</span><span style="color: #007700">() &amp; </span><span style="color: #0000BB">$err_no</span><span style="color: #007700">)) {<br>        return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>    }<br></span><span style="color: #FF8000">// ...<br></span><span style="color: #007700">}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

     
     <p class="para">
      Additionally, care should be taken that error messages are not displayed in production
      environments, which can result in information leaks. Please ensure that
      <code class="code">display_errors=Off</code> is used in conjunction with error logging.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <code class="literal">#[</code> is no longer interpreted as the start of a comment,
      as this syntax is now used for attributes.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Inheritance errors due to incompatible method signatures (LSP violations) will now always
      generate a fatal error. Previously a warning was generated in some cases.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The precedence of the concatenation operator has changed relative to bitshifts and addition as
      well as subtraction.
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">"Sum: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$a </span><span style="color: #007700">+ </span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br></span><span style="color: #FF8000">// was previously interpreted as:<br></span><span style="color: #007700">echo (</span><span style="color: #DD0000">"Sum: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$a</span><span style="color: #007700">) + </span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br></span><span style="color: #FF8000">// is now interpreted as:<br></span><span style="color: #007700">echo </span><span style="color: #DD0000">"Sum:" </span><span style="color: #007700">. (</span><span style="color: #0000BB">$a </span><span style="color: #007700">+ </span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
      Arguments with a default value that resolves to <strong><code>null</code></strong> at runtime will no longer implicitly mark
      the argument type as nullable. Either an explicit nullable type, or an explicit <strong><code>null</code></strong> default
      value has to be used instead.
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #FF8000">// Replace<br></span><span style="color: #007700">function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">int $arg </span><span style="color: #007700">= </span><span style="color: #0000BB">CONST_RESOLVING_TO_NULL</span><span style="color: #007700">) {}<br></span><span style="color: #FF8000">// With<br></span><span style="color: #007700">function </span><span style="color: #0000BB">test</span><span style="color: #007700">(?</span><span style="color: #0000BB">int $arg </span><span style="color: #007700">= </span><span style="color: #0000BB">CONST_RESOLVING_TO_NULL</span><span style="color: #007700">) {}<br></span><span style="color: #FF8000">// Or<br></span><span style="color: #007700">function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">int $arg </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">) {}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

     
    </li>
    <li class="listitem">
     <p class="para">
      A number of warnings have been converted into <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exceptions:
     </p>
     <p class="para">
      </p><ul class="simplelist"><li class="member">
        Attempting to write to a property of a non-object. Previously this
        implicitly created an stdClass object for null, false and empty strings.
       </li>
       <li class="member">
        Attempting to append an element to an array for which the PHP_INT_MAX key
        is already used.
       </li>
       <li class="member">
        Attempting to use an invalid type (array or object) as an array key or
        string offset.
       </li>
       <li class="member">Attempting to write to an array index of a scalar value.</li>
       <li class="member">Attempting to unpack a non-array/Traversable.</li>
       <li class="member">
        Attempting to access unqualified constants which are undefined.
        Previously, unqualified constant accesses resulted in a warning and were interpreted as strings.
       </li>
       <li class="member">
        Passing the wrong number of arguments to a non-variadic built-in
        function will throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.argumentcounterror.php" class="classname">ArgumentCountError</a></span>.
       </li>
      </ul><p class="para">
      A number of notices have been converted into warnings:
     </p>
     <p class="para">
      </p><ul class="simplelist"><li class="member">Attempting to read an undefined variable.</li>
       <li class="member">Attempting to read an undefined property.</li>
       <li class="member">Attempting to read an undefined array key.</li>
       <li class="member">Attempting to read a property of a non-object.</li>
       <li class="member">Attempting to access an array index of a non-array.</li>
       <li class="member">Attempting to convert an array to string.</li>
       <li class="member">Attempting to use a resource as an array key.</li>
       <li class="member">Attempting to use null, a boolean, or a float as a string offset.</li>
       <li class="member">Attempting to read an out-of-bounds string offset.</li>
       <li class="member">Attempting to assign an empty string to a string offset.</li>
      </ul></li>
    <li class="listitem">
     <p class="para">
      Attempting to assign multiple bytes to a string offset will now emit a warning.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Unexpected characters in source files (such as NUL bytes outside of strings) will now result in a
      <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.parseerror.php" class="classname">ParseError</a></span> exception instead of a compile warning.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Uncaught exceptions now go through "clean shutdown", which means that destructors will be called
      after an uncaught exception.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The compile time fatal error "Only variables can be passed by reference" has been delayed until
      runtime, and converted into an "Argument cannot be passed by reference"
      <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Some "Only variables should be passed by reference" notices have been converted to "Argument
      cannot be passed by reference" exception.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The generated name for anonymous classes has changed. It will now include the name of the first
      parent or interface:
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">new class extends </span><span style="color: #0000BB">ParentClass </span><span style="color: #007700">{};<br></span><span style="color: #FF8000">// -&gt; ParentClass@anonymous<br></span><span style="color: #007700">new class implements </span><span style="color: #0000BB">FirstInterface</span><span style="color: #007700">, </span><span style="color: #0000BB">SecondInterface </span><span style="color: #007700">{};<br></span><span style="color: #FF8000">// -&gt; FirstInterface@anonymous<br></span><span style="color: #007700">new class {};<br></span><span style="color: #FF8000">// -&gt; class@anonymous<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

     
     <p class="para">
      The name shown above is still followed by a NUL byte and a unique suffix.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Non-absolute trait method references in trait alias adaptations are now required to be
      unambiguous:
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">class </span><span style="color: #0000BB">X </span><span style="color: #007700">{<br>    use </span><span style="color: #0000BB">T1</span><span style="color: #007700">, </span><span style="color: #0000BB">T2 </span><span style="color: #007700">{<br></span><span style="color: #0000BB">func </span><span style="color: #007700">as </span><span style="color: #0000BB">otherFunc</span><span style="color: #007700">;<br>    }<br>    function </span><span style="color: #0000BB">func</span><span style="color: #007700">() {}<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

     
     <p class="para">
      If both <code class="code">T1::func()</code> and <code class="code">T2::func()</code> exist, this code was previously
      silently accepted, and func was assumed to refer to <code class="code">T1::func</code>. Now it will generate a
      fatal error instead, and either <code class="code">T1::func</code> or <code class="code">T2::func</code> needs to be
      written explicitly.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The signature of abstract methods defined in traits is now checked against the implementing class
      method:
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">MyTrait </span><span style="color: #007700">{<br>    abstract private function </span><span style="color: #0000BB">neededByTrait</span><span style="color: #007700">(): </span><span style="color: #0000BB">string</span><span style="color: #007700">;<br>}<br><br>class </span><span style="color: #0000BB">MyClass </span><span style="color: #007700">{<br>    use </span><span style="color: #0000BB">MyTrait</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">// Error, because of return type mismatch.<br></span><span style="color: #007700">private function </span><span style="color: #0000BB">neededByTrait</span><span style="color: #007700">(): </span><span style="color: #0000BB">int </span><span style="color: #007700">{ return </span><span style="color: #0000BB">42</span><span style="color: #007700">; }<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
      Disabled functions are now treated exactly like non-existent functions. Calling a disabled
      function will report it as unknown, and redefining a disabled function is now possible.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <code class="literal">data://</code> stream wrappers are no longer writable, which matches the documented
      behavior.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      The arithmetic and bitwise operators <code class="literal">+</code>, <code class="literal">-</code>,
      <code class="literal">*</code>, <code class="literal">/</code>, <code class="literal">**</code>, <code class="literal">%</code>,
      <code class="literal">&lt;&lt;</code>, <code class="literal">&gt;&gt;</code>, <code class="literal">&amp;</code>,
      <code class="literal">|</code>, <code class="literal">^</code>, <code class="literal">~</code>, <code class="literal">++</code>,
      <code class="literal">--</code> will now consistently throw a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span> when one of
      the operands is an <span class="type">array</span>, <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a> or non-overloaded <span class="type">object</span>. The only exception to this is
      the array <code class="literal">+</code> array merge operation, which remains supported.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Float to string casting will now always behave locale-independently.
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">, </span><span style="color: #DD0000">"de_DE"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$f </span><span style="color: #007700">= </span><span style="color: #0000BB">3.14</span><span style="color: #007700">;<br>echo </span><span style="color: #0000BB">$f</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br></span><span style="color: #FF8000">// Previously: 3,14<br>// Now:        3.14<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

     
     <p class="para">
      See <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.printf.php" class="function">printf()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.number-format.php" class="function">number_format()</a></span> and
      <span class="methodname"><strong>NumberFormatter()</strong></span> for ways to customize number formatting.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Support for deprecated curly braces for offset access has been removed.
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #FF8000">// Instead of:<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">{</span><span style="color: #0000BB">0</span><span style="color: #007700">};<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">{</span><span style="color: #DD0000">"key"</span><span style="color: #007700">};<br></span><span style="color: #FF8000">// Write:<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"key"</span><span style="color: #007700">];<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
      Applying the final modifier on a private method will now produce a warning unless that method is
      the constructor.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      If an object constructor <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.exit.php" class="function">exit()</a></span>s, the object destructor will no longer be
      called. This matches the behavior when the constructor throws.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Namespaced names can no longer contain whitespace: While <code class="code">Foo\Bar</code> will be recognized
      as a namespaced name, <code class="code">Foo \ Bar</code> will not. Conversely, reserved keywords are now
      permitted as namespace segments, which may also change the interpretation of code:
      <code class="code">new\x</code> is now the same as <code class="code">constant('new\x')</code>, not
      <code class="code">new \x()</code>.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Nested ternaries now require explicit parentheses.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.debug-backtrace.php" class="function">debug_backtrace()</a></span> and <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/exception.gettrace.php" class="methodname">Exception::getTrace()</a></span> will no
      longer provide references to arguments. It will not be possible to change function arguments
      through the backtrace.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Numeric string handling has been altered to be more intuitive and less error-prone. Trailing
      whitespace is now allowed in numeric strings for consistency with how leading whitespace is
      treated. This mostly affects:
     </p>
     <p class="para">
      </p><ul class="simplelist"><li class="member">The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-numeric.php" class="function">is_numeric()</a></span> function</li>
       <li class="member">String-to-string comparisons</li>
       <li class="member">Type declarations</li>
       <li class="member">Increment and decrement operations</li>
      </ul><p class="para">
      The concept of a "leading-numeric string" has been mostly dropped; the cases where this remains
      exist in order to ease migration. Strings which emitted an <strong><code>E_NOTICE</code></strong> "A non
      well-formed numeric value encountered" will now emit an <strong><code>E_WARNING</code></strong> "A
      non-numeric value encountered" and all strings which emitted an <strong><code>E_WARNING</code></strong> "A
      non-numeric value encountered" will now throw a
      <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span>. This mostly affects:
     </p>
     <p class="para">
      </p><ul class="simplelist"><li class="member">Arithmetic operations</li>
       <li class="member">Bitwise operations</li>
      </ul><p class="para">
      This <strong><code>E_WARNING</code></strong> to <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span> change also affects the
      <strong><code>E_WARNING</code></strong> "Illegal string offset 'string'" for illegal string offsets. The
      behavior of explicit casts to int/float from strings has not been changed.
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Magic Methods will now have their arguments and return types checked if they have them declared.
      The signatures should match the following list:
     </p>
     <p class="para">
      </p><ul class="simplelist"><li class="member"><code class="code">__call(string $name, array $arguments): mixed</code></li>
       <li class="member"><code class="code">__callStatic(string $name, array $arguments): mixed</code></li>
       <li class="member"><code class="code">__clone(): void</code></li>
       <li class="member"><code class="code">__debugInfo(): ?array</code></li>
       <li class="member"><code class="code">__get(string $name): mixed</code></li>
       <li class="member"><code class="code">__invoke(mixed $arguments): mixed</code></li>
       <li class="member"><code class="code">__isset(string $name): bool</code></li>
       <li class="member"><code class="code">__serialize(): array</code></li>
       <li class="member"><code class="code">__set(string $name, mixed $value): void</code></li>
       <li class="member"><code class="code">__set_state(array $properties): object</code></li>
       <li class="member"><code class="code">__sleep(): array</code></li>
       <li class="member"><code class="code">__unserialize(array $data): void</code></li>
       <li class="member"><code class="code">__unset(string $name): void</code></li>
       <li class="member"><code class="code">__wakeup(): void</code></li>
      </ul></li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func-array.php" class="function">call_user_func_array()</a></span> array keys will now be interpreted as parameter names,
      instead of being silently ignored.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Declaring a function called <code class="literal">assert()</code> inside a namespace is
      no longer allowed, and issues <strong><code>E_COMPILE_ERROR</code></strong>.
      The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.assert.php" class="function">assert()</a></span> function is subject to special handling by the engine,
      which may lead to inconsistent behavior when defining a namespaced function with the same name.
     </p>
    </li>
   </ul></div>
 </div>

 <div class="sect2" id="migration80.incompatible.resource2object">
  <h3 class="title">Resource to Object Migration</h3>

  <p class="para">
   Several <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s have been migrated to <span class="type">object</span>s.
   Return value checks using <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-resource.php" class="function">is_resource()</a></span> should be replaced with checks for <strong><code>false</code></strong>.
  </p>
  <ul class="itemizedlist"><li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-init.php" class="function">curl_init()</a></span> will now return a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlhandle.php" class="classname">CurlHandle</a></span> object rather
      than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>. The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-close.php" class="function">curl_close()</a></span> function no longer has an effect,
      instead the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlhandle.php" class="classname">CurlHandle</a></span> instance is automatically destroyed if it is no
      longer referenced.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-multi-init.php" class="function">curl_multi_init()</a></span> will now return a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlmultihandle.php" class="classname">CurlMultiHandle</a></span>
      object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>. The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-multi-close.php" class="function">curl_multi_close()</a></span> function no
      longer has an effect, instead the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlmultihandle.php" class="classname">CurlMultiHandle</a></span> instance is
      automatically destroyed if it is no longer referenced.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-share-init.php" class="function">curl_share_init()</a></span> will now return a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlsharehandle.php" class="classname">CurlShareHandle</a></span>
      object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>. The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-share-close.php" class="function">curl_share_close()</a></span> function no
      longer has an effect, instead the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlsharehandle.php" class="classname">CurlShareHandle</a></span> instance is
      automatically destroyed if it is no longer referenced.
     </p>
    </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.enchant-broker-init.php" class="function">enchant_broker_init()</a></span> will now return an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.enchantbroker.php" class="classname">EnchantBroker</a></span>
     object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.enchant-broker-request-dict.php" class="function">enchant_broker_request_dict()</a></span> and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.enchant-broker-request-pwl-dict.php" class="function">enchant_broker_request_pwl_dict()</a></span> will now return an
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.enchantdictionary.php" class="classname">EnchantDictionary</a></span> object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The GD extension now uses <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.gdimage.php" class="classname">GdImage</a></span> objects as the underlying data structure
     for images, rather than <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
     The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.imagedestroy.php" class="function">imagedestroy()</a></span> function no longer has an effect; instead the
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.gdimage.php" class="classname">GdImage</a></span> instance is automatically destroyed if it is no longer referenced.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-x509-read.php" class="function">openssl_x509_read()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-csr-sign.php" class="function">openssl_csr_sign()</a></span> will now return
     an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.opensslcertificate.php" class="classname">OpenSSLCertificate</a></span> object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
     The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-x509-free.php" class="function">openssl_x509_free()</a></span> function is deprecated and no longer has an effect,
     instead the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.opensslcertificate.php" class="classname">OpenSSLCertificate</a></span> instance is automatically destroyed if it
     is no longer referenced.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-csr-new.php" class="function">openssl_csr_new()</a></span> will now return an
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.opensslcertificatesigningrequest.php" class="classname">OpenSSLCertificateSigningRequest</a></span> object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-pkey-new.php" class="function">openssl_pkey_new()</a></span> will now return an
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.opensslasymmetrickey.php" class="classname">OpenSSLAsymmetricKey</a></span> object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
     The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-pkey-free.php" class="function">openssl_pkey_free()</a></span> function is deprecated and no longer has an effect,
     instead the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.opensslasymmetrickey.php" class="classname">OpenSSLAsymmetricKey</a></span> instance is automatically destroyed if it
     is no longer referenced.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.shmop-open.php" class="function">shmop_open()</a></span> will now return a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.shmop.php" class="classname">Shmop</a></span> object rather than
     a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>. The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.shmop-close.php" class="function">shmop_close()</a></span> function no longer has an effect, and is
     deprecated; instead the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.shmop.php" class="classname">Shmop</a></span> instance is automatically destroyed if it is
     no longer referenced.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-create.php" class="function">socket_create()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-create-listen.php" class="function">socket_create_listen()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-accept.php" class="function">socket_accept()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-import-stream.php" class="function">socket_import_stream()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-addrinfo-connect.php" class="function">socket_addrinfo_connect()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-addrinfo-bind.php" class="function">socket_addrinfo_bind()</a></span>, and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-wsaprotocol-info-import.php" class="function">socket_wsaprotocol_info_import()</a></span> will now return a
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.socket.php" class="classname">Socket</a></span> object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-addrinfo-lookup.php" class="function">socket_addrinfo_lookup()</a></span> will now return an array of
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.addressinfo.php" class="classname">AddressInfo</a></span> objects rather than <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.msg-get-queue.php" class="function">msg_get_queue()</a></span> will now return an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.sysvmessagequeue.php" class="classname">SysvMessageQueue</a></span>
     object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.sem-get.php" class="function">sem_get()</a></span> will now return an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.sysvsemaphore.php" class="classname">SysvSemaphore</a></span> object
     rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.shm-attach.php" class="function">shm_attach()</a></span> will now return an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.sysvsharedmemory.php" class="classname">SysvSharedMemory</a></span> object
     rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.xml-parser-create.php" class="function">xml_parser_create()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.xml-parser-create-ns.php" class="function">xml_parser_create_ns()</a></span> will now
     return an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.xmlparser.php" class="classname">XMLParser</a></span> object rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>. The
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.xml-parser-free.php" class="function">xml_parser_free()</a></span> function no longer has an effect, instead the XMLParser
     instance is automatically destroyed if it is no longer referenced.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/book.xmlwriter.php" class="link">XMLWriter</a> functions now accept and return, respectively,
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.xmlwriter.php" class="classname">XMLWriter</a></span> objects instead of <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>s.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.inflate-init.php" class="function">inflate_init()</a></span> will now return an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.inflatecontext.php" class="classname">InflateContext</a></span> object
     rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.deflate-init.php" class="function">deflate_init()</a></span> will now return a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.deflatecontext.php" class="classname">DeflateContext</a></span> object
     rather than a <a target="_blank" href="https://www.php.net/manual/en/language.types.resource.php" class="link">resource</a>.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.com">
  <h3 class="title">COM and .Net (Windows)</h3>

  <p class="para">
   The ability to import case-insensitive constants from type libraries has been removed.
   The second argument to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.com-load-typelib.php" class="function">com_load_typelib()</a></span> may no longer be false;
   <a target="_blank" href="https://www.php.net/manual/en/com.configuration.php#ini.com.autoregister-casesensitive" class="link">com.autoregister_casesensitive</a>
   may no longer be disabled; case-insensitive markers in
   <a target="_blank" href="https://www.php.net/manual/en/com.configuration.php#ini.com.typelib-file" class="link">com.typelib_file</a> are ignored.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.curl">
  <h3 class="title">CURL</h3>

  <p class="para">
   <strong><code>CURLOPT_POSTFIELDS</code></strong> no longer accepts objects as arrays. To
   interpret an object as an array, perform an explicit <code class="code">(array)</code> cast. The
   same applies to other options accepting arrays as well.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.datetime">
  <h3 class="title">Date and Time</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mktime.php" class="function">mktime()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gmmktime.php" class="function">gmmktime()</a></span> now require at least one
   argument. <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.time.php" class="function">time()</a></span> can be used to get the current timestamp.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.dom">
  <h3 class="title">DOM</h3>

  <p class="para">
   Unimplemented classes from the DOM extension that had no behavior and contained test
   data have been removed. These classes have also been removed in the latest version of
   the DOM standard:
  </p>
  <p class="para">
   </p><ul class="simplelist"><li class="member"><span class="classname"><strong class="classname">DOMNameList</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DomImplementationList</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DOMConfiguration</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DomError</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DomErrorHandler</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DOMImplementationSource</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DOMLocator</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DOMUserDataHandler</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DOMTypeInfo</strong></span></li>
    <li class="member"><span class="classname"><strong class="classname">DOMStringExtend</strong></span></li>
   </ul><p class="para">
   Unimplemented methods from the DOM extension that had no behavior have been removed:
  </p>
  <p class="para">
   </p><ul class="simplelist"><li class="member"><span class="methodname"><strong>DOMNamedNodeMap::setNamedItem()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMNamedNodeMap::removeNamedItem()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMNamedNodeMap::setNamedItemNS()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMNamedNodeMap::removeNamedItemNS()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMText::replaceWholeText()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMNode::compareDocumentPosition()</strong></span></li>
    <li class="member"><span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/domnode.isequalnode.php" class="methodname">DOMNode::isEqualNode()</a></span></li>
    <li class="member"><span class="methodname"><strong>DOMNode::getFeature()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMNode::setUserData()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMNode::getUserData()</strong></span></li>
    <li class="member"><span class="methodname"><strong>DOMDocument::renameNode()</strong></span></li>
   </ul></div>

 <div class="sect2" id="migration80.incompatible.enchant">
  <h3 class="title">Enchant</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.enchant-broker-list-dicts.php" class="function">enchant_broker_list_dicts()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.enchant-broker-describe.php" class="function">enchant_broker_describe()</a></span> and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.enchant-dict-suggest.php" class="function">enchant_dict_suggest()</a></span> will now return an empty array instead of <strong><code>null</code></strong>.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.exif">
  <h3 class="title">Exif</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.read-exif-data.php" class="function">read_exif_data()</a></span> has been removed; <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.exif-read-data.php" class="function">exif_read_data()</a></span>
   should be used instead.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.filter">
  <h3 class="title">Filter</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The <strong><code>FILTER_FLAG_SCHEME_REQUIRED</code></strong> and
     <strong><code>FILTER_FLAG_HOST_REQUIRED</code></strong> flags for the
     <strong><code>FILTER_VALIDATE_URL</code></strong> filter have been removed. The <code class="literal">scheme</code>
     and <code class="literal">host</code> are (and have been) always required.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <strong><code>INPUT_REQUEST</code></strong> and <strong><code>INPUT_SESSION</code></strong> source for
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.filter-input.php" class="function">filter_input()</a></span> etc. have been removed. These were never implemented and their
     use always generated a warning.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.gd">
  <h3 class="title">GD</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The deprecated function <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.image2wbmp.php" class="function">image2wbmp()</a></span> has been removed.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The deprecated functions <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.png2wbmp.php" class="function">png2wbmp()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.jpeg2wbmp.php" class="function">jpeg2wbmp()</a></span> have
     been removed.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The default <code class="parameter">mode</code> parameter of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.imagecropauto.php" class="function">imagecropauto()</a></span> no longer
     accepts <code class="literal">-1</code>. <strong><code>IMG_CROP_DEFAULT</code></strong> should be used instead.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     On Windows, <var class="filename">php_gd2.dll</var> has been renamed to <var class="filename">php_gd.dll</var>.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.gmp">
  <h3 class="title">GMP</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gmp-random.php" class="function">gmp_random()</a></span> has been removed. One of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gmp-random-range.php" class="function">gmp_random_range()</a></span> or
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gmp-random-bits.php" class="function">gmp_random_bits()</a></span> should be used instead.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.iconv">
  <h3 class="title">Iconv</h3>

  <p class="para">
   iconv implementations which do not properly set <var class="varname">errno</var> in case of errors are no
   longer supported.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.imap">
  <h3 class="title">IMAP</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The unused <code class="parameter">default_host</code> argument of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.imap-headerinfo.php" class="function">imap_headerinfo()</a></span>
     has been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.imap-header.php" class="function">imap_header()</a></span> function which is an alias of
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.imap-headerinfo.php" class="function">imap_headerinfo()</a></span> has been removed.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.intl">
  <h3 class="title">Internationalization Functions</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The deprecated constant <strong><code>INTL_IDNA_VARIANT_2003</code></strong> has been removed.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The deprecated <strong><code>Normalizer::NONE</code></strong> constant has been removed.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.ldap">
  <h3 class="title">LDAP</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The deprecated functions <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ldap-sort.php" class="function">ldap_sort()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ldap-control-paged-result.php" class="function">ldap_control_paged_result()</a></span> and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ldap-control-paged-result-response.php" class="function">ldap_control_paged_result_response()</a></span> have been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The interface of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ldap-set-rebind-proc.php" class="function">ldap_set_rebind_proc()</a></span> has changed; the
     <code class="parameter">callback</code> parameter does not accept empty strings anymore; <strong><code>null</code></strong> should be
     used instead.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.mbstring">
  <h3 class="title">MBString</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/mbstring.configuration.php#ini.mbstring.func-overload" class="link">mbstring.func_overload</a> directive has been
     removed. The related <strong><code>MB_OVERLOAD_MAIL</code></strong>,
     <strong><code>MB_OVERLOAD_STRING</code></strong>, and <strong><code>MB_OVERLOAD_REGEX</code></strong> constants
     have also been removed. Finally, the <code class="literal">"func_overload"</code> and
     <code class="literal">"func_overload_list"</code> entries in <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-get-info.php" class="function">mb_get_info()</a></span> have been
     removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-parse-str.php" class="function">mb_parse_str()</a></span> can no longer be used without specifying a result array.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     A number of deprecated mbregex aliases have been removed. See the following
     list for which functions should be used instead:
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><span class="function"><strong>mbregex_encoding()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-regex-encoding.php" class="function">mb_regex_encoding()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg.php" class="function">mb_ereg()</a></span></li>
      <li class="member"><span class="function"><strong>mberegi()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-eregi.php" class="function">mb_eregi()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_replace()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-replace.php" class="function">mb_ereg_replace()</a></span></li>
      <li class="member"><span class="function"><strong>mberegi_replace()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-eregi-replace.php" class="function">mb_eregi_replace()</a></span></li>
      <li class="member"><span class="function"><strong>mbsplit()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-split.php" class="function">mb_split()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_match()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-match.php" class="function">mb_ereg_match()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search.php" class="function">mb_ereg_search()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search_pos()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search-pos.php" class="function">mb_ereg_search_pos()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search_regs()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search-regs.php" class="function">mb_ereg_search_regs()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search_init()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search-init.php" class="function">mb_ereg_search_init()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search_getregs()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search-getregs.php" class="function">mb_ereg_search_getregs()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search_getpos()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search-getpos.php" class="function">mb_ereg_search_getpos()</a></span></li>
      <li class="member"><span class="function"><strong>mbereg_search_setpos()</strong></span> â†’ <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-search-setpos.php" class="function">mb_ereg_search_setpos()</a></span></li>
     </ul></li>
   <li class="listitem">
    <p class="para">
     The <code class="literal">e</code> modifier for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-replace.php" class="function">mb_ereg_replace()</a></span> has been removed.
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-replace-callback.php" class="function">mb_ereg_replace_callback()</a></span> should be used instead.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     A non-string pattern argument to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-replace.php" class="function">mb_ereg_replace()</a></span> will now be interpreted as
     a string instead of an ASCII codepoint. The previous behavior may be restored with an explicit
     call to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.chr.php" class="function">chr()</a></span>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">needle</code> argument for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strpos.php" class="function">mb_strpos()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strrpos.php" class="function">mb_strrpos()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-stripos.php" class="function">mb_stripos()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strripos.php" class="function">mb_strripos()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strstr.php" class="function">mb_strstr()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-stristr.php" class="function">mb_stristr()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strrchr.php" class="function">mb_strrchr()</a></span> and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strrichr.php" class="function">mb_strrichr()</a></span> can now be empty.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">is_hex</code> parameter, which was not used internally, has been removed from
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-decode-numericentity.php" class="function">mb_decode_numericentity()</a></span>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The legacy behavior of passing the encoding as the third argument instead of an offset for the
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-strrpos.php" class="function">mb_strrpos()</a></span> function has been removed; an explicit <code class="literal">0</code>
     offset with the encoding should be provided as the fourth argument instead.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="literal">ISO_8859-*</code> character encoding aliases have been replaced by
     <code class="literal">ISO8859-*</code> aliases for better interoperability with the iconv extension. The
     mbregex ISO 8859 aliases with underscores (<code class="literal">ISO_8859_*</code> and
     <code class="literal">ISO8859_*</code>) have also been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg.php" class="function">mb_ereg()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-eregi.php" class="function">mb_eregi()</a></span> will now return boolean <strong><code>true</code></strong> on
     a successful match. Previously they returned integer <code class="literal">1</code> if
     <code class="parameter">matches</code> was not passed, or <code class="code">max(1, strlen($matches[0]))</code> if
     <code class="parameter">matches</code> was passed.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.oci8">
  <h3 class="title">OCI8</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The <span class="classname"><strong class="classname">OCI-Lob</strong></span> class is now called <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.ocilob.php" class="classname">OCILob</a></span>, and the
     <span class="classname"><strong class="classname">OCI-Collection</strong></span> class is now called <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.ocicollection.php" class="classname">OCICollection</a></span>
     for name compliance enforced by PHP 8 arginfo type annotation tooling.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Several alias functions have been marked as deprecated.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.oci-internal-debug.php" class="function">oci_internal_debug()</a></span> and its alias <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ociinternaldebug.php" class="function">ociinternaldebug()</a></span> have
     been removed.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.odbc">
  <h3 class="title">ODBC</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.odbc-connect.php" class="function">odbc_connect()</a></span> no longer reuses connections.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The unused <code class="parameter">flags</code> parameter of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.odbc-exec.php" class="function">odbc_exec()</a></span> has been
     removed.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.openssl">
  <h3 class="title">OpenSSL</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-seal.php" class="function">openssl_seal()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-open.php" class="function">openssl_open()</a></span> now require
     <code class="parameter">method</code> to be passed, as the previous default of <code class="literal">"RC4"</code>
     is considered insecure.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.pcre">
  <h3 class="title">Regular Expressions (Perl-Compatible)</h3>

  <p class="para">
   When passing invalid escape sequences they are no longer interpreted as literals. This behavior
   previously required the <code class="literal">X</code> modifier â€“ which is now ignored.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.pdo">
  <h3 class="title">PHP Data Objects</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The default error handling mode has been changed from "silent" to "exceptions". See
     <a target="_blank" href="https://www.php.net/manual/en/pdo.error-handling.php" class="link">Errors and error handling</a> for details.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The signatures of some PDO methods have changed:
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><code class="code">PDO::query(string $query, ?int $fetchMode  = null, mixed  ...$fetchModeArgs)</code></li>
      <li class="member"><code class="code">PDOStatement::setFetchMode(int $mode, mixed ...$args)</code></li>
     </ul></li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.pdo-odbc">
  <h3 class="title">PDO ODBC</h3>

  <p class="para">
   The <var class="filename">php.ini</var> directive
   <a target="_blank" href="https://www.php.net/manual/en/ref.pdo-odbc.php#ini.pdo-odbc.db2-instance-name" class="link">pdo_odbc.db2_instance_name</a> has been
   removed.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.pdo-mysql">
  <h3 class="title">PDO MySQL</h3>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/pdo.intransaction.php" class="methodname">PDO::inTransaction()</a></span> now reports the actual transaction state of
   the connection, rather than an approximation maintained by PDO. If a query that is
   subject to "implicit commit" is executed, <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/pdo.intransaction.php" class="methodname">PDO::inTransaction()</a></span>
   will subsequently return <strong><code>false</code></strong>, as a transaction is no longer active.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.pgsql">
  <h3 class="title">PostgreSQL</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The deprecated <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pg-connect.php" class="function">pg_connect()</a></span> syntax using multiple parameters instead of a
     connection string is no longer supported.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The deprecated <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pg-lo-import.php" class="function">pg_lo_import()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pg-lo-export.php" class="function">pg_lo_export()</a></span> signature
     that passes the connection as the last argument is no longer supported. The connection should be
     passed as first argument instead.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pg-fetch-all.php" class="function">pg_fetch_all()</a></span> will now return an empty array instead of <strong><code>false</code></strong> for result
     sets with zero rows.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.phar">
  <h3 class="title">Phar</h3>

  <p class="para">
   Metadata associated with a phar will no longer be automatically unserialized, to fix potential
   security vulnerabilities due to object instantiation, autoloading, etc.
   
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.reflection">
  <h3 class="title">Reflection</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The method signatures
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><code class="code">ReflectionClass::newInstance($args)</code></li>
      <li class="member"><code class="code">ReflectionFunction::invoke($args)</code></li>
      <li class="member"><code class="code">ReflectionMethod::invoke($object, $args)</code></li>
     </ul><p class="para">
     have been changed to:
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><code class="code">ReflectionClass::newInstance(...$args)</code></li>
      <li class="member"><code class="code">ReflectionFunction::invoke(...$args)</code></li>
      <li class="member"><code class="code">ReflectionMethod::invoke($object, ...$args)</code></li>
     </ul><p class="para">
     Code that must be compatible with both PHP 7 and PHP 8 can use the following
     signatures to be compatible with both versions:
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><code class="code">ReflectionClass::newInstance($arg = null, ...$args)</code></li>
      <li class="member"><code class="code">ReflectionFunction::invoke($arg = null, ...$args)</code></li>
      <li class="member"><code class="code">ReflectionMethod::invoke($object, $arg = null, ...$args)</code></li>
     </ul></li>
   <li class="listitem">
    <p class="para">
     The <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/reflectiontype.tostring.php" class="methodname">ReflectionType::__toString()</a></span> method will now return a complete debug
     representation of the type, and is no longer deprecated. In particular the result will include a
     nullability indicator for nullable types. The format of the return value is not stable and may
     change between PHP versions.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Reflection export() methods have been removed.
     Instead reflection objects can be cast to string.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/reflectionmethod.isconstructor.php" class="methodname">ReflectionMethod::isConstructor()</a></span> and
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/reflectionmethod.isdestructor.php" class="methodname">ReflectionMethod::isDestructor()</a></span> now also return <strong><code>true</code></strong> for
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.decon.php#object.construct" class="link">__construct()</a> and
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.decon.php#object.destruct" class="link">__destruct()</a> methods of interfaces.
     Previously, this would only be true for methods of classes and traits.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="methodname"><strong>ReflectionType::isBuiltin()</strong></span> method has been moved to
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.reflectionnamedtype.php" class="classname">ReflectionNamedType</a></span>. <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.reflectionuniontype.php" class="classname">ReflectionUnionType</a></span> does not
     have it.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.sockets">
  <h3 class="title">Sockets</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The deprecated <strong><code>AI_IDN_ALLOW_UNASSIGNED</code></strong> and
     <strong><code>AI_IDN_USE_STD3_ASCII_RULES</code></strong> <code class="parameter">flags</code> for
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.socket-addrinfo-lookup.php" class="function">socket_addrinfo_lookup()</a></span> have been removed.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.spl">
  <h3 class="title">Standard PHP Library (SPL)</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.fgetss.php" class="methodname">SplFileObject::fgetss()</a></span> has been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfileobject.seek.php" class="methodname">SplFileObject::seek()</a></span> now always seeks to the beginning of the line.
     Previously, positions <code class="literal">&gt;=1</code> sought to the beginning of the next line.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splheap.compare.php" class="methodname">SplHeap::compare()</a></span> now specifies a method signature. Inheriting classes
     implementing this method will now have to use a compatible method signature.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/spldoublylinkedlist.push.php" class="methodname">SplDoublyLinkedList::push()</a></span>,
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/spldoublylinkedlist.unshift.php" class="methodname">SplDoublyLinkedList::unshift()</a></span> and
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splqueue.enqueue.php" class="methodname">SplQueue::enqueue()</a></span> now return <span class="type"><span class="type void">void</span></span> instead of <strong><code>true</code></strong>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.spl-autoload-register.php" class="function">spl_autoload_register()</a></span> will now always throw a
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span> on invalid arguments, therefore the second argument
     <code class="parameter">do_throw</code> is ignored and a notice will be emitted if it is set to <strong><code>false</code></strong>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.splfixedarray.php" class="classname">SplFixedArray</a></span> is now an <span class="interfacename"><a target="_blank" href="https://www.php.net/manual/en/class.iteratoraggregate.php" class="interfacename">IteratorAggregate</a></span>
     and not an <span class="interfacename"><a target="_blank" href="https://www.php.net/manual/en/class.iterator.php" class="interfacename">Iterator</a></span>.
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.rewind.php" class="methodname">SplFixedArray::rewind()</a></span>, <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.current.php" class="methodname">SplFixedArray::current()</a></span>,
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.key.php" class="methodname">SplFixedArray::key()</a></span>, <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.next.php" class="methodname">SplFixedArray::next()</a></span>, and
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.valid.php" class="methodname">SplFixedArray::valid()</a></span> have been removed. In their place,
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.getiterator.php" class="methodname">SplFixedArray::getIterator()</a></span> has been added. Any code which uses explicit
     iteration over SplFixedArray must now obtain an
     <span class="interfacename"><a target="_blank" href="https://www.php.net/manual/en/class.iterator.php" class="interfacename">Iterator</a></span> through
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splfixedarray.getiterator.php" class="methodname">SplFixedArray::getIterator()</a></span>. This means that
     <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.splfixedarray.php" class="classname">SplFixedArray</a></span> is now safe to use in nested loops.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.standard">
  <h3 class="title">Standard Library</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.assert.php" class="function">assert()</a></span> will no longer evaluate string arguments, instead they will be
     treated like any other argument. <code class="code">assert($a == $b)</code> should be used instead of
     <code class="code">assert('$a == $b')</code>. The <a target="_blank" href="https://www.php.net/manual/en/info.configuration.php#ini.assert.quiet-eval" class="link">assert.quiet_eval</a> ini directive and the
     <strong><code>ASSERT_QUIET_EVAL</code></strong> constant have also been removed, as they would no longer
     have any effect.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.parse-str.php" class="function">parse_str()</a></span> can no longer be used without specifying a result array.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <a target="_blank" href="https://www.php.net/manual/en/filters.string.php#filters.string.strip_tags" class="link">string.strip_tags</a> filter has been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">needle</code> argument of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strpos.php" class="function">strpos()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strrpos.php" class="function">strrpos()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stripos.php" class="function">stripos()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strripos.php" class="function">strripos()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strstr.php" class="function">strstr()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strchr.php" class="function">strchr()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strrchr.php" class="function">strrchr()</a></span>, and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stristr.php" class="function">stristr()</a></span> will now always be interpreted as a string. Previously non-string
     needles were interpreted as an ASCII code point. An explicit call to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.chr.php" class="function">chr()</a></span> can
     be used to restore the previous behavior.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">needle</code> argument for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strpos.php" class="function">strpos()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strrpos.php" class="function">strrpos()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stripos.php" class="function">stripos()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strripos.php" class="function">strripos()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strstr.php" class="function">strstr()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stristr.php" class="function">stristr()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strrchr.php" class="function">strrchr()</a></span> can
     now be empty.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">length</code> argument for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.substr.php" class="function">substr()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.substr-count.php" class="function">substr_count()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.substr-compare.php" class="function">substr_compare()</a></span>, and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.iconv-substr.php" class="function">iconv_substr()</a></span> can now be <strong><code>null</code></strong>. <strong><code>null</code></strong> values will behave as if no length
     argument was provided and will therefore return the remainder of the string instead of an empty
     string.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">length</code> argument for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-splice.php" class="function">array_splice()</a></span> can now be
     <strong><code>null</code></strong>. <strong><code>null</code></strong> values will behave identically to omitting the argument, thus removing everything
     from the <code class="parameter">offset</code> to the end of the array.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">args</code> argument of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.vsprintf.php" class="function">vsprintf()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.vfprintf.php" class="function">vfprintf()</a></span>, and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.vprintf.php" class="function">vprintf()</a></span> must now be an array. Previously
     any type was accepted.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="literal">'salt'</code> option of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.password-hash.php" class="function">password_hash()</a></span> is no longer
     supported. If the <code class="literal">'salt'</code> option is used a warning is generated, the provided
     salt is ignored, and a generated salt is used instead.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.quotemeta.php" class="function">quotemeta()</a></span> function will now return an empty string if an empty string
     was passed. Previously <strong><code>false</code></strong> was returned.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The following functions have been removed:
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.hebrevc.php" class="function">hebrevc()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.convert-cyr-string.php" class="function">convert_cyr_string()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.money-format.php" class="function">money_format()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ezmlm-hash.php" class="function">ezmlm_hash()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.restore-include-path.php" class="function">restore_include_path()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-magic-quotes-gpc.php" class="function">get_magic_quotes_gpc()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-magic-quotes-runtime.php" class="function">get_magic_quotes_runtime()</a></span></li>
      <li class="member"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.fgetss.php" class="function">fgetss()</a></span></li>
     </ul></li>
   <li class="listitem">
    <p class="para">
     <strong><code>FILTER_SANITIZE_MAGIC_QUOTES</code></strong> has been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Calling <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.implode.php" class="function">implode()</a></span> with parameters in a reverse order <code class="code">($pieces,
     $glue)</code> is no longer supported.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.parse-url.php" class="function">parse_url()</a></span> will now distinguish absent and empty queries and fragments:
    </p>
    <p class="para">
     </p><ul class="simplelist"><li class="member"><code class="code">http://example.com/foo â†’ query = null, fragment = null</code></li>
      <li class="member"><code class="code">http://example.com/foo? â†’ query = "",   fragment = null</code></li>
      <li class="member"><code class="code">http://example.com/foo# â†’ query = null, fragment = ""</code></li>
      <li class="member"><code class="code">http://example.com/foo?# â†’ query = "",   fragment = ""</code></li>
     </ul>
      Previously all cases resulted in query and fragment being <strong><code>null</code></strong>.
    
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.var-dump.php" class="function">var_dump()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.debug-zval-dump.php" class="function">debug_zval_dump()</a></span> will now print
     floating-point numbers using <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.serialize-precision" class="link">serialize_precision</a>
     rather than <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.precision" class="link">precision</a>. In a default configuration, this
     means that floating-point numbers are now printed with full accuracy by these debugging
     functions.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     If the array returned by <a target="_blank" href="https://www.php.net/manual/en/language.oop5.magic.php#object.sleep" class="link">__sleep()</a> contains non-existing
     properties, these are now silently ignored. Previously, such properties would have been
     serialized as if they had the value <strong><code>null</code></strong>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The default locale on startup is now always <code class="literal">"C"</code>. No locales are inherited from
     the environment by default. Previously, <strong><code>LC_ALL</code></strong> was set to
     <code class="literal">"C"</code>, while <strong><code>LC_CTYPE</code></strong> was inherited from the environment.
     However, some functions did not respect the inherited locale without an explicit
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.setlocale.php" class="function">setlocale()</a></span> call. An explicit <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.setlocale.php" class="function">setlocale()</a></span> call is now
     always required if a locale component should be changed from the default.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The deprecated DES fallback in <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.crypt.php" class="function">crypt()</a></span> has been removed. If an unknown salt
     format is passed to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.crypt.php" class="function">crypt()</a></span>, the function will fail with <code class="literal">*0</code>
     instead of falling back to a weak DES hash now.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Specifying out of range rounds for SHA256/SHA512 <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.crypt.php" class="function">crypt()</a></span> will now fail with
     <code class="literal">*0</code> instead of clamping to the closest limit. This matches glibc behavior.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The result of sorting functions may have changed, if the array contains elements that compare as
     equal.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Any functions accepting callbacks that are not explicitly specified to accept parameters by
     reference will now warn if a callback with reference parameters is used. Examples include
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-filter.php" class="function">array_filter()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-reduce.php" class="function">array_reduce()</a></span>. This was already the
     case for most, but not all, functions previously.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The HTTP stream wrapper as used by functions like <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.file-get-contents.php" class="function">file_get_contents()</a></span>
     now advertises HTTP/1.1 rather than HTTP/1.0 by default. This does not change the behavior of the
     client, but may cause servers to respond differently. To retain the old behavior, set the
     <code class="literal">'protocol_version'</code> stream context option, e.g.
    </p>
    <p class="para">
     </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$ctx </span><span style="color: #007700">= </span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([</span><span style="color: #DD0000">'http' </span><span style="color: #007700">=&gt; [</span><span style="color: #DD0000">'protocol_version' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'1.0'</span><span style="color: #007700">]]);<br>echo </span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.org'</span><span style="color: #007700">, </span><span style="color: #0000BB">false</span><span style="color: #007700">, </span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    
   </li>
   <li class="listitem">
    <p class="para">
     Calling <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.crypt.php" class="function">crypt()</a></span> without an explicit salt is no longer supported. If you would
     like to produce a strong hash with an auto-generated salt, use
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.password-hash.php" class="function">password_hash()</a></span> instead.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.substr.php" class="function">substr()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-substr.php" class="function">mb_substr()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.iconv-substr.php" class="function">iconv_substr()</a></span> and
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.grapheme-substr.php" class="function">grapheme_substr()</a></span> now consistently clamp out-of-bounds offsets to the string
    boundary. Previously, <strong><code>false</code></strong> was returned instead of the empty string in some cases.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     On Windows, the program execution functions (<span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.proc-open.php" class="function">proc_open()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.exec.php" class="function">exec()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.popen.php" class="function">popen()</a></span> etc.) using the shell, now consistently execute <strong class="command">%comspec% /s
     /c "$commandline"</strong>, which has the same effect as executing
     <strong class="command">$commandline</strong> (without additional quotes).
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.sysvsem">
  <h3 class="title">Sysvsem</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The <code class="parameter">auto_release</code> parameter of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.sem-get.php" class="function">sem_get()</a></span> was changed to
     accept bool values rather than int.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.tidy">
  <h3 class="title">Tidy</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     The <code class="parameter">use_include_path</code> parameter, which was not used internally, has been
     removed from <span class="function"><a target="_blank" href="https://www.php.net/manual/en/tidy.repairstring.php" class="function">tidy_repair_string()</a></span>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/tidy.repairstring.php" class="methodname">tidy::repairString()</a></span> and <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/tidy.repairfile.php" class="methodname">tidy::repairFile()</a></span> became
     static methods.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.tokenizer">
  <h3 class="title">Tokenizer</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <code class="literal">T_COMMENT</code> tokens will no longer include a trailing newline. The newline will
     instead be part of a following <code class="literal">T_WHITESPACE</code> token. It should be noted that
     <code class="literal">T_COMMENT</code> is not always followed by whitespace, it may also be followed by
     <code class="literal">T_CLOSE_TAG</code> or end-of-file.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Namespaced names are now represented using the <code class="literal">T_NAME_QUALIFIED</code>
     (<code class="code">Foo\Bar</code>), <code class="literal">T_NAME_FULLY_QUALIFIED</code> (<code class="code">\Foo\Bar</code>) and
     <code class="literal">T_NAME_RELATIVE</code> (<code class="code">namespace\Foo\Bar</code>) tokens.
     <code class="literal">T_NS_SEPARATOR</code> is only used for standalone namespace separators, and only
     syntactially valid in conjunction with group use declarations.
     
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.xmlreader">
  <h3 class="title">XMLReader</h3>

  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/xmlreader.open.php" class="methodname">XMLReader::open()</a></span> and <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/xmlreader.xml.php" class="methodname">XMLReader::xml()</a></span> are now
   static methods. They can still be called as instance methods, but inheriting classes need to declare them
   as static if they override these methods.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.xmlrpc">
  <h3 class="title">XML-RPC</h3>

  <p class="para">
   The XML-RPC extension has been moved to PECL and is no longer part of the PHP
   distribution.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.zip">
  <h3 class="title">Zip</h3>

  <p class="para">
   <strong><code>ZipArchive::OPSYS_Z_CPM</code></strong> has been removed (this name was a typo). Use
   <strong><code>ZipArchive::OPSYS_CPM</code></strong> instead.
  </p>
 </div>

 <div class="sect2" id="migration80.incompatible.zlib">
  <h3 class="title">Zlib</h3>

  <ul class="itemizedlist"><li class="listitem">
    <p class="para">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gzgetss.php" class="function">gzgetss()</a></span> has been removed.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <a target="_blank" href="https://www.php.net/manual/en/zlib.configuration.php#ini.zlib.output-compression" class="link">zlib.output_compression</a> is no longer
     automatically disabled for <code class="literal">Content-Type: image/*</code>.
    </p>
   </li>
  </ul></div>

 <div class="sect2" id="migration80.incompatible.php-test-packs">
  <h3 class="title">Windows PHP Test Packs</h3>

  <p class="para">
   The test runner has been renamed from <var class="filename">run-test.php</var> to
   <var class="filename">run-tests.php</var>, to match its name in php-src.
  </p>
 </div>
</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration74.incompatible.php" target="_blank">PHP 7.4</a></h1>
    </header>

    <div id="migration74.incompatible" class="sect1">
 <h2 class="title">Backward Incompatible Changes</h2>

 <div class="sect2" id="migration74.incompatible.core">
  <h3 class="title">PHP Core</h3>

  <div class="sect3" id="migration74.incompatible.core.non-array-access">
   <h4 class="title">Array-style access of non-arrays</h4>

   <p class="para">
    Trying to use values of type <span class="type">null</span>, <span class="type">bool</span>,
    <span class="type">int</span>, <span class="type">float</span> or <span class="type">resource</span> as an
    array (such as <code class="literal">$null["key"]</code>) will now generate a notice.
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.get-declared-classes">
   <h4 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-declared-classes.php" class="function">get_declared_classes()</a></span> function</h4>

   <p class="para">
    The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-declared-classes.php" class="function">get_declared_classes()</a></span> function no longer
    returns anonymous classes that have not been instantiated yet.
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.fn">
   <h4 class="title"><code class="literal">fn</code> keyword</h4>

   <p class="para">
    <code class="literal">fn</code> is now a reserved keyword. In particular,
    it can no longer be used as a function or class name.
    It can still be used as a method or class constant name.
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.php-tag">
   <h4 class="title"><code class="literal"><?php </code> tag at end of file</code></h4>

   <p class="para">
    <code class="literal"><?php </code> at the end of the file (without trailing newline)
    will now be interpreted as an opening PHP tag. Previously it was interpreted
    either as a short opening tag followed by literal <code class="literal">php</code> and
    resulted in a syntax error (with <code class="literal">short_open_tag=1</code>)
    or was interpreted as a literal <code class="literal"><?php </code> string
    (with <code class="literal">short_open_tag=0</code>).
   </code></code></p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.stream-wrappers">
   <h4 class="title">Stream wrappers</h4>

   <p class="para">
    When using include/require on a stream,
    <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/streamwrapper.stream-set-option.php" class="methodname">streamWrapper::stream_set_option()</a></span>
    will be invoked with the <strong><code>STREAM_OPTION_READ_BUFFER</code></strong> option.
    Custom stream wrapper implementations may need to implement the
    <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/streamwrapper.stream-set-option.php" class="methodname">streamWrapper::stream_set_option()</a></span> method to
    avoid a warning (always returning <strong><code>false</code></strong> is a sufficient implementation).
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.serialization">
   <h4 class="title">Serialization</h4>

   <p class="para">
    The <code class="literal">o</code> serialization format has been removed.
    As it is never produced by PHP, this may only break unserialization of
    manually crafted strings.
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.password-algorithm-constants">
   <h4 class="title">Password algorithm constants</h4>

   <p class="para">
    Password hashing algorithm identifiers are now nullable strings rather
    than integers.
   </p>

   <ul class="itemizedlist"><li class="listitem">
     <span class="simpara">
      <strong><code>PASSWORD_DEFAULT</code></strong> was int 1; now is string '2y' (in PHP 7.4.0, 7.4.1, and 7.4.2 it was <strong><code>null</code></strong>)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <strong><code>PASSWORD_BCRYPT</code></strong> was int 1; now is string '2y'
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <strong><code>PASSWORD_ARGON2I</code></strong> was int 2; now is string 'argon2i'
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <strong><code>PASSWORD_ARGON2ID</code></strong> was int 3; now is string 'argon2id'
     </span>
    </li>
   </ul><p class="para">
    Applications correctly using the constants PASSWORD_DEFAULT,
    PASSWORD_BCRYPT, PASSWORD_ARGON2I, and PASSWORD_ARGON2ID will continue to
    function correctly.
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.htmlentities">
   <h4 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.php" class="function">htmlentities()</a></span> function</h4>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.php" class="function">htmlentities()</a></span> will now raise a notice
    (instead of a strict standards warning) if it is used with
    an encoding for which only basic entity substitution is supported,
    in which case it is equivalent to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars.php" class="function">htmlspecialchars()</a></span>.
   </p>
  </div>

  <div class="sect3" id="migration74.incompatible.core.fread-fwrite">
   <h4 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.fread.php" class="function">fread()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.fwrite.php" class="function">fwrite()</a></span> function</h4>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.fread.php" class="function">fread()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.fwrite.php" class="function">fwrite()</a></span> will now
    return <strong><code>false</code></strong> if the operation failed.
    Previously an empty string or 0 was returned.
    EAGAIN/EWOULDBLOCK are not considered failures.
   </p>
   <p class="para">
    These functions now also raise a notice on failure,
    such as when trying to write to a read-only file resource.
   </p>
  </div>

 </div>

 <div class="sect2" id="migration74.incompatible.bcmath">
  <h3 class="title">BCMath Arbitrary Precision Mathematics</h3>

  <p class="para">
   BCMath functions will now warn if a non well-formed number is passed, such
   as <code class="literal">"32foo"</code>. The argument will be interpreted as zero, as before.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.curl">
  <h3 class="title">CURL</h3>

  <p class="para">
   Attempting to serialize a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlfile.php" class="classname">CURLFile</a></span> class will now
   generate an exception. Previously the exception was only thrown on unserialization.
  </p>
  <p class="para">
   Using <strong><code>CURLPIPE_HTTP1</code></strong> is deprecated, and is no longer
   supported as of cURL 7.62.0.
  </p>
  <p class="para">
   The <code class="literal">$version</code> parameter of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.curl-version.php" class="function">curl_version()</a></span>
   is deprecated. If any value not equal to the default <strong><code>CURLVERSION_NOW</code></strong>
   is passed, a warning is raised and the parameter is ignored.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.datetime">
  <h3 class="title">Date and Time</h3>

  <p class="para">
   Calling <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.var-dump.php" class="function">var_dump()</a></span> or similar on a
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.datetime.php" class="classname">DateTime</a></span> or <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.datetimeimmutable.php" class="classname">DateTimeImmutable</a></span>
   instance will no longer leave behind accessible properties on the object.
  </p>
  <p class="para">
   Comparison of <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.dateinterval.php" class="classname">DateInterval</a></span> objects
   (using <code class="literal">==</code>, <code class="literal">&lt;</code>, and so on) will now generate
   a warning and always return <strong><code>false</code></strong>. Previously all <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.dateinterval.php" class="classname">DateInterval</a></span>
   objects were considered equal, unless they had properties.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.intl">
  <h3 class="title">Intl</h3>

  <p class="para">
   The default parameter value of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.idn-to-ascii.php" class="function">idn_to_ascii()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.idn-to-utf8.php" class="function">idn_to_utf8()</a></span> is now <strong><code>INTL_IDNA_VARIANT_UTS46</code></strong>
   instead of the deprecated <strong><code>INTL_IDNA_VARIANT_2003</code></strong>.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.mysqli">
  <h3 class="title">MySQLi</h3>

  <p class="para">
   The embedded server functionality has been removed. It was broken since
   at least PHP 7.0.
  </p>
  <p class="para">
   The undocumented <code class="literal">mysqli::$stat</code> property has been removed
   in favor of <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/mysqli.stat.php" class="methodname">mysqli::stat()</a></span>.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.openssl">
  <h3 class="title">OpenSSL</h3>

  <p class="para">
   The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.openssl-random-pseudo-bytes.php" class="function">openssl_random_pseudo_bytes()</a></span> function will now
   throw an exception in error situations, similar to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.random-bytes.php" class="function">random_bytes()</a></span>.
   In particular, an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> is thrown if the number of
   requested bytes is less than or equal to zero, and an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.exception.php" class="classname">Exception</a></span>
   is thrown if sufficient randomness cannot be gathered.
   The <code class="literal">$crypto_strong</code> output argument is guaranteed to always
   be <strong><code>true</code></strong> if the function does not throw, so explicitly checking it is not necessary.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.pcre">
  <h3 class="title">Regular Expressions (Perl-Compatible)</h3>

  <p class="para">
   When <strong><code>PREG_UNMATCHED_AS_NULL</code></strong> mode is used, trailing
   unmatched capturing groups will now also be set to <strong><code>null</code></strong> (or
   <code class="literal">[null, -1]</code> if offset capture is enabled).
   This means that the size of the <code class="literal">$matches</code> will always be the same.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.pdo">
  <h3 class="title">PHP Data Objects</h3>

  <p class="para">
   Attempting to serialize a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pdo.php" class="classname">PDO</a></span> or
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pdostatement.php" class="classname">PDOStatement</a></span> instance will now generate
   an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.exception.php" class="classname">Exception</a></span> rather than a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.pdoexception.php" class="classname">PDOException</a></span>,
   consistent with other internal classes which do not support serialization.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.reflection">
  <h3 class="title">Reflection</h3>

  <p class="para">
   Reflection objects will now generate an exception if an attempt is made
   to serialize them. Serialization for reflection objects was never
   supported and resulted in corrupted reflection objects. It has been
   explicitly prohibited now.
  </p>

  <p class="para">
   The values of the class constant of <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.reflectionclassconstant.php" class="classname">ReflectionClassConstant</a></span>,
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.reflectionmethod.php" class="classname">ReflectionMethod</a></span> and <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.reflectionproperty.php" class="classname">ReflectionProperty</a></span>
   have changed.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.spl">
  <h3 class="title">Standard PHP Library (SPL)</h3>

  <p class="para">
   Calling <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-object-vars.php" class="function">get_object_vars()</a></span> on an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayobject.php" class="classname">ArrayObject</a></span>
   instance will now always return the properties of the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayobject.php" class="classname">ArrayObject</a></span>
   itself (or a subclass). Previously it returned the values of the wrapped
   array/object unless the <strong><code>ArrayObject::STD_PROP_LIST</code></strong>
   flag was specified.
  </p>
  <p class="para">
   Other affected operations are:
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <span class="methodname"><strong>ReflectionObject::getProperties()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.reset.php" class="function">reset()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.current.php" class="function">current()</a></span>, etc.
     Use <span class="interfacename"><a target="_blank" href="https://www.php.net/manual/en/class.iterator.php" class="interfacename">Iterator</a></span> methods instead.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Potentially others working on object properties as a list,
     e.g. <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-walk.php" class="function">array_walk()</a></span>.
    </span>
   </li>
  </ul><p class="para">
   <code class="literal">(array)</code> casts are not affected. They will continue to
   return either the wrapped array, or the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayobject.php" class="classname">ArrayObject</a></span>
   properties, depending on whether the <strong><code>ArrayObject::STD_PROP_LIST</code></strong>
   flag is used.
  </p>
  <p class="para">
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/splpriorityqueue.setextractflags.php" class="methodname">SplPriorityQueue::setExtractFlags()</a></span> will throw
   an exception if zero is passed. Previously this would generate a recoverable
   fatal error on the next extraction operation.
  </p>
  <p class="para">
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayobject.php" class="classname">ArrayObject</a></span>, <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayiterator.php" class="classname">ArrayIterator</a></span>,
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.spldoublylinkedlist.php" class="classname">SplDoublyLinkedList</a></span> and <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.splobjectstorage.php" class="classname">SplObjectStorage</a></span>
   now support the <code class="literal">__serialize()</code> and <code class="literal">__unserialize()</code>
   mechanism in addition to the <span class="interfacename"><a target="_blank" href="https://www.php.net/manual/en/class.serializable.php" class="interfacename">Serializable</a></span> interface.
   This means that serialization payloads created on older PHP versions can still be
   unserialized, but new payloads created by PHP 7.4 will not be understood by older versions.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.tokenizer">
  <h3 class="title">Tokenizer</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.token-get-all.php" class="function">token_get_all()</a></span> will now emit a
   <strong><code>T_BAD_CHARACTER</code></strong> token for unexpected
   characters instead of leaving behind holes in the token stream.
  </p>
 </div>

 <div class="sect2" id="migration74.incompatible.cookie-decode">
  <h3 class="title">Incoming Cookies</h3>

  <p class="para">
   As of PHP 7.4.11, the <em>names</em> of incoming cookies are no
   longer url-decoded for security reasons.
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration73.incompatible.php" target="_blank">PHP 7.3</a></h1>
    </header>

    <div id="migration73.incompatible" class="sect1">
 <h2 class="title">Backward Incompatible Changes</h2>

 <div class="sect2" id="migration73.incompatible.core">
  <h3 class="title">PHP Core</h3>

  <div class="sect3" id="migration73.incompatible.core.heredoc-nowdoc">
   <h4 class="title">Heredoc/Nowdoc Ending Label Interpretation</h4>

   <p class="para">
    Due to the introduction of <a target="_blank" href="https://www.php.net/manual/en/migration73.new-features.php#migration73.new-features.core.heredoc" class="link">flexible heredoc/nowdoc
    syntax</a>, doc strings that contain the ending label inside their body
    may cause syntax errors or change in interpretation. For example in:
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$str </span><span style="color: #007700">= &lt;&lt;<foo></foo></span><span style="color: #DD0000">abcdefg<br></span><span style="color: #007700">   FOO<br></span><span style="color: #0000BB">FOO</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
    the indented occurrence of <code class="literal">FOO</code> did not previously have any
    special meaning. Now it will be interpreted as the end of the heredoc string
    and the following <code class="literal">FOO;</code> will cause a syntax error. This issue can
    always be resolved by choosing an ending label that does not occur within the
    contents of the string.
   
  </div>

  <div class="sect3" id="migration73.incompatible.core.continue-targeting-switch">
   <h4 class="title">Continue Targeting Switch issues Warning</h4>

   <p class="para">
    <code class="literal">continue</code> statements targeting <code class="literal">switch</code>
    control flow structures will now generate a warning. In PHP such
    <code class="literal">continue</code> statements are equivalent to
    <code class="literal">break</code>, while they behave as <code class="literal">continue 2</code>
    in other languages.
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">while (</span><span style="color: #0000BB">$foo</span><span style="color: #007700">) {<br>    switch (</span><span style="color: #0000BB">$bar</span><span style="color: #007700">) {<br>      case </span><span style="color: #DD0000">"baz"</span><span style="color: #007700">:<br>         continue;<br></span><span style="color: #FF8000">// Warning: "continue" targeting switch is equivalent to<br>         //          "break". Did you mean to use "continue 2"?<br></span><span style="color: #007700">}<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
   
  </div>

  <div class="sect3" id="migration73.incompatible.core.arrayaccess">
   <h4 class="title">Strict Interpretation of Integer String Keys on ArrayAccess</h4>

   <p class="para">
    Array accesses of type <code class="literal">$obj["123"]</code>, where
    <code class="literal">$obj</code> implements <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arrayaccess.php" class="classname">ArrayAccess</a></span> and
    <code class="literal">"123"</code> is an integer <span class="type">string</span> literal will no
    longer result in an implicit conversion to integer, i.e.,
    <code class="literal">$obj-&gt;offsetGet("123")</code> will be called instead of
    <code class="literal">$obj-&gt;offsetGet(123)</code>. This matches existing behavior for
    non-literals. The behavior of arrays is not affected in any way, they
    continue to implicitly convert integral string keys to integers.
   </p>
  </div>

  <div class="sect3" id="migration73.incompatible.core.static-properties">
   <h4 class="title">Static Properties no longer separated by Reference Assignment</h4>

   <p class="para">
    In PHP, static properties are shared between inheriting classes, unless the
    static property is explicitly overridden in a child class. However, due to an
    implementation artifact it was possible to separate the static properties by
    assigning a reference. This loophole has been fixed.
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Test </span><span style="color: #007700">{<br>    public static </span><span style="color: #0000BB">$x </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>}<br>class </span><span style="color: #0000BB">Test2 </span><span style="color: #007700">extends </span><span style="color: #0000BB">Test </span><span style="color: #007700">{ }<br><br></span><span style="color: #0000BB">Test2</span><span style="color: #007700">::</span><span style="color: #0000BB">$x </span><span style="color: #007700">= &amp;</span><span style="color: #0000BB">$x</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$x </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">Test</span><span style="color: #007700">::</span><span style="color: #0000BB">$x</span><span style="color: #007700">, </span><span style="color: #0000BB">Test2</span><span style="color: #007700">::</span><span style="color: #0000BB">$x</span><span style="color: #007700">);<br></span><span style="color: #FF8000">// Previously: int(0), int(1)<br>// Now:        int(1), int(1)<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
   
  </div>

  <div class="sect3" id="migration73.incompatible.core.reference-unwrapping">
   <h4 class="title">References returned by Array and Property Accesses are immediately unwrapped</h4>

   <p class="para">
    References returned by array and property accesses are now unwrapped as part
    of the access. This means that it is no longer possible to modify the
    reference between the access and the use of the accessed value:
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$arr </span><span style="color: #007700">= [</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br></span><span style="color: #0000BB">$ref </span><span style="color: #007700">=&amp; </span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] + (</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] = </span><span style="color: #0000BB">2</span><span style="color: #007700">));<br></span><span style="color: #FF8000">// Previously: int(4), Now: int(3)<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
    This makes the behavior of references and non-references consistent. Please
    note that reading and writing a value inside a single expression remains
    undefined behavior and may change again in the future.
   
  </div>

  <div class="sect3" id="migration73.incompatible.core.traversable-unpacking">
   <h4 class="title">Argument Unpacking of Traversables with non-Integer Keys no longer supported</h4>

   <p class="para">
    Argument unpacking stopped working with <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.traversable.php" class="classname">Traversable</a></span>s
    with non-integer keys. The following code worked in PHP 5.6-7.2 by accident.
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(...</span><span style="color: #0000BB">$args</span><span style="color: #007700">) {<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$args</span><span style="color: #007700">);<br>}<br>function </span><span style="color: #0000BB">gen</span><span style="color: #007700">() {<br>    yield </span><span style="color: #0000BB">1.23 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">123</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(...</span><span style="color: #0000BB">gen</span><span style="color: #007700">());<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
   
  </div>

  <div class="sect3" id="migration73.incompatible.core.misc">
   <h4 class="title">Miscellaneous</h4>

   <p class="para">
    The <var class="filename">ext_skel</var> utility has been completely redesigned with
    new options and some old options removed. This is now written in PHP and has
    no external dependencies.
   </p>

   <p class="para">
    Support for BeOS has been dropped.
   </p>

   <p class="para">
    Exceptions thrown due to automatic conversion of warnings into exceptions in
    <code class="literal">EH_THROW</code> mode (e.g. some <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.datetime.php" class="classname">DateTime</a></span>
    exceptions) no longer populate <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.error-get-last.php" class="function">error_get_last()</a></span> state. As
    such, they now work the same way as manually thrown exceptions.
   </p>

   <p class="para">
    <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.typeerror.php" class="classname">TypeError</a></span> now reports wrong types as
    <code class="literal">int</code> and <code class="literal">bool</code> instead of
    <code class="literal">integer</code> and <code class="literal">boolean</code>, respectively.
   </p>

   <p class="para">
    Undefined variables passed to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.compact.php" class="function">compact()</a></span> will now be
    reported as a notice.
   </p>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.getimagesize.php" class="function">getimagesize()</a></span> and related functions now report the mime
    type of BMP images as <code class="literal">image/bmp</code> instead of
    <code class="literal">image/x-ms-bmp</code>, since the former has been registered with
    the IANA (see <a target="_blank" href="https://www.php.net/manual/en/http://www.faqs.org/rfcs/rfc7903" class="link external">Â»Â RFC 7903</a>).
   </p>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stream-socket-get-name.php" class="function">stream_socket_get_name()</a></span> will now return IPv6 addresses
    wrapped in brackets. For example <code class="literal">"[::1]:1337"</code> will be
    returned instead of <code class="literal">"::1:1337"</code>.
   </p>
  </div>
 </div>

 <div class="sect2" id="migration73.incompatible.bc">
  <h3 class="title">BCMath Arbitrary Precision Mathematics</h3>

  <p class="para">
   All warnings thrown by <a target="_blank" href="https://www.php.net/manual/en/ref.bc.php" class="link">BCMath functions</a> are
   now using PHP's error handling. Formerly some warnings have directly been
   written to stderr.
  </p>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.bcmul.php" class="function">bcmul()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.bcpow.php" class="function">bcpow()</a></span> now return numbers
   with the requested scale. Formerly, the returned numbers may have omitted
   trailing decimal zeroes.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.imap">
  <h3 class="title">IMAP, POP3 and NNTP</h3>

  <p class="para">
   <strong class="command">rsh</strong>/<strong class="command">ssh</strong> logins are disabled by default.
   Use <a target="_blank" href="https://www.php.net/manual/en/imap.configuration.php#ini.imap.enable-insecure-rsh" class="link">imap.enable_insecure_rsh</a> if you
   want to enable them. Note that the IMAP library does not filter mailbox names
   before passing them to the <strong class="command">rsh</strong>/<strong class="command">ssh</strong>
   command, thus passing untrusted data to this function with
   <strong class="command">rsh</strong>/<strong class="command">ssh</strong> enabled is insecure.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.mbstring">
  <h3 class="title">Multibyte String</h3>

  <p class="para">
    Due to added support for named captures, <code class="literal">mb_ereg_*()</code>
    patterns using named captures will behave differently. In particular named
    captures will be part of matches and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg-replace.php" class="function">mb_ereg_replace()</a></span>
    will interpret additional syntax. See <a target="_blank" href="https://www.php.net/manual/en/migration73.new-features.php#migration73.new-features.mbstring.named-captures" class="link">Named
    Captures</a> for more information.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.mysqli">
  <h3 class="title">MySQL Improved Extension</h3>

  <p class="para">
   Prepared statements now properly report the fractional seconds for
   <code class="literal">DATETIME</code>, <code class="literal">TIME</code> and
   <code class="literal">TIMESTAMP</code> columns with decimals specifier (e.g.
   <code class="literal">TIMESTAMP(6)</code> when using microseconds). Formerly, the
   fractional seconds part was simply omitted from the returned values.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.pdo-mysql">
  <h3 class="title">MySQL Functions (PDO_MYSQL)</h3>

  <p class="para">
   Prepared statements now properly report the fractional seconds for
   <code class="literal">DATETIME</code>, <code class="literal">TIME</code> and
   <code class="literal">TIMESTAMP</code> columns with decimals specifier (e.g.
   <code class="literal">TIMESTAMP(6)</code> when using microseconds). Formerly, the
   fractional seconds part was simply omitted from the returned values. Please
   note that this only affects the usage of <a target="_blank" href="https://www.php.net/manual/en/ref.pdo-mysql.php" class="link">PDO_MYSQL</a> with emulated prepares turned off
   (e.g. using the native preparation functionality). Statements using
   connections having <strong><code>PDO::ATTR_EMULATE_PREPARES</code></strong>=<strong><code>true</code></strong>
   (which is the default) were not affected by the bug fixed and have already
   been getting the proper fractional seconds values from the engine.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.reflection">
  <h3 class="title">Reflection</h3>

  <p class="para">
   <a target="_blank" href="https://www.php.net/manual/en/book.reflection.php" class="link">Reflection</a> export to string now uses
   <code class="literal">int</code> and <code class="literal">bool</code> instead of
   <code class="literal">integer</code> and <code class="literal">boolean</code>, respectively.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.spl">
  <h3 class="title">Standard PHP Library (SPL)</h3>

  <p class="para">
   If an <a target="_blank" href="https://www.php.net/manual/en/book.spl.php" class="link">SPL</a> autoloader throws an exception,
   following autoloaders will not be executed. Previously all autoloaders were
   executed and exceptions were chained.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.simplexml">
  <h3 class="title">SimpleXML</h3>

  <p class="para">
   Mathematic operations involving <a target="_blank" href="https://www.php.net/manual/en/book.simplexml.php" class="link">SimpleXML</a> objects will now treat the text as
   an <span class="type">int</span> or <span class="type">float</span>, whichever is more appropriate.
   Previously values were treated as <span class="type">int</span>s unconditionally.
  </p>
 </div>

 <div class="sect2" id="migration73.incompatible.cookie-decode">
  <h3 class="title">Incoming Cookies</h3>

  <p class="para">
   As of PHP 7.3.23, the <em>names</em> of incoming cookies are no
   longer url-decoded for security reasons.
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration72.incompatible.php" target="_blank">PHP 7.2</a></h1>
    </header>

    <div id="migration72.incompatible" class="sect1">
 <h2 class="title">Backward incompatible changes</h2>

 <div class="sect2" id="migration72.incompatible.number_format-no-neg-zero">
  <h3 class="title">Prevent <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.number-format.php" class="function">number_format()</a></span> from returning negative zero</h3>

  <p class="para">
   Previously, it was possible for the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.number-format.php" class="function">number_format()</a></span>
   function to return <code class="literal">-0</code>. Whilst this is perfectly valid
   according to the IEEE 754 floating point specification, this oddity was not
   desirable for displaying formatted numbers in a human-readable form.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /><br>var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">number_format</span><span style="color: #007700">(-</span><span style="color: #0000BB">0.01</span><span style="color: #007700">)); </span><span style="color: #FF8000">// now outputs string(1) "0" instead of string(2) "-0"</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.incompatible.object-array-casts">
  <h3 class="title">Convert numeric keys in object and array casts</h3>

  <p class="para">
   Numeric keys are now better handled when casting arrays to objects and
   objects to arrays (either from explicit casting or by
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.settype.php" class="function">settype()</a></span>).
  </p>

  <p class="para">
   This means that integer (or stringy integer) keys from arrays being casted
   to objects are now accessible:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /><br></span><span style="color: #FF8000">// array to object<br></span><span style="color: #0000BB">$arr </span><span style="color: #007700">= [</span><span style="color: #0000BB">0 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">];<br></span><span style="color: #0000BB">$obj </span><span style="color: #007700">= (object)</span><span style="color: #0000BB">$arr</span><span style="color: #007700">;<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br></span><span style="color: #0000BB">$obj</span><span style="color: #007700">,<br></span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;{</span><span style="color: #DD0000">'0'</span><span style="color: #007700">}, </span><span style="color: #FF8000">// now accessible<br></span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">0</span><span style="color: #007700">} </span><span style="color: #FF8000">// now accessible<br></span><span style="color: #007700">);</span></span></code></div>
   </div>

   <p class="para">The above example will output:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
object(stdClass)#1 (1) {
  ["0"]=&gt;    // string key now, rather than integer key
  int(1)
}
int(1)
int(1)
</pre></div>
   </div>
  </div>

  <p class="para">
   And integer (or stringy integer) keys from objects being casted to arrays
   are now accessible:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /><br></span><span style="color: #FF8000">// object to array<br></span><span style="color: #0000BB">$obj </span><span style="color: #007700">= new class {<br>    public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">()<br>    {<br></span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">0</span><span style="color: #007700">} = </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>    }<br>};<br></span><span style="color: #0000BB">$arr </span><span style="color: #007700">= (array)</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br></span><span style="color: #0000BB">$arr</span><span style="color: #007700">,<br></span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">], </span><span style="color: #FF8000">// now accessible<br></span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'0'</span><span style="color: #007700">] </span><span style="color: #FF8000">// now accessible<br></span><span style="color: #007700">);</span></span></code></div>
   </div>

   <p class="para">The above example will output:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(1) {
  [0]=&gt;    // integer key now, rather than string key
  int(1)
}
int(1)
int(1)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration72.incompatible.no-null-to-get_class">
  <h3 class="title">Disallow passing <strong><code>null</code></strong> to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-class.php" class="function">get_class()</a></span></h3>

  <p class="para">
   Previously, passing <strong><code>null</code></strong> to the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-class.php" class="function">get_class()</a></span> function
   would output the name of the enclosing class. This behaviour has now been
   removed, where an <strong><code>E_WARNING</code></strong> will be output instead. To
   achieve the same behaviour as before, the argument should simply be omitted.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.warn-on-non-countable-types">
  <h3 class="title">Warn when counting non-countable types</h3>

  <p class="para">
   An <strong><code>E_WARNING</code></strong> will now be emitted when attempting to
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.count.php" class="function">count()</a></span> non-countable types (this includes the
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.sizeof.php" class="function">sizeof()</a></span> alias function).
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /><br>var_dump</span><span style="color: #007700">(<br></span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">), </span><span style="color: #FF8000">// NULL is not countable<br></span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">), </span><span style="color: #FF8000">// integers are not countable<br></span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">), </span><span style="color: #FF8000">// strings are not countable<br></span><span style="color: #0000BB">count</span><span style="color: #007700">(new </span><span style="color: #0000BB">stdClass</span><span style="color: #007700">), </span><span style="color: #FF8000">// objects not implementing the Countable interface are not countable<br></span><span style="color: #0000BB">count</span><span style="color: #007700">([</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">]) </span><span style="color: #FF8000">// arrays are countable<br></span><span style="color: #007700">);</span></span></code></div>
   </div>

   <p class="para">The above example will output:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d

Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d

Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d

Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d
int(0)
int(1)
int(1)
int(1)
int(2)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration72.incompatible.hash-ext-to-objects">
  <h3 class="title">Move ext/hash from resources to objects</h3>

  <p class="para">
   As part of the long-term migration away from resources, the <a target="_blank" href="https://www.php.net/manual/en/book.hash.php" class="link">Hash</a>
   extension has been updated to use objects instead of resources. The change should be
   seamless for PHP developers, except for where
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-resource.php" class="function">is_resource()</a></span> checks have been made (which will need
   updating to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-object.php" class="function">is_object()</a></span> instead).
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.ssl-tls-defaults">
  <h3 class="title">Improve SSL/TLS defaults</h3>

  <p class="para">
   The following changes to the defaults have been made:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <code class="literal">tls://</code> now defaults to TLSv1.0 or TLSv1.1 or TLSv1.2
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="literal">ssl://</code> an alias of <code class="literal">tls://</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="literal">STREAM_CRYPTO_METHOD_TLS_*</code> constants default to TLSv1.0
     or TLSv1.1 + TLSv1.2, instead of TLSv1.0 only
    </span>
   </li>
  </ul></div>

 <div class="sect2" id="migration72.incompatible.gettype-on-closed-resource">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gettype.php" class="function">gettype()</a></span> return value on closed resources</h3>

  <p class="para">
   Previously, using <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.gettype.php" class="function">gettype()</a></span> on a closed resource would
   return a string of <code class="literal">"unknown type"</code>. Now, a string of
   <code class="literal">"resource (closed)"</code> will be returned.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.is_object-on-incomplete_class">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-object.php" class="function">is_object()</a></span> and <span class="classname"><strong class="classname">__PHP_Incomplete_Class</strong></span></h3>

  <p class="para">
   Previously, using <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-object.php" class="function">is_object()</a></span> on the
   <span class="classname"><strong class="classname">__PHP_Incomplete_Class</strong></span> class would return <strong><code>false</code></strong>.
   Now, <strong><code>true</code></strong> will be returned.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.undefined-constants">
  <h3 class="title">Promote the error level of undefined constants</h3>

  <p class="para">
   Unqualified references to undefined constants will now generate an
   <strong><code>E_WARNING</code></strong> (instead of an <strong><code>E_NOTICE</code></strong>).
   In the next major version of PHP, they will generate
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exceptions.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.windows-support">
  <h3 class="title">Windows support</h3>

  <p class="para">
   The officially supported, minimum Windows versions are now Windows 7/Server
   2008 R2.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.trait-properties">
  <h3 class="title">Checks on default property values of traits</h3>

  <p class="para">
   Compatibility checks upon default trait property values will no longer
   perform casting.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.object-reserved-word">
  <h3 class="title"><code class="literal">object</code> for class names</h3>

  <p class="para">
   The <code class="literal">object</code> name was previously soft-reserved in PHP 7.0.
   This is now hard-reserved, prohibiting it from being used as a class, trait,
   or interface name.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.netware-support">
  <h3 class="title">NetWare support</h3>

  <p class="para">
   Support for NetWare has now been removed.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.array-unique">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-unique.php" class="function">array_unique()</a></span> with <strong><code>SORT_STRING</code></strong></h3>

  <p class="para">
   While <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-unique.php" class="function">array_unique()</a></span> with <strong><code>SORT_STRING</code></strong>
   formerly copied the array and removed non-unique elements (without packing
   the array afterwards), now a new array is built by adding the
   unique elements. This can result in different numeric indexes.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.bcmod-and-floats">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.bcmod.php" class="function">bcmod()</a></span> changes with floats</h3>

  <p class="para">
   The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.bcmod.php" class="function">bcmod()</a></span> function no longer truncates fractional
   numbers to integers. As such, its behavior now follows
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.fmod.php" class="function">fmod()</a></span>, rather than the <code class="literal">%</code> operator.
   For example <code class="literal">bcmod('4', '3.5')</code> now returns
   <code class="literal">0.5</code> instead of <code class="literal">1</code>.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.hash-functions">
  <h3 class="title">Hashing functions and non-cryptographic hashes</h3>

  <p class="para">
   The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.hash-hmac.php" class="function">hash_hmac()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.hash-hmac-file.php" class="function">hash_hmac_file()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.hash-pbkdf2.php" class="function">hash_pbkdf2()</a></span>, and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.hash-init.php" class="function">hash_init()</a></span> (with
   <strong><code>HASH_HMAC</code></strong>) functions no longer accept non-cryptographic
   hashes.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.json_decode-changes">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-decode.php" class="function">json_decode()</a></span> function options</h3>

  <p class="para">
   The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-decode.php" class="function">json_decode()</a></span> function option,
   <strong><code>JSON_OBJECT_AS_ARRAY</code></strong>, is now used if the second
   parameter (assoc) is <strong><code>null</code></strong>. Previously,
   <strong><code>JSON_OBJECT_AS_ARRAY</code></strong> was always ignored.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.rand-mt_rand-output">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.rand.php" class="function">rand()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> output</h3>

  <p class="para">
   Sequences generated by <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.rand.php" class="function">rand()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> for a specific seed may differ from PHP 7.1 on
   64-bit machines (due to the fixing of a modulo bias bug in the
   implementation).
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.sqlsafe_mode-ini-setting">
  <h3 class="title">Removal of <a target="_blank" href="https://www.php.net/manual/en/ini.core.php#ini.sql.safe-mode" class="link"><code class="parameter">sql.safe_mode</code></a> ini setting</h3>

  <p class="para">
   The <code class="parameter">sql.safe_mode</code> ini setting has now been removed.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.date_parse_from_format">
  <h3 class="title">Changes to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.date-parse.php" class="function">date_parse()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.date-parse-from-format.php" class="function">date_parse_from_format()</a></span></h3>

  <p class="para">
   The <code class="literal">zone</code> element of the array returned by <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.date-parse.php" class="function">date_parse()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.date-parse-from-format.php" class="function">date_parse_from_format()</a></span> represents seconds instead of
   minutes now, and its sign is inverted. For instance <code class="literal">-120</code>
   is now <code class="literal">7200</code>.
  </p>
 </div>

 <div class="sect2" id="migration72.incompatible.cookie-decode">
  <h3 class="title">Incoming Cookies</h3>

  <p class="para">
   As of PHP 7.2.34, the <em>names</em> of incoming cookies are no
   longer url-decoded for security reasons.
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration71.incompatible.php" target="_blank">PHP 7.1</a></h1>
    </header>

    <div id="migration71.incompatible" class="sect1">
 <h2 class="title">Backward incompatible changes</h2>

 <div class="sect2" id="migration71.incompatible.too-few-arguments-exception">
  <h3 class="title">Throw on passing too few function arguments</h3>

  <p class="para">
   Previously, a warning would be emitted for invoking user-defined functions
   with too few arguments. Now, this warning has been promoted to an Error
   exception. This change only applies to user-defined functions, not internal
   functions. For example:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$param</span><span style="color: #007700">){}<br></span><span style="color: #0000BB">test</span><span style="color: #007700">();</span></span></code></div>
   </div>

   <p class="para">The above example will output
something similar to:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Uncaught ArgumentCountError: Too few arguments to function test(), 0 passed in %s on line %d and exactly 1 expected in %s:%d
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration71.incompatible.forbid-dynamic-calls-to-scope-introspection-functions">
  <h3 class="title">Forbid dynamic calls to scope introspection functions</h3>

  <p class="para">
   Dynamic calls for certain functions have been forbidden (in the form of
   <code class="literal">$func()</code> or <code class="literal">array_map('extract', ...)</code>,
   etc). These functions either inspect or modify another scope, and present
   with them ambiguous and unreliable behavior. The functions are as follows:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.assert.php" class="function">assert()</a></span> - with a string as the first argument
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.compact.php" class="function">compact()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.extract.php" class="function">extract()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-get-args.php" class="function">func_get_args()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-get-arg.php" class="function">func_get_arg()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-num-args.php" class="function">func_num_args()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-defined-vars.php" class="function">get_defined_vars()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-parse-str.php" class="function">mb_parse_str()</a></span> - with one arg
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.parse-str.php" class="function">parse_str()</a></span> - with one arg
    </span>
   </li>
  </ul><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">(function () {<br></span><span style="color: #0000BB">$func </span><span style="color: #007700">= </span><span style="color: #DD0000">'func_num_args'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$func</span><span style="color: #007700">();<br>})();</span></span></code></div>
   </div>

   <p class="para">The above example will output:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Warning: Cannot call func_num_args() dynamically in %s on line %d
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration71.incompatible.invalid-class-names">
  <h3 class="title">Invalid class, interface, and trait names</h3>

  <p class="para">
   The following names cannot be used to name classes, interfaces, or traits:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara"><span class="type"><span class="type void">void</span></span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type"><a target="_blank" href="https://www.php.net/manual/en/language.types.iterable.php" class="type iterable">iterable</a></span></span>
   </li>
  </ul></div>

 <div class="sect2" id="migration71.incompatible.numerical-strings-scientific-notation">
  <h3 class="title">Numerical string conversions now respect scientific notation</h3>

  <p class="para">
   Integer operations and conversions on numerical strings now respect
   scientific notation. This also includes the <code class="literal">(int)</code> cast
   operation, and the following functions: <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.intval.php" class="function">intval()</a></span> (where
   the base is 10), <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.settype.php" class="function">settype()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.decbin.php" class="function">decbin()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.decoct.php" class="function">decoct()</a></span>, and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.dechex.php" class="function">dechex()</a></span>.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.fixes-to-mt_rand-algorithm">
  <h3 class="title">Fixes to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> algorithm</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> will now default to using the fixed version of
   the Mersenne Twister algorithm. If deterministic output from
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> was relied upon, then
   <strong><code>MT_RAND_PHP</code></strong> can be used as optional second parameter
   to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-srand.php" class="function">mt_srand()</a></span> to preserve the old (incorrect)
   implementation.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.rand-srand-aliases">
  <h3 class="title">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.rand.php" class="function">rand()</a></span> aliased to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.srand.php" class="function">srand()</a></span> aliased to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-srand.php" class="function">mt_srand()</a></span>
  </h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.rand.php" class="function">rand()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.srand.php" class="function">srand()</a></span> have now been made
   aliases to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-rand.php" class="function">mt_rand()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mt-srand.php" class="function">mt_srand()</a></span>,
   respectively. This means that the output for the following functions have
   changed: <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.rand.php" class="function">rand()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.shuffle.php" class="function">shuffle()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.str-shuffle.php" class="function">str_shuffle()</a></span>, and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-rand.php" class="function">array_rand()</a></span>.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.delete-control-character-in-identifiers">
  <h3 class="title">Disallow the ASCII delete control character in identifiers</h3>

  <p class="para">
   The ASCII delete control character (<code class="literal">0x7F</code>) can no longer
   be used in identifiers that are not quoted.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.error_log-syslog">
  <h3 class="title">
   <code class="parameter">error_log</code> changes with <code class="literal">syslog</code>
   value
  </h3>

  <p class="para">
   If the <code class="parameter">error_log</code> ini setting is set to
   <code class="literal">syslog</code>, the PHP error levels are mapped to the syslog
   error levels. This brings finer differentiation in the error logs in
   contrary to the previous approach where all the errors are logged with the
   notice level only.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.dont-call-destructors">
  <h3 class="title">Do not call destructors on incomplete objects</h3>

  <p class="para">
   Destructors are now never called for objects that throw an exception during
   the execution of their constructor. In previous versions this behavior
   depended on whether the object was referenced outside the constructor (e.g.
   by an exception backtrace).
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.call_user_func-with-ref-args">
  <h3 class="title">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func.php" class="function">call_user_func()</a></span> handling of reference arguments
  </h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func.php" class="function">call_user_func()</a></span> will now always generate a warning
   upon calls to functions that expect references as arguments. Previously
   this depended on whether the call was fully qualified.
  </p>
  <p class="para">
   Additionally, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func.php" class="function">call_user_func()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func-array.php" class="function">call_user_func_array()</a></span> will no longer abort the function
   call in this case. The "expected reference" warning will be emitted, but the
   call will proceed as usual.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.empty-string-index-operator">
  <h3 class="title">
   The empty index operator is not supported for strings anymore
  </h3>

  <p class="para">
   Applying the empty index operator to a string (e.g. <code class="literal">$str[] = $x</code>)
   throws a fatal error instead of converting silently to array.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.empty-string-modifcation-by-character">
  <h3 class="title">Assignment via string index access on an empty string</h3>
  <p class="para">
   String modification by character on an empty string now works like for non-empty
   strings, i.e. writing to an out of range offset pads the string with spaces,
   where non-integer types are converted to integer, and only the first character of
   the assigned string is used. Formerly, empty strings where silently treated like
   an empty array.
   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$a </span><span style="color: #007700">= </span><span style="color: #DD0000">''</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">10</span><span style="color: #007700">] = </span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <p class="para">Output of the above example in PHP 7.0:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(1) {
  [10]=&gt;
  string(3) "foo"
}
</pre></div>
    </div>
    <p class="para">Output of the above example in PHP 7.1:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(11) "          f"
</pre></div>
    </div>
   </div>
  
 </div>

 <div class="sect2" id="migration71.incompatible.removed-ini-directives">
  <h3 class="title">Removed ini directives</h3>

  <p class="para">
   The following ini directives have been removed:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <code class="parameter">session.entropy_file</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="parameter">session.entropy_length</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="parameter">session.hash_function</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="parameter">session.hash_bits_per_character</code>
    </span>
   </li>
  </ul></div>

 <div class="sect2" id="migration71.incompatible.array-order">
  <h3 class="title">
   Array ordering when elements are automatically created during by reference
   assignments has changed
  </h3>

  <p class="para">
   The order of the elements in an array has changed when those elements have
   been automatically created by referencing them in a by reference
   assignment. For example:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$array </span><span style="color: #007700">= [];<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"a"</span><span style="color: #007700">] =&amp; </span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"b"</span><span style="color: #007700">];<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"b"</span><span style="color: #007700">] = </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 7.0:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  ["a"]=&gt;
  &amp;int(1)
  ["b"]=&gt;
  &amp;int(1)
}
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7.1:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  ["b"]=&gt;
  &amp;int(1)
  ["a"]=&gt;
  &amp;int(1)
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration71.incompatible.sort-order">
  <h3 class="title">Sort order of equal elements</h3>
  <p class="para">
   The internal sorting algorithm has been improved, what may result in
   different sort order of elements, which compare as equal, than before.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Don't rely on the order of elements which compare as equal; it might change
    anytime.
   </p>
  </blockquote>
 </div>

 <div class="sect2" id="migration71.incompatible.e-recoverable">
  <h3 class="title">Error message for E_RECOVERABLE errors</h3>
  <p class="para">
   The error message for E_RECOVERABLE errors has been changed from "Catchable
   fatal error" to "Recoverable fatal error".
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.unserialize">
  <h3 class="title">$options parameter of unserialize()</h3>
  <p class="para">
   The <code class="literal">allowed_classes</code> element of the $options parameter of
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unserialize.php" class="function">unserialize()</a></span> is now strictly typed, i.e. if anything
   other than an <span class="type">array</span> or a <span class="type">bool</span> is given,
   unserialize() returns <strong><code>false</code></strong> and issues an <strong><code>E_WARNING</code></strong>.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.datetime-microseconds">
  <h3 class="title">DateTime constructor incorporates microseconds</h3>
  <p class="para">
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.datetime.php" class="classname">DateTime</a></span> and <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.datetimeimmutable.php" class="classname">DateTimeImmutable</a></span>
   now properly incorporate microseconds when constructed from the current time,
   either explicitly or with a relative string (e.g. <code class="literal">"first day of next
   month"</code>). This means that naive comparisons of two newly created
   instances will now more likely return <strong><code>false</code></strong> instead of <strong><code>true</code></strong>:
   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">new </span><span style="color: #0000BB">DateTime</span><span style="color: #007700">() == new </span><span style="color: #0000BB">DateTime</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  
 </div>

 <div class="sect2" id="migration71.incompatible.fatal-errors-to-error-exceptions">
  <h3 class="title">Fatal errors to <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exceptions conversions</h3>
  <p class="para">
   In the Date extension, invalid serialization data for
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.datetime.php" class="classname">DateTime</a></span> or <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.dateperiod.php" class="classname">DatePeriod</a></span> classes,
   or timezone initialization failure from serialized data, will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception from the
   <span class="methodname"><strong>__wakeup()</strong></span> or <span class="methodname"><strong>__set_state()</strong></span>
   methods, instead of resulting in a fatal error.
  </p>

  <p class="para">
   In the DBA extension, data modification functions (such as
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.dba-insert.php" class="function">dba_insert()</a></span>) will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of triggering a catchable
   fatal error if the key does not contain exactly two elements.
  </p>

  <p class="para">
   In the DOM extension, invalid schema or RelaxNG validation contexts will now
   throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in a
   fatal error. Similarly, attempting to register a node class that does not
   extend the appropriate base class, or attempting to read an invalid property
   or write to a readonly property, will also now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception.
  </p>

  <p class="para">
   In the IMAP extension, email addresses longer than 16385 bytes will throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in a fatal error.
  </p>

  <p class="para">
   In the Intl extension, failing to call the parent constructor in a class
   extending <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.collator.php" class="classname">Collator</a></span> before invoking the parent methods
   will now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> instead of resulting in a
   recoverable fatal error. Also, cloning a
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.transliterator.php" class="classname">Transliterator</a></span> object will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception on failure to clone the internal
   transliterator instead of resulting in a fatal error.
  </p>

  <p class="para">
   In the LDAP extension, providing an unknown modification type to
   <span class="function"><strong>ldap_batch_modify()</strong></span> will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in a fatal error.
  </p>

  <p class="para">
   In the mbstring extension, the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg.php" class="function">mb_ereg()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-eregi.php" class="function">mb_eregi()</a></span> functions will now throw a
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.parseerror.php" class="classname">ParseError</a></span> exception if an invalid PHP expression is
   provided and the 'e' option is used.
  </p>

  <p class="para">
   In the Mcrypt extension, the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-encrypt.php" class="function">mcrypt_encrypt()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-decrypt.php" class="function">mcrypt_decrypt()</a></span> will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in a fatal error
   if mcrypt cannot be initialized.
  </p>

  <p class="para">
   In the mysqli extension, attempting to read an invalid property or write to
   a readonly property will now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception
   instead of resulting in a fatal error.
  </p>

  <p class="para">
   In the Reflection extension, failing to retrieve a reflection object or
   retrieve an object property will now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span>
   exception instead of resulting in a fatal error.
  </p>

  <p class="para">
   In the Session extension, custom session handlers that do not return strings
   for session IDs will now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception
   instead of resulting in a fatal error when a function is called that must
   generate a session ID.
  </p>

  <p class="para">
   In the SimpleXML extension, creating an unnamed or duplicate attribute will
   now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in
   a fatal error.
  </p>

  <p class="para">
   In the SPL extension, attempting to clone an
   <span class="classname"><strong class="classname">SplDirectory</strong></span> object will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in a fatal
   error. Similarly, calling <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/arrayiterator.append.php" class="methodname">ArrayIterator::append()</a></span> when
   iterating over an object will also now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span>
   exception.
  </p>

  <p class="para">
   In the standard extension, the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.assert.php" class="function">assert()</a></span> function, when
   provided with a string argument as its first parameter, will now throw a
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.parseerror.php" class="classname">ParseError</a></span> exception instead of resulting in a
   catchable fatal error if the PHP code is invalid. Similarly, calling
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.forward-static-call.php" class="function">forward_static_call()</a></span> outside of a class scope will now
   throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception.
  </p>

  <p class="para">
   In the Tidy extension, creating a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.tidynode.php" class="classname">tidyNode</a></span> manually
   will now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of
   resulting in a fatal error.
  </p>

  <p class="para">
   In the WDDX extension, a circular reference when serializing will now throw
   an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of resulting in a fatal
   error.
  </p>

  <p class="para">
   In the XML-RPC extension, a circular reference when serializing will now
   throw an instance of <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of
   resulting in a fatal error.
  </p>

  <p class="para">
   In the Zip extension, the <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/ziparchive.addglob.php" class="methodname">ZipArchive::addGlob()</a></span>
   method will now throw an <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exception instead of
   resulting in a fatal error if glob support is not available.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.lexical-names">
  <h3 class="title">Lexically bound variables cannot reuse names</h3>

  <p class="para">
   Variables bound to a <a target="_blank" href="https://www.php.net/manual/en/functions.anonymous.php" class="link">closure</a> via
   the <code class="literal">use</code> construct cannot use the same name as any
   <a target="_blank" href="https://www.php.net/manual/en/language.variables.predefined.php" class="link">superglobals</a>, <var class="varname">$this</var>, or any parameter. For
   example, all of these function definition will result in a fatal error:

   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$f </span><span style="color: #007700">= function () use (</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">) {};<br></span><span style="color: #0000BB">$f </span><span style="color: #007700">= function () use (</span><span style="color: #0000BB">$this</span><span style="color: #007700">) {};<br></span><span style="color: #0000BB">$f </span><span style="color: #007700">= function (</span><span style="color: #0000BB">$param</span><span style="color: #007700">) use (</span><span style="color: #0000BB">$param</span><span style="color: #007700">) {};</span></span></code></div>
    </div>

   </div>
  
 </div>

 <div class="sect2" id="migration71.incompatible.long2ip">
  <h3 class="title">long2ip() parameter type change</h3>
  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.long2ip.php" class="function">long2ip()</a></span> now expects an <span class="type">int</span> instead of a
   <span class="type">string</span>.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.json">
  <h3 class="title">JSON encoding and decoding</h3>
  <p class="para">
   The <code class="parameter">serialize_precision</code> ini setting now controls the
   serialization precision when encoding <span class="type">float</span>s.
  </p>
  <p class="para">
   Decoding an empty key now results in an empty property name, rather than 
   <code class="literal">_empty_</code> as a property name.

   </p><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">json_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">([</span><span style="color: #DD0000">'' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">])));</span></span></code></div>
   </div>

   <p class="para">The above example will output
something similar to:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
object(stdClass)#1 (1) {
  [""]=&gt;
  int(1)
}
</pre></div>
   </div>
  </div>
  
  <p class="para">
   When supplying the <strong><code>JSON_UNESCAPED_UNICODE</code></strong> flag to
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-encode.php" class="function">json_encode()</a></span>, the sequences U+2028 and U+2029 are now
   escaped.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.mbstring">
  <h3 class="title">
   Changes to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg.php" class="function">mb_ereg()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-eregi.php" class="function">mb_eregi()</a></span>
   parameter semantics
  </h3>
  <p class="para">
   The third parameter to the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-ereg.php" class="function">mb_ereg()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mb-eregi.php" class="function">mb_eregi()</a></span> functions (<code class="parameter">regs</code>) will now be
   set to an empty array if nothing was matched. Formerly, the parameter would
   not have been modified.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.openssl">
  <h3 class="title">Drop support for the sslv2 stream</h3>
  <p class="para">
   The sslv2 stream has now been dropped in OpenSSL.
  </p>
 </div>

 <div class="sect2" id="migration71.incompatible.typed-returns-compile-time">
  <h3 class="title">Forbid "return;" for typed returns already at compile-time</h3>
  <p class="para">
   Return statements without argument in functions which declare a return type
   now trigger <strong><code>E_COMPILE_ERROR</code></strong> (unless the return type is
   declared as <span class="type"><span class="type void">void</span></span>), even if the return statement would never be
   reached.
  </p>
 </div>

</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration70.incompatible.php" target="_blank">PHP 7.0</a></h1>
    </header>

    <div id="migration70.incompatible" class="sect1">
 <h2 class="title">Backward incompatible changes</h2>

 


<div class="sect2" id="migration70.incompatible.error-handling">
 <h3 class="title">Changes to error and exception handling</h3>

 <p class="para">
  Many fatal and recoverable fatal errors have been converted to exceptions in
  PHP 7. These error exceptions inherit from the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span>
  class, which itself implements the <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.throwable.php" class="classname">Throwable</a></span>
  interface (the new base interface all exceptions inherit).
 </p>

 <p class="para">
  This means that custom error handlers may no longer be triggered because
  exceptions may be thrown instead (causing new fatal errors for uncaught
  <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> exceptions).
 </p>

 <p class="para">
  A fuller description of how errors operate in PHP 7 can be found
  <a target="_blank" href="https://www.php.net/manual/en/language.errors.php7.php" class="link">on the PHP 7 errors page</a>. This
  migration guide will merely enumerate the changes that affect backward
  compatibility.
 </p>

 <div class="sect3" id="migration70.incompatible.error-handling.set-exception-handler">
  <h4 class="title">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.set-exception-handler.php" class="function">set_exception_handler()</a></span> is no longer guaranteed to
   receive <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.exception.php" class="classname">Exception</a></span> objects
  </h4>

  <p class="para">
   Code that implements an exception handler registered with
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.set-exception-handler.php" class="function">set_exception_handler()</a></span> using a type declaration of
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.exception.php" class="classname">Exception</a></span> will cause a fatal error when an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.error.php" class="classname">Error</a></span> object is thrown.
  </p>

  <p class="para">
   If the handler needs to work on both PHP 5 and 7, you should remove the
   type declaration from the handler, while code that is being migrated to
   work on PHP 7 exclusively can simply replace the
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.exception.php" class="classname">Exception</a></span> type declaration with
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.throwable.php" class="classname">Throwable</a></span> instead.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #FF8000">// PHP 5 era code that will break.<br></span><span style="color: #007700">function </span><span style="color: #0000BB">handler</span><span style="color: #007700">(</span><span style="color: #0000BB">Exception $e</span><span style="color: #007700">) { ... }<br></span><span style="color: #0000BB">set_exception_handler</span><span style="color: #007700">(</span><span style="color: #DD0000">'handler'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">// PHP 5 and 7 compatible.<br></span><span style="color: #007700">function </span><span style="color: #0000BB">handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">) { ... }<br><br></span><span style="color: #FF8000">// PHP 7 only.<br></span><span style="color: #007700">function </span><span style="color: #0000BB">handler</span><span style="color: #007700">(</span><span style="color: #0000BB">Throwable $e</span><span style="color: #007700">) { ... }<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.error-handling.constructors">
  <h4 class="title">Internal constructors always throw exceptions on failure</h4>

  <p class="para">
   Previously, some internal classes would return <strong><code>null</code></strong> or an unusable object
   when the constructor failed. All internal classes will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.exception.php" class="classname">Exception</a></span> in this case in the same way that user
   classes already had to.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.error-handling.parse">
  <h4 class="title">Parse errors throw <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.parseerror.php" class="classname">ParseError</a></span></h4>

  <p class="para">
   Parser errors now throw a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.parseerror.php" class="classname">ParseError</a></span> object. Error
   handling for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.eval.php" class="function">eval()</a></span> should now include a <a target="_blank" href="https://www.php.net/manual/en/" class="link"><code class="literal">catch</code></a> block
   that can handle this error.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.error-handling.strict">
  <h4 class="title">E_STRICT notices severity changes</h4>

  <p class="para">
   All of the <strong><code>E_STRICT</code></strong> notices have been reclassified to
   other levels. <strong><code>E_STRICT</code></strong> constant is retained, so calls like
   <code class="literal">error_reporting(E_ALL|E_STRICT)</code> will not cause an error.
  </p>
  <p class="para">
   </p><table class="doctable table"><caption><strong><strong><code>E_STRICT</code></strong> notices severity changes</strong></caption>
     
      <thead><tr><th>Situation</th>
        <th>New level/behaviour</th>
       </tr></thead><tbody class="tbody"><tr><td>Indexing by a resource</td>
        <td><strong><code>E_NOTICE</code></strong></td>
       </tr><tr><td>Abstract static methods</td>
        <td>Notice removed, triggers no error</td>
       </tr><tr><td>"Redefining" a constructor</td>
        <td>Notice removed, triggers no error</td>
       </tr><tr><td>Signature mismatch during inheritance</td>
        <td><strong><code>E_WARNING</code></strong></td>
       </tr><tr><td>Same (compatible) property in two used traits</td>
        <td>Notice removed, triggers no error</td>
       </tr><tr><td>Accessing static property non-statically</td>
        <td><strong><code>E_NOTICE</code></strong></td>
       </tr><tr><td>Only variables should be assigned by reference</td>
        <td><strong><code>E_NOTICE</code></strong></td>
       </tr><tr><td>Only variables should be passed by reference</td>
        <td><strong><code>E_NOTICE</code></strong></td>
       </tr><tr><td>Calling non-static methods statically</td>
        <td><strong><code>E_DEPRECATED</code></strong></td>
       </tr></tbody></table></div>
</div>



 


<div class="sect2" id="migration70.incompatible.variable-handling">
 <h3 class="title">Changes to variable handling</h3>

 <p class="para">
  PHP 7 now uses an abstract syntax tree when parsing source files. This has
  permitted many improvements to the language which were previously
  impossible due to limitations in the parser used in earlier versions of
  PHP, but has resulted in the removal of a few special cases for consistency
  reasons, which has resulted in backward compatibility breaks. These cases
  are detailed in this section.
 </p>

 <div class="sect3" id="migration70.incompatible.variable-handling.indirect">
  <h4 class="title">
   Changes to the handling of indirect variables, properties, and methods
  </h4>

  <p class="para">
   Indirect access to variables, properties, and methods will now be
   evaluated strictly in left-to-right order, as opposed to the previous mix
   of special cases. The table below shows how the order of evaluation has
   changed.
  </p>

  <p class="para">
   </p><table class="doctable table"><caption><strong>Old and new evaluation of indirect expressions</strong></caption>
    
     <thead><tr><th>Expression</th>
       <th>PHP 5 interpretation</th>
       <th>PHP 7 interpretation</th>
      </tr></thead><tbody class="tbody"><tr><td>
        <code class="code">$$foo['bar']['baz']</code>
       </td>
       <td>
        <code class="code">${$foo['bar']['baz']}</code>
       </td>
       <td>
        <code class="code">($$foo)['bar']['baz']</code>
       </td>
      </tr><tr><td>
        <code class="code">$foo-&gt;$bar['baz']</code>
       </td>
       <td>
        <code class="code">$foo-&gt;{$bar['baz']}</code>
       </td>
       <td>
        <code class="code">($foo-&gt;$bar)['baz']</code>
       </td>
      </tr><tr><td>
        <code class="code">$foo-&gt;$bar['baz']()</code>
       </td>
       <td>
        <code class="code">$foo-&gt;{$bar['baz']}()</code>
       </td>
       <td>
        <code class="code">($foo-&gt;$bar)['baz']()</code>
       </td>
      </tr><tr><td>
        <code class="code">Foo::$bar['baz']()</code>
       </td>
       <td>
        <code class="code">Foo::{$bar['baz']}()</code>
       </td>
       <td>
        <code class="code">(Foo::$bar)['baz']()</code>
       </td>
      </tr></tbody></table><p class="para">
   Code that used the old right-to-left evaluation order must be rewritten to
   explicitly use that evaluation order with curly braces (see the above
   middle column). This will make the code both forwards compatible with PHP
   7.x and backwards compatible with PHP 5.x.
  </p>

  <p class="para">
   This also affects the <a target="_blank" href="https://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global" class="link"><code class="literal">global</code></a> keyword. The curly brace syntax can be
   used to emulate the previous behaviour if required:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">f</span><span style="color: #007700">() {<br></span><span style="color: #FF8000">// Valid in PHP 5 only.<br></span><span style="color: #007700">global $</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">// Valid in PHP 5 and 7.<br></span><span style="color: #007700">global ${</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">};<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.variable-handling.list">
  <h4 class="title">Changes to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> handling</h4>

  <div class="sect4" id="migration70.incompatible.variable-handling.list.order">
   <h5 class="title">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> no longer assigns variables in reverse order
   </h5>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> will now assign values to variables in the
    order they are defined, rather than reverse order. In general, this only
    affects the case where <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> is being used in
    conjunction with the array <code class="code">[]</code> operator, as shown below:
   </p>

   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">[], </span><span style="color: #0000BB">$a</span><span style="color: #007700">[], </span><span style="color: #0000BB">$a</span><span style="color: #007700">[]) = [</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">];<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <p class="para">Output of the above example in PHP 5:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  int(3)
  [1]=&gt;
  int(2)
  [2]=&gt;
  int(1)
}
</pre></div>
    </div>
    <p class="para">Output of the above example in PHP 7:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  int(1)
  [1]=&gt;
  int(2)
  [2]=&gt;
  int(3)
}
</pre></div>
    </div>
   </div>

   <p class="para">
    In general, it is recommended not to rely on the order in which
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> assignments occur, as this is an implementation
    detail that may change again in the future.
   </p>
  </div>

  <div class="sect4" id="migration70.incompatible.variable-handling.list.empty">
   <h5 class="title">Empty <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> assignments have been removed</h5>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> constructs can no longer be empty. The following
    are no longer allowed:
   </p>

   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">list() = </span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br>list(,,) = </span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br>list(</span><span style="color: #0000BB">$x</span><span style="color: #007700">, list(), </span><span style="color: #0000BB">$y</span><span style="color: #007700">) = </span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </div>

  <div class="sect4" id="migration70.incompatible.variable-handling.list.string">
   <h5 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> cannot unpack <span class="type">string</span>s</h5>

   <p class="para">
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.list.php" class="function">list()</a></span> can no longer unpack <span class="type">string</span>
    variables. <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.str-split.php" class="function">str_split()</a></span> should be used instead.
   </p>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.variable-handling.array-order">
  <h4 class="title">
   Array ordering when elements are automatically created during by reference
   assignments has changed
  </h4>

  <p class="para">
   The order of the elements in an array has changed when those elements have
   been automatically created by referencing them in a by reference
   assignment. For example:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$array </span><span style="color: #007700">= [];<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"a"</span><span style="color: #007700">] =&amp; </span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"b"</span><span style="color: #007700">];<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"b"</span><span style="color: #007700">] = </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  ["b"]=&gt;
  &amp;int(1)
  ["a"]=&gt;
  &amp;int(1)
}
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  ["a"]=&gt;
  &amp;int(1)
  ["b"]=&gt;
  &amp;int(1)
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.variable-handling.parentheses">
  <h4 class="title">
   Parentheses around function arguments no longer affect behaviour
  </h4>

  <p class="para">
   In PHP 5, using redundant parentheses around a function argument could
   quiet strict standards warnings when the function argument was passed by
   reference. The warning will now always be issued.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">getArray</span><span style="color: #007700">() {<br>    return [</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">];<br>}<br><br>function </span><span style="color: #0000BB">squareArray</span><span style="color: #007700">(array &amp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">) {<br>    foreach (</span><span style="color: #0000BB">$a </span><span style="color: #007700">as &amp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">) {<br></span><span style="color: #0000BB">$v </span><span style="color: #007700">**= </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>    }<br>}<br><br></span><span style="color: #FF8000">// Generates a warning in PHP 7.<br></span><span style="color: #0000BB">squareArray</span><span style="color: #007700">((</span><span style="color: #0000BB">getArray</span><span style="color: #007700">()));<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">The above example will output:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Notice: Only variables should be passed by reference in /tmp/test.php on line 13
</pre></div>
   </div>
  </div>
 </div>
</div>



 


<div class="sect2" id="migration70.incompatible.foreach">
 <h3 class="title">Changes to <a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a></h3>

 <p class="para">
  Minor changes have been made to the behaviour of the <a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> control
  structure, primarily around the handling of the internal array pointer and
  modification of the array being iterated over.
 </p>

 <div class="sect3" id="migration70.incompatible.foreach.array-pointer">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> no longer changes the internal array pointer</h4>

  <p class="para">
   Prior to PHP 7, the internal array pointer was modified while an array was
   being iterated over with <a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a>. This is no longer the case, as shown
   in the following example:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$array </span><span style="color: #007700">= [</span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">];<br>foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as &amp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">) {<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">));<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(1)
int(2)
bool(false)
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
int(0)
int(0)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.foreach.by-value">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> by-value operates on a copy of the array</h4>

  <p class="para">
   When used in the default by-value mode, <a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> will now operate on a
   copy of the array being iterated rather than the array itself. This means
   that changes to the array made during iteration will not affect the values
   that are iterated.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.foreach.by-ref">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> by-reference has improved iteration behaviour</h4>

  <p class="para">
   When iterating by-reference, <a target="_blank" href="https://www.php.net/manual/en/control-structures.foreach.php" class="link">foreach</a> will now do a better job of
   tracking changes to the array made during iteration. For example,
   appending to an array while iterating will now result in the appended
   values being iterated over as well:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$array </span><span style="color: #007700">= [</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br>foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as &amp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">) {<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">] = </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
int(1)
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.foreach.object">
  <h4 class="title">Iteration of non-<span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.traversable.php" class="classname">Traversable</a></span> objects</h4>

  <p class="para">
   Iterating over a non-<span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.traversable.php" class="classname">Traversable</a></span> object will now
   have the same behaviour as iterating over by-reference arrays. This
   results in the
   <a target="_blank" href="https://www.php.net/manual/en/migration70.incompatible.php#migration70.incompatible.foreach.by-ref" class="link">improved behaviour when modifying an array during iteration</a>
   also being applied when properties are added to or removed from the
   object.
  </p>
 </div>
</div>



 


<div class="sect2" id="migration70.incompatible.integers">
 <h3 class="title">Changes to <span class="type">int</span> handling</h3>

 <div class="sect3" id="migration70.incompatible.integers.invalid-octals">
  <h4 class="title">Invalid octal literals</h4>

  <p class="para">
   Previously, octal literals that contained invalid numbers were silently
   truncated (<code class="literal">0128</code> was taken as <code class="literal">012</code>).
   Now, an invalid octal literal will cause a parse error.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.integers.negative-bitshift">
  <h4 class="title">Negative bitshifts</h4>

  <p class="para">
   Bitwise shifts by negative numbers will now throw an
   <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.arithmeticerror.php" class="classname">ArithmeticError</a></span>:
  </p>
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">1 </span><span style="color: #007700">&gt;&gt; -</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

    <p class="para">Output of the above example in PHP 5:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
</pre></div>
    </div>
    <p class="para">Output of the above example in PHP 7:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Uncaught ArithmeticError: Bit shift by negative number in /tmp/test.php:2
Stack trace:
#0 {main}
  thrown in /tmp/test.php on line 2
</pre></div>
    </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.integers.out-of-range">
  <h4 class="title">Out of range bitshifts</h4>

  <p class="para">
   Bitwise shifts (in either direction) beyond the bit width of an
   <span class="type">int</span> will always result in 0. Previously, the behaviour of
   such shifts was architecture dependent.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.integers.div-by-zero">
  <h4 class="title">Changes to Division By Zero</h4>

  <p class="para">
   Previously, when 0 was used as the divisor for either the divide (/) or
   modulus (%) operators, an E_WARNING would be emitted and
   <strong><code>false</code></strong> would be returned. Now, the divide operator
   returns a float as either +INF, -INF, or NAN, as specified by IEEE 754. The modulus operator E_WARNING
   has been removed and will throw a <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.divisionbyzeroerror.php" class="classname">DivisionByZeroError</a></span>
   exception.
  </p>
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">3</span><span style="color: #007700">/</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">/</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">%</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Warning: Division by zero in %s on line %d
bool(false)

Warning: Division by zero in %s on line %d
bool(false)

Warning: Division by zero in %s on line %d
bool(false)
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Warning: Division by zero in %s on line %d
float(INF)

Warning: Division by zero in %s on line %d
float(NAN)

PHP Fatal error:  Uncaught DivisionByZeroError: Modulo by zero in %s line %d
</pre></div>
   </div>
  </div>
 </div>
</div>



 


<div class="sect2" id="migration70.incompatible.strings">
 <h3 class="title">Changes to <span class="type">string</span> handling</h3>

 <div class="sect3" id="migration70.incompatible.strings.hex">
  <h4 class="title">Hexadecimal strings are no longer considered numeric</h4>

  <p class="para">
   Strings containing hexadecimal numbers are no longer considered to be
   numeric. For example:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />var_dump</span><span style="color: #007700">(</span><span style="color: #DD0000">"0x123" </span><span style="color: #007700">== </span><span style="color: #DD0000">"291"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_numeric</span><span style="color: #007700">(</span><span style="color: #DD0000">"0x123"</span><span style="color: #007700">));<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #DD0000">"0xe" </span><span style="color: #007700">+ </span><span style="color: #DD0000">"0x1"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">, </span><span style="color: #DD0000">"0x1"</span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
bool(true)
int(15)
string(2) "oo"
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
bool(false)
int(0)

Notice: A non well formed numeric value encountered in /tmp/test.php on line 5
string(3) "foo"
</pre></div>
   </div>
  </div>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.filter-var.php" class="function">filter_var()</a></span> can be used to check if a
   <span class="type">string</span> contains a hexadecimal number, and also to convert a
   string of that type to an <span class="type">int</span>:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br />$str </span><span style="color: #007700">= </span><span style="color: #DD0000">"0xffff"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$int </span><span style="color: #007700">= </span><span style="color: #0000BB">filter_var</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">, </span><span style="color: #0000BB">FILTER_VALIDATE_INT</span><span style="color: #007700">, </span><span style="color: #0000BB">FILTER_FLAG_ALLOW_HEX</span><span style="color: #007700">);<br>if (</span><span style="color: #0000BB">false </span><span style="color: #007700">=== </span><span style="color: #0000BB">$int</span><span style="color: #007700">) {<br>    throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">"Invalid integer!"</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$int</span><span style="color: #007700">); </span><span style="color: #FF8000">// int(65535)<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.strings.unicode-escapes">
  <h4 class="title"><code class="literal">\u{</code> may cause errors</h4>

  <p class="para">
   Due to the addition of the new
   <a target="_blank" href="https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.unicode-codepoint-escape-syntax" class="link">Unicode codepoint escape syntax</a>,
   strings containing a literal <code class="literal">\u{</code> followed by an invalid
   sequence will cause a fatal error. To avoid this, the leading backslash
   should be escaped.
  </p>
 </div>
</div>



 


<div class="sect2" id="migration70.incompatible.removed-functions">
 <h3 class="title">Removed functions</h3>

 <div class="sect3" id="migration70.incompatible.removed-functions.call-user-method">
  <h4 class="title">
   <span class="function"><strong>call_user_method()</strong></span> and
   <span class="function"><strong>call_user_method_array()</strong></span>
  </h4>

  <p class="para">
   These functions were deprecated in PHP 4.1.0 in favour of
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func.php" class="function">call_user_func()</a></span> and
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func-array.php" class="function">call_user_func_array()</a></span>. You may also want to consider
   using
   <a target="_blank" href="https://www.php.net/manual/en/functions.variable-functions.php" class="link">variable functions</a>
   and/or the
   <a target="_blank" href="https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list" class="link"><code class="literal">...</code></a>
   operator.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.ereg">
  <h4 class="title">
   All ereg* functions
  </h4>
  <p class="para">
   All <code class="literal">ereg</code> functions were removed.
   <a target="_blank" href="https://www.php.net/manual/en/book.pcre.php" class="link">PCRE</a> is a recommended alternative.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.mcrypt">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/book.mcrypt.php" class="link">mcrypt</a> aliases</h4>

  <p class="para">
   The deprecated <span class="function"><strong>mcrypt_generic_end()</strong></span> function has been
   removed in favour of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-generic-deinit.php" class="function">mcrypt_generic_deinit()</a></span>.
  </p>

  <p class="para">
   Additionally, the deprecated <span class="function"><strong>mcrypt_ecb()</strong></span>,
   <span class="function"><strong>mcrypt_cbc()</strong></span>, <span class="function"><strong>mcrypt_cfb()</strong></span> and
   <span class="function"><strong>mcrypt_ofb()</strong></span> functions have been removed in favour of
   using <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-decrypt.php" class="function">mcrypt_decrypt()</a></span> with the appropriate
   <strong><code>MCRYPT_MODE_*</code></strong> constant.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.mysql">
  <h4 class="title">
   All ext/mysql functions
  </h4>
  <p class="para">
   All <a target="_blank" href="https://www.php.net/manual/en/book.mysql.php" class="link">ext/mysql</a> functions were removed. For
   details about choosing a different MySQL API, see
   <a target="_blank" href="https://www.php.net/manual/en/mysqlinfo.api.choosing.php" class="link">Choosing a MySQL API</a>.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.mssql">
  <h4 class="title">
   All ext/mssql functions
  </h4>
  <p class="para">
   All <code class="literal">ext/mssql</code> functions were removed.
   </p><ul class="simplelist"><li class="member"><a target="_blank" href="https://www.php.net/manual/en/ref.pdo-sqlsrv.php" class="link">PDO_SQLSRV</a></li>
    <li class="member"><a target="_blank" href="https://www.php.net/manual/en/ref.pdo-odbc.php" class="link">PDO_ODBC</a></li>
    <li class="member"><a target="_blank" href="https://www.php.net/manual/en/book.sqlsrv.php" class="link">SQLSRV</a></li>
    <li class="member"><a target="_blank" href="https://www.php.net/manual/en/book.uodbc.php" class="link">Unified ODBC API</a></li>
   </ul></div>

 <div class="sect3" id="migration70.incompatible.removed-functions.intl">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/book.intl.php" class="link">intl</a> aliases</h4>

  <p class="para">
   The deprecated <span class="function"><strong>datefmt_set_timezone_id()</strong></span> and
   <span class="methodname"><strong>IntlDateFormatter::setTimeZoneID()</strong></span> aliases have been
   removed in favour of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/intldateformatter.settimezone.php" class="function">datefmt_set_timezone()</a></span> and
   <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/intldateformatter.settimezone.php" class="methodname">IntlDateFormatter::setTimeZone()</a></span>, respectively.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.magic-quotes">
  <h4 class="title"><span class="function"><strong>set_magic_quotes_runtime()</strong></span></h4>

  <p class="para">
   <span class="function"><strong>set_magic_quotes_runtime()</strong></span>, along with its alias
   <span class="function"><strong>magic_quotes_runtime()</strong></span>, have been removed. They were
   deprecated in PHP 5.3.0, and became effectively non-functional with the
   removal of magic quotes in PHP 5.4.0.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.set-socket-blocking">
  <h4 class="title"><span class="function"><strong>set_socket_blocking()</strong></span></h4>

  <p class="para">
   The deprecated <span class="function"><strong>set_socket_blocking()</strong></span> alias has been
   removed in favour of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.stream-set-blocking.php" class="function">stream_set_blocking()</a></span>.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.dl">
  <h4 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.dl.php" class="function">dl()</a></span> in PHP-FPM</h4>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.dl.php" class="function">dl()</a></span> can no longer be used in PHP-FPM. It remains
   functional in the CLI and embed SAPIs.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.removed-functions.gd">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/book.image.php" class="link">GD</a> Type1 functions</h4>

  <p class="para">
   Support for PostScript Type1 fonts has been removed from the GD extension,
   resulting in the removal of the following functions:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepsbbox()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepsencodefont()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepsextendfont()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepsfreefont()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepsloadfont()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepsslantfont()</strong></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>imagepstext()</strong></span>
    </span>
   </li>
  </ul><p class="para">
   Using TrueType fonts and their associated functions is recommended instead.
  </p>
 </div>
</div>



 


<div class="sect2" id="migration70.incompatible.removed-ini-directives">
 <h3 class="title">Removed INI directives</h3>

 <div class="sect3" id="migration70.incompatible.removed-ini-directives.features">
  <h4 class="title">Removed features</h4>

  <p class="para">
   The following INI directives have been removed as their associated features
   have also been removed:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <code class="parameter">always_populate_raw_post_data</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="parameter">asp_tags</code>
    </span>
   </li>
  </ul></div>

 <div class="sect3" id="migration70.incompatible.removed-ini-directives.xsl">
  <h4 class="title"><code class="parameter">xsl.security_prefs</code></h4>

  <p class="para">
   The <code class="parameter">xsl.security_prefs</code> directive has been removed.
   Instead, the <span class="methodname"><a target="_blank" href="https://www.php.net/manual/en/xsltprocessor.setsecurityprefs.php" class="methodname">XsltProcessor::setSecurityPrefs()</a></span>
   method should be called to control the security preferences on a
   per-processor basis.
  </p>
 </div>
</div>



 


<div class="sect2" id="migration70.incompatible.other">
 <h3 class="title">Other backward incompatible changes</h3>

 <div class="sect3" id="migration70.incompatible.other.new-by-ref">
  <h4 class="title">New objects cannot be assigned by reference</h4>

  <p class="para">
   The result of the <a target="_blank" href="https://www.php.net/manual/en/language.oop5.basic.php#language.oop5.basic.new" class="link"><code class="literal">new</code></a> statement can no longer be assigned to a variable
   by reference:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">class </span><span style="color: #0000BB">C </span><span style="color: #007700">{}<br></span><span style="color: #0000BB">$c </span><span style="color: #007700">=&amp; new </span><span style="color: #0000BB">C</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Deprecated: Assigning the return value of new by reference is deprecated in /tmp/test.php on line 3
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Parse error: syntax error, unexpected 'new' (T_NEW) in /tmp/test.php on line 3
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.other.classes">
  <h4 class="title">Invalid class, interface and trait names</h4>

  <p class="para">
   The following names cannot be used to name classes, interfaces or traits:
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara"><span class="type">bool</span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type">int</span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type">float</span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type">string</span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><strong><code>null</code></strong></span>
   </li>
   <li class="listitem">
    <span class="simpara"><strong><code>true</code></strong></span>
   </li>
   <li class="listitem">
    <span class="simpara"><strong><code>false</code></strong></span>
   </li>
  </ul><p class="para">
   Furthermore, the following names should not be used. Although they will not
   generate an error in PHP 7.0, they are reserved for future use and should
   be considered deprecated.
  </p>

  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara"><span class="type">resource</span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type">object</span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type"><a target="_blank" href="https://www.php.net/manual/en/language.types.declarations.php#language.types.declarations.mixed" class="type mixed">mixed</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara"><span class="type"><span class="type numeric">numeric</span></span></span>
   </li>
  </ul></div>

 <div class="sect3" id="migration70.incompatible.other.php-tags">
  <h4 class="title">ASP and script PHP tags removed</h4>

  <p class="para">
   Support for using ASP and script tags to delimit PHP code has been removed.
   The affected tags are:
  </p>

  <table class="doctable table"><caption><strong>Removed ASP and script tags</strong></caption>
   
    <thead><tr><th>Opening tag</th>
      <th>Closing tag</th>
     </tr></thead><tbody class="tbody"><tr><td><code class="code">&lt;%</code></td>
      <td><code class="code">%&gt;</code></td>
     </tr><tr><td><code class="code">&lt;%=</code></td>
      <td><code class="code">%&gt;</code></td>
     </tr><tr><td><code class="code"><script language="php"></script></code></td>
      <td><code class="code"></code></td>
     </tr></tbody></table></div>

 <div class="sect3" id="migration70.incompatible.other.incompatible-this">
  <h4 class="title">Calls from incompatible context removed</h4>

  <p class="para">
   <a target="_blank" href="https://www.php.net/manual/en/migration56.deprecated.php#migration56.deprecated.incompatible-context" class="link">Previously deprecated in PHP 5.6</a>,
   static calls made to a non-static method with an incompatible context will
   now result in the called method having an undefined
   <code class="literal">$this</code> variable and a deprecation warning being issued.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">class </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br>    public function </span><span style="color: #0000BB">test</span><span style="color: #007700">() { </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">); }<br>}<br><br></span><span style="color: #FF8000">// Note: Does NOT extend A<br></span><span style="color: #007700">class </span><span style="color: #0000BB">B </span><span style="color: #007700">{<br>    public function </span><span style="color: #0000BB">callNonStaticMethodOfA</span><span style="color: #007700">() { </span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">test</span><span style="color: #007700">(); }<br>}<br><br>(new </span><span style="color: #0000BB">B</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">callNonStaticMethodOfA</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5.6:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Deprecated: Non-static method A::test() should not be called statically, assuming $this from incompatible context in /tmp/test.php on line 8
object(B)#1 (0) {
}
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
Deprecated: Non-static method A::test() should not be called statically in /tmp/test.php on line 8

Notice: Undefined variable: this in /tmp/test.php on line 3
NULL
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.other.yield">
  <h4 class="title"><a target="_blank" href="https://www.php.net/manual/en/language.generators.syntax.php#control-structures.yield" class="link">yield</a> is now a right associative operator</h4>

  <p class="para">
   The <a target="_blank" href="https://www.php.net/manual/en/language.generators.syntax.php#control-structures.yield" class="link">yield</a> construct no longer requires parentheses, and has been changed
   to a right associative operator with precedence between
   <code class="literal">print</code> and <code class="literal">=&gt;</code>. This can result in
   changed behaviour:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">echo yield -</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #FF8000">// Was previously interpreted as<br></span><span style="color: #007700">echo (yield) - </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #FF8000">// And is now interpreted as<br></span><span style="color: #007700">echo yield (-</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br><br>yield </span><span style="color: #0000BB">$foo </span><span style="color: #007700">or die;<br></span><span style="color: #FF8000">// Was previously interpreted as<br></span><span style="color: #007700">yield (</span><span style="color: #0000BB">$foo </span><span style="color: #007700">or die);<br></span><span style="color: #FF8000">// And is now interpreted as<br></span><span style="color: #007700">(yield </span><span style="color: #0000BB">$foo</span><span style="color: #007700">) or die;<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>

  <p class="para">
   Parentheses can be used to disambiguate those cases.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.func-parameters">
  <h4 class="title">Functions cannot have multiple parameters with the same name</h4>

  <p class="para">
   It is no longer possible to define two or more function parameters with the
   same name. For example, the following function will trigger an
   <strong><code>E_COMPILE_ERROR</code></strong>:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">, </span><span style="color: #0000BB">$unused</span><span style="color: #007700">, </span><span style="color: #0000BB">$unused</span><span style="color: #007700">) {<br></span><span style="color: #FF8000">//<br></span><span style="color: #007700">}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.other.func-parameter-modified">
  <h4 class="title">Functions inspecting arguments report the <em>current</em> parameter value</h4>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-get-arg.php" class="function">func_get_arg()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-get-args.php" class="function">func_get_args()</a></span>,
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.debug-backtrace.php" class="function">debug_backtrace()</a></span> and exception backtraces will no longer
   report the original value that was passed to a parameter, but will instead
   provide the current value (which might have been modified).
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">) {<br></span><span style="color: #0000BB">$x</span><span style="color: #007700">++;<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">func_get_arg</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">));<br>}<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);</span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
1
</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 7:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
2
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.other.multiple-default">
  <h4 class="title">Switch statements cannot have multiple default blocks</h4>

  <p class="para">
   It is no longer possible to define two or more default blocks in a switch
   statement. For example, the following switch statement will trigger an
   <strong><code>E_COMPILE_ERROR</code></strong>:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">switch (</span><span style="color: #0000BB">1</span><span style="color: #007700">) {<br>    default:<br>    break;<br>    default:<br>    break;<br>}<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>

 <div class="sect3" id="migration70.incompatible.other.http-raw-post-data">
  <h4 class="title"><var class="varname">$HTTP_RAW_POST_DATA</var> removed</h4>

  <p class="para">
   <var class="varname">$HTTP_RAW_POST_DATA</var> is no longer available. The
   <a target="_blank" href="https://www.php.net/manual/en/wrappers.php.php#wrappers.php.input" class="link"><code class="literal">php://input</code></a>
   stream should be used instead.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.ini-comments">
  <h4 class="title"><code class="literal">#</code> comments in INI files removed</h4>

  <p class="para">
   Support for prefixing comments with <code class="literal">#</code> in INI files has been
   removed. <code class="literal">;</code> (semi-colon) should be used instead. This change
   applies to <var class="filename">php.ini</var>, as well as files handled by
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.parse-ini-file.php" class="function">parse_ini_file()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.parse-ini-string.php" class="function">parse_ini_string()</a></span>.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.json-to-jsond">
  <h4 class="title">JSON extension replaced with JSOND</h4>

  <p class="para">
   The JSON extension has been replaced with JSOND, causing three minor BC
   breaks. Firstly, a number must not end in a decimal point (i.e.
   <code class="literal">34.</code> must be changed to either <code class="literal">34.0</code> or
   <code class="literal">34</code>). Secondly, when using scientific notation, the
   <code class="literal">e</code> exponent must not immediately follow a decimal point
   (i.e. <code class="literal">3.e3</code> must be changed to either
   <code class="literal">3.0e3</code> or <code class="literal">3e3</code>).
   Finally, an empty string is no longer considered valid JSON.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.internal-function-failure-overflow">
  <h4 class="title">Internal function failure on overflow</h4>

  <p class="para">
   Previously, internal functions would silently truncate numbers produced from
   float-to-integer coercions when the float was too large to represent as an
   integer. Now, an E_WARNING will be emitted and <strong><code>null</code></strong> will be returned.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.fixes-custom-session-handler">
  <h4 class="title">Fixes to custom session handler return values</h4>

  <p class="para">
   Any predicate functions implemented by custom session handlers that return
   either <strong><code>false</code></strong> or <code class="literal">-1</code> will be fatal errors. If any value
   from these functions other than a boolean, <code class="literal">-1</code>, or
   <code class="literal">0</code> is returned, then it will fail and an E_WARNING will be
   emitted.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.sort-order">
  <h4 class="title">Sort order of equal elements</h4>
  <p class="para">
   The internal sorting algorithm has been improved, what may result in
   different sort order of elements, which compare as equal, than before.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Don't rely on the order of elements which compare as equal; it might change
    anytime.
   </p>
  </blockquote>
 </div>

 <div class="sect3" id="migration70.incompatible.other.break-continue">
  <h4 class="title">Misplaced break and continue statements</h4>
  <p class="para">
   <code class="literal">break</code> and <code class="literal">continue</code> statements outside of
   a loop or <code class="literal">switch</code> control structure are now detected at
   compile-time instead of run-time as before, and trigger an
   <strong><code>E_COMPILE_ERROR</code></strong>.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.mhash">
  <h4 class="title">Mhash is not an extension anymore</h4>
  <p class="para">
   The Mhash extension has been fully integrated into the <a target="_blank" href="https://www.php.net/manual/en/book.hash.php" class="link">Hash</a> extension. Therefore, it is no longer
   possible to detect Mhash support with <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.extension-loaded.php" class="function">extension_loaded()</a></span>;
   use <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.function-exists.php" class="function">function_exists()</a></span> instead. Furthermore, Mhash is no
   longer reported by <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-loaded-extensions.php" class="function">get_loaded_extensions()</a></span> and related
   features.
  </p>
 </div>

 <div class="sect3" id="migration70.incompatible.other.declare-ticks">
  <h4 class="title">declare(ticks)</h4>
  <p class="para">
   The <a target="_blank" href="https://www.php.net/manual/en/control-structures.declare.php#control-structures.declare.ticks" class="link">declare(ticks)</a>
   directive does no longer leak into different compilation units.
  </p>
 </div>
</div>



</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration56.incompatible.php" target="_blank">PHP 5.6</a></h1>
    </header>

    <div id="migration56.incompatible" class="sect1">
 <h2 class="title">Backward incompatible changes</h2>
 <p class="simpara">
  Although most existing PHP 5 code should work without changes, please take
  note of some backward incompatible changes:
 </p>

 <div class="sect2" id="migration56.incompatible.array-keys">
  <h3 class="title">Array keys won't be overwritten when defining an array as a property of a class via an array literal</h3>

  <p class="para">
   Previously, arrays declared as class properties which mixed explicit and
   implicit keys could have array elements silently overwritten if an explicit
   key was the same as a sequential implicit key. For example:
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB"><?php <br /></span><span style="color: #007700">class </span><span style="color: #0000BB">C </span><span style="color: #007700">{<br>    const </span><span style="color: #0000BB">ONE </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>    public </span><span style="color: #0000BB">$array </span><span style="color: #007700">= [<br></span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ONE </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,<br></span><span style="color: #DD0000">'bar'</span><span style="color: #007700">,<br></span><span style="color: #DD0000">'quux'</span><span style="color: #007700">,<br>    ];<br>}<br><br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((new </span><span style="color: #0000BB">C</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">array</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <p class="para">Output of the above example in PHP 5.5:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  [0]=&gt;
  string(3) "bar"
  [1]=&gt;
  string(4) "quux"
}

</pre></div>
   </div>
   <p class="para">Output of the above example in PHP 5.6:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [1]=&gt;
  string(3) "foo"
  [2]=&gt;
  string(3) "bar"
  [3]=&gt;
  string(4) "quux"
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration56.incompatible.json-decode">
  <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-decode.php" class="function">json_decode()</a></span> strictness</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-decode.php" class="function">json_decode()</a></span> now rejects non-lowercase variants of the
   JSON literals <code class="literal">true</code>, <code class="literal">false</code> and
   <code class="literal">null</code> at all times, as per the JSON specification, and
   sets <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-last-error.php" class="function">json_last_error()</a></span> accordingly. Previously, inputs
   to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-decode.php" class="function">json_decode()</a></span> that consisted solely of one of these
   values in upper or mixed case were accepted.
  </p>

  <p class="para">
   This change will only affect cases where invalid JSON was being passed to
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-decode.php" class="function">json_decode()</a></span>: valid JSON input is unaffected and will
   continue to be parsed normally.
  </p>
 </div>

 <div class="sect2" id="migration56.incompatible.peer-verification">
  <h3 class="title">Stream wrappers now verify peer certificates and host names by default when using SSL/TLS</h3>

  
   <p class="para">
    All encrypted client streams now enable peer verification by default. By
    default, this will use OpenSSL's default CA bundle to verify the peer
    certificate. In most cases, no changes will need to be made to communicate
    with servers with valid SSL certificates, as distributors generally
    configure OpenSSL to use known good CA bundles.
   </p>

   <p class="para">
    The default CA bundle may be overridden on a global basis by setting
    either the openssl.cafile or openssl.capath configuration setting, or on a
    per request basis by using the
    <a target="_blank" href="https://www.php.net/manual/en/context.ssl.php#context.ssl.cafile" class="link"><code class="parameter">cafile</code></a> or
    <a target="_blank" href="https://www.php.net/manual/en/context.ssl.php#context.ssl.capath" class="link"><code class="parameter">capath</code></a>
    context options.
   </p>

   <p class="para">
    While not recommended in general, it is possible to disable peer
    certificate verification for a request by setting the
    <a target="_blank" href="https://www.php.net/manual/en/context.ssl.php#context.ssl.verify-peer" class="link"><code class="parameter">verify_peer</code></a>
    context option to <strong><code>false</code></strong>, and to disable peer name validation by setting
    the <a target="_blank" href="https://www.php.net/manual/en/context.ssl.php#context.ssl.verify-peer-name" class="link"><code class="parameter">verify_peer_name</code></a>
    context option to <strong><code>false</code></strong>.
   </p>

 </div>

 <div class="sect2" id="migration56.incompatible.gmp">
  <h3 class="title"><a target="_blank" href="https://www.php.net/manual/en/book.gmp.php" class="link">GMP</a> resources are now objects</h3>

  <p class="para">
   <a target="_blank" href="https://www.php.net/manual/en/book.gmp.php" class="link">GMP</a> resources are now objects. The
   functional API implemented in the GMP extension has not changed, and code
   should run unmodified unless it checks explicitly for a resource using
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.is-resource.php" class="function">is_resource()</a></span> or similar.
  </p>
 </div>

 <div class="sect2" id="migration56.incompatible.mcrypt">
  <h3 class="title"><a target="_blank" href="https://www.php.net/manual/en/book.mcrypt.php" class="link">Mcrypt</a> functions now require valid keys and IVs</h3>

  <p class="para">
   <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-encrypt.php" class="function">mcrypt_encrypt()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-decrypt.php" class="function">mcrypt_decrypt()</a></span>,
   <span class="function"><strong>mcrypt_cbc()</strong></span>, <span class="function"><strong>mcrypt_cfb()</strong></span>,
   <span class="function"><strong>mcrypt_ecb()</strong></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mcrypt-generic.php" class="function">mcrypt_generic()</a></span> and
   <span class="function"><strong>mcrypt_ofb()</strong></span> will no longer accept keys or IVs with
   incorrect sizes, and block cipher modes that require IVs will now fail if
   an IV isn't provided.
  </p>
 </div>
 
 <div class="sect2" id="migration56.incompatible.curl">
  <h3 class="title"><a target="_blank" href="https://www.php.net/manual/en/book.curl.php" class="link">cURL</a> file uploads</h3>

  <p class="para">
   Uploads using the @file syntax now require CURLOPT_SAFE_UPLOAD to be set to
   <strong><code>false</code></strong>. <span class="classname"><a target="_blank" href="https://www.php.net/manual/en/class.curlfile.php" class="classname">CURLFile</a></span> should be used instead.
  </p>
 </div>
</div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration55.incompatible.php" target="_blank">PHP 5.5</a></h1>
    </header>

    <div id="migration55.incompatible" class="sect1">
  <h2 class="title">Backward Incompatible Changes</h2>
  <p class="simpara">
   Although most existing PHP 5 code should work without changes, please take
   note of some backward incompatible changes:
  </p>
  
  <div class="sect2" id="migration55.incompatible.windows">
   <h3 class="title">Windows XP and 2003 support dropped</h3>
   
   <p class="para">
    Support for Windows XP and 2003 has been dropped. Windows builds of PHP
    now require Windows Vista or newer.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.case">
   <h3 class="title">Case insensitivity no longer locale specific</h3>
   
   <p class="para">
    All case insensitive matching for function, class and constant names is
    now performed in a locale independent manner according to ASCII rules.
    This improves support for languages using the Latin alphabet with unusual
    collating rules, such as Turkish and Azeri.
   </p>
   <p class="para">
    This may cause issues for code that uses case insensitive matches for
    non-ASCII characters in multibyte character sets (including UTF-8), such
    as accented characters in many European languages. If you have a
    non-English, non-ASCII code base, then you will need to test that you are
    not inadvertently relying on this behaviour before deploying PHP 5.5 to
    production systems.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.pack">
   <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pack.html" class="function">pack()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unpack.html" class="function">unpack()</a></span> changes</h3>

   <p class="para">
    Changes were made to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pack.html" class="function">pack()</a></span> and
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unpack.html" class="function">unpack()</a></span> to make them more compatible with Perl:
   </p>

   <ul class="itemizedlist"><li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.pack.html" class="function">pack()</a></span> now supports the "Z" format code, which
      behaves identically to "a".
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unpack.html" class="function">unpack()</a></span> now support the "Z" format code for NULL
      padded strings, and behaves as "a" did in previous versions: it will
      strip trailing NULL bytes.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unpack.html" class="function">unpack()</a></span> now keeps trailing NULL bytes when the "a"
      format code is used.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unpack.html" class="function">unpack()</a></span> now strips all trailing ASCII whitespace
      when the "A" format code is used.
     </span>
    </li>
   </ul><p class="para">
    Writing backward compatible code that uses the "a" format code with
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.unpack.html" class="function">unpack()</a></span> requires the use of
    <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.version-compare.html" class="function">version_compare()</a></span>, due to the backward compatibility
    break.
   </p>
   <p class="para">
    For example:
   </p>
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #FF8000">//Â OldÂ code:<br></span><span style="color: #0000BB">$dataÂ </span><span style="color: #007700">=Â </span><span style="color: #0000BB">unpack</span><span style="color: #007700">(</span><span style="color: #DD0000">'a5'</span><span style="color: #007700">,Â </span><span style="color: #0000BB">$packed</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//Â NewÂ code:<br></span><span style="color: #007700">ifÂ (</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">,Â </span><span style="color: #DD0000">'5.5.0-dev'</span><span style="color: #007700">,Â </span><span style="color: #DD0000">'&gt;='</span><span style="color: #007700">))Â {<br>Â Â </span><span style="color: #0000BB">$dataÂ </span><span style="color: #007700">=Â </span><span style="color: #0000BB">unpack</span><span style="color: #007700">(</span><span style="color: #DD0000">'Z5'</span><span style="color: #007700">,Â </span><span style="color: #0000BB">$packed</span><span style="color: #007700">);<br>}Â elseÂ {<br>Â Â </span><span style="color: #0000BB">$dataÂ </span><span style="color: #007700">=Â </span><span style="color: #0000BB">unpack</span><span style="color: #007700">(</span><span style="color: #DD0000">'a5'</span><span style="color: #007700">,Â </span><span style="color: #0000BB">$packed</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
  <div class="sect2" id="migration55.incompatible.json">
   <h3 class="title"><span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-encode.html" class="function">json_encode()</a></span> changes</h3>
   <p class="para">
     When the <code class="parameter">value</code> passed to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-encode.html" class="function">json_encode()</a></span> triggers a JSON encoding error,
     <strong><code>FALSE</code></strong> is returned instead of partial output,
     unless <code class="parameter">options</code> contains <strong><code>JSON_PARTIAL_OUTPUT_ON_ERROR</code></strong>.
     See <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.json-last-error.html" class="function">json_last_error()</a></span> for the full list of reasons that can cause JSON encoding to fail.
     One of the potential failure reasons is that <code class="parameter">value</code> contains strings containing invalid UTF-8.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.self-parent-static">
   <h3 class="title"><code class="literal">self</code>, <code class="literal">parent</code> and <code class="literal">static</code> are now always case insensitive</h3>

   <p class="para">
    Prior to PHP 5.5, cases existed where the
    <a target="_blank" href="https://www.php.net/manual/en/language.oop5.paamayim-nekudotayim.html" class="link">self</a>,
    <a target="_blank" href="https://www.php.net/manual/en/language.oop5.paamayim-nekudotayim.html" class="link">parent</a>, and
    <a target="_blank" href="https://www.php.net/manual/en/language.oop5.late-static-bindings.html" class="link">static</a>
    keywords were treated in a case sensitive fashion. These have now been
    resolved, and these keywords are always handled case insensitively:
    <code class="literal">SELF::CONSTANT</code> is now treated identically to
    <code class="literal">self::CONSTANT</code>.
   </p>
  </div>

  <div class="sect2" id="migration55.incompatible.guid">
   <h3 class="title">PHP logo GUIDs removed</h3>

   <p class="para">
    The GUIDs that previously resulted in PHP outputting various logos have
    been removed. This includes the removal of the functions to return those
    GUIDs. The removed functions are:
   </p>

   <ul class="itemizedlist"><li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.php-logo-guid.html" class="function">php_logo_guid()</a></span>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><strong>php_egg_logo_guid()</strong></span>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><strong>php_real_logo_guid()</strong></span>
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.zend-logo-guid.html" class="function">zend_logo_guid()</a></span>
     </span>
    </li>
   </ul></div>

  <div class="sect2" id="migration55.incompatible.execution">
   <h3 class="title">Internal execution changes</h3>

   <p class="para">
    Extension authors should note that the <strong class="command">zend_execute()</strong>
    function can no longer be overridden, and that numerous changes have been
    made to the <code class="literal">execute_data</code> struct and related function
    and method handling opcodes.
   </p>

   <p class="para">
    Most extension authors are unlikely to be affected, but those writing
    extensions that hook deeply into the Zend Engine should read
    <a target="_blank" href="https://www.php.net/manual/en/migration55.internals.html" class="link">the notes on these changes</a>.
   </p>
  </div>
 </div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration54.incompatible.php" target="_blank">PHP 5.4</a></h1>
    </header>

    <div id="migration54.incompatible" class="section">
  <h2 class="title">Backward Incompatible Changes</h2>
  <p class="simpara">
   Although most existing PHP 5 code should work without changes, please take
   note of some backward incompatible changes:
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/features.safe-mode.html" class="link">Safe mode</a> is no
     longer supported. Any applications that rely on safe mode may need
     adjustment, in terms of security.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/security.magicquotes.html" class="link">Magic quotes</a> has been removed. Applications relying
     on this feature may need to be updated, to avoid security issues.
    </span>
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-magic-quotes-gpc.html" class="function">get_magic_quotes_gpc()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-magic-quotes-runtime.html" class="function">get_magic_quotes_runtime()</a></span>
     now always return <strong><code>FALSE</code></strong>. <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.set-magic-quotes-runtime.html" class="function">set_magic_quotes_runtime()</a></span> raises an
     <strong><code>E_CORE_ERROR</code></strong> level error on trying to enable <a target="_blank" href="https://www.php.net/manual/en/security.magicquotes.html" class="link">Magic quotes</a>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The <a target="_blank" href="https://www.php.net/manual/en/ini.core.html#ini.register-globals" class="link">register_globals</a> and
     <a target="_blank" href="https://www.php.net/manual/en/ini.core.html#ini.register-long-arrays" class="link">register_long_arrays</a> <var class="filename">php.ini</var> directives
     have been removed.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The mbstring.script_encoding directive has been removed. Use <a target="_blank" href="https://www.php.net/manual/en/ini.core.html#ini.zend.script-encoding" class="link">zend.script_encoding</a> instead.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/language.references.pass.html" class="link">Call-time pass by reference</a> has been removed.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The <a target="_blank" href="https://www.php.net/manual/en/control-structures.break.html" class="link">break</a>
     and <a target="_blank" href="https://www.php.net/manual/en/control-structures.continue.html" class="link">continue</a>
     statements no longer accept variable arguments (e.g., <code class="literal">break 1 + foo() * $bar;</code>).
     Static arguments still work, such as <code class="literal">break 2;</code>. As a side effect of this change
     <code class="literal">break 0;</code> and <code class="literal">continue 0;</code> are no longer allowed.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The default character set for <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.html" class="function">htmlentities()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.html-entity-decode.html" class="function">html_entity_decode()</a></span> is now <code class="literal">UTF-8</code>,
     instead of <code class="literal">ISO-8859-1</code>.  Note that changing your output
     charset via the <a target="_blank" href="https://www.php.net/manual/en/ini.core.html#ini.default-charset" class="link">default_charset</a>
     configuration setting does not affect htmlspecialchars/htmlentities unless
     you are passing "" (an empty string) as the encoding parameter to your 
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span>/<span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.html" class="function">htmlentities()</a></span>/<span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.html-entity-decode.html" class="function">html_entity_decode()</a></span> calls.
     Generally we do not recommend doing this because you should be able to
     change your output charset without affecting the runtime charset used by
     these functions. The safest approach is to explicitly set the charset on
     each call to <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.html" class="function">htmlentities()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.html-entity-decode.html" class="function">html_entity_decode()</a></span>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     In the <a target="_blank" href="https://www.php.net/manual/en/book.datetime.html" class="link">date and time extension</a>, the timezone can no longer be
     set using the TZ environment variable. Instead you have to specify a timezone using the
     <a target="_blank" href="https://www.php.net/manual/en/datetime.configuration.html#ini.date.timezone" class="link">date.timezone</a> <var class="filename">php.ini</var> option or <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.date-default-timezone-set.html" class="function">date_default_timezone_set()</a></span>
     function. PHP will no longer attempt to guess the timezone, and will instead fall back to "UTC" and issue
     a <strong><code>E_WARNING</code></strong>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Non-numeric string offsets - e.g. <code class="literal">$a['foo']</code> where $a is a string - now return
     false on <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.isset.html" class="function">isset()</a></span> and true on <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.empty.html" class="function">empty()</a></span>, and produce a <strong><code>E_WARNING</code></strong>
     if you try to use them. Offsets of types double, bool and null produce a <strong><code>E_NOTICE</code></strong>. Numeric strings
     (e.g. <code class="literal">$a['2']</code>) still work as before. Note that offsets like <code class="literal">'12.3'</code>
     and <code class="literal">'5 foobar'</code> are considered non-numeric and produce a <strong><code>E_WARNING</code></strong>, but are converted
     to 12 and 5 respectively, for backward compatibility reasons.
    </span>
    <span class="simpara">
     Note: Following code returns different result.
    </span>
    <span class="simpara">
     $str='abc';var_dump(isset($str['x'])); // false for PHP 5.4 or later, but true for 5.3 or less
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Converting an array to a string will now generate an <strong><code>E_NOTICE</code></strong> level
     error, but the result of the cast will still be the string <code class="literal">"Array"</code>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Turning <strong><code>NULL</code></strong>, <strong><code>FALSE</code></strong>, or an empty string into an object by adding a property
     will now emit an <strong><code>E_WARNING</code></strong> level error, instead of <strong><code>E_STRICT</code></strong>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Parameter names that shadow super globals now cause a fatal error. This prohibits code like
     <code class="literal">function foo($_GET, $_POST) {}</code>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The Salsa10 and Salsa20 <a target="_blank" href="https://www.php.net/manual/en/book.hash.html" class="link">hash algorithms</a> have been removed.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The Tiger <a target="_blank" href="https://www.php.net/manual/en/book.hash.html" class="link">hash algorithm</a> now uses big-endian byte ordering.
     Please follow <a target="_blank" href="https://www.php.net/manual/en/function.hash.html#function.hash.tiger-bc" class="link">this example</a> to write code that
     is compatible with both PHP 5.3 and 5.4.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-combine.html" class="function">array_combine()</a></span> now returns <code class="literal">array()</code> instead of <strong><code>FALSE</code></strong>
     when two empty arrays are provided as parameters.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     If you use <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlentities.html" class="function">htmlentities()</a></span> with asian character sets, it
     works like <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span> - this has always been the
     case in previous versions of PHP, but now an <strong><code>E_STRICT</code></strong>
     level error is emitted.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The third parameter of <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ob-start.html" class="function">ob_start()</a></span> has changed from
     <span class="type"><a target="_blank" href="https://www.php.net/manual/en/language.types.boolean.html" class="type boolean">boolean</a></span> <code class="parameter">erase</code> to <span class="type"><a target="_blank" href="https://www.php.net/manual/en/language.types.integer.html" class="type integer">integer</a></span>
     <code class="parameter">flags</code>. Note that code that explicitly set
     <code class="parameter">erase</code> to <strong><code>FALSE</code></strong> will no longer behave as expected
     in PHP 5.4: please follow
     <a target="_blank" href="https://www.php.net/manual/en/function.ob-start.html#function.ob-start.flags-bc" class="link">this example</a> to write
     code that is compatible with PHP 5.3 and 5.4.
    </span>
   </li>
  </ul><p class="simpara">
   The following keywords are now <a target="_blank" href="https://www.php.net/manual/en/reserved.html" class="link">reserved</a>, and may not be used
   as names by functions, classes, etc.
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.traits.html" class="link">trait</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/language.types.callable.html" class="link">callable</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.traits.html" class="link">insteadof</a>
    </span>
   </li>
  </ul><p class="simpara">
   The following functions have been removed from PHP:
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.define-syslog-variables.html" class="function">define_syslog_variables()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.import-request-variables.html" class="function">import_request_variables()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.session-is-registered.html" class="function">session_is_registered()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.session-register.html" class="function">session_register()</a></span>
     and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.session-unregister.html" class="function">session_unregister()</a></span>.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The aliases
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-bind-param.html" class="function">mysqli_bind_param()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-bind-result.html" class="function">mysqli_bind_result()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-client-encoding.html" class="function">mysqli_client_encoding()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-fetch.html" class="function">mysqli_fetch()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-param-count.html" class="function">mysqli_param_count()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-get-metadata.html" class="function">mysqli_get_metadata()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysqli-send-long-data.html" class="function">mysqli_send_long_data()</a></span>, mysqli::client_encoding() and mysqli_stmt::stmt().
    </span>
   </li>
  </ul></div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration53.incompatible.php" target="_blank">PHP 5.3</a></h1>
    </header>

    <div id="migration53.incompatible" class="section">
  <h2 class="title">Backward Incompatible Changes</h2>
  <p class="simpara">
   Although most existing PHP 5 code should work without changes, please take
   note of some backward incompatible changes:
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     The newer internal parameter parsing API has been applied across all the
     extensions bundled with PHP 5.3.x. This parameter parsing API causes
     functions to return <strong><code>NULL</code></strong> when passed incompatible parameters. There are
     some exceptions to this rule, such as the <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-class.html" class="function">get_class()</a></span>
     function, which will continue to return <strong><code>FALSE</code></strong> on error.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.clearstatcache.html" class="function">clearstatcache()</a></span> no longer clears the realpath cache by
     default.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.realpath.html" class="function">realpath()</a></span> is now fully platform-independent.
     Consequence of this is that invalid relative paths such as
     <code class="literal">__FILE__ . "/../x"</code> do not work anymore.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.call-user-func.html" class="function">call_user_func()</a></span> family of functions now propagate
     <code class="literal">$this</code> even if the callee is a parent class.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The array functions <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.natsort.html" class="function">natsort()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.natcasesort.html" class="function">natcasesort()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.usort.html" class="function">usort()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.uasort.html" class="function">uasort()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.uksort.html" class="function">uksort()</a></span>,
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-flip.html" class="function">array_flip()</a></span>, and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-unique.html" class="function">array_unique()</a></span> no
     longer accept objects passed as arguments. To apply these functions to an
     object, cast the object to an array first.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The behaviour of functions with by-reference parameters called by value has
     changed. Where previously the function would accept the by-value argument,
     a fatal error is now emitted. Any previous code passing constants or 
     literals to functions expecting references, will need altering to assign 
     the value to a variable before calling the function.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The new mysqlnd library necessitates the use of MySQL 4.1's newer 41-byte
     password format. Continued use of the old 16-byte passwords will cause
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.mysql-connect.html" class="function">mysql_connect()</a></span> and similar functions to emit the error,
     <code class="literal">"mysqlnd cannot connect to MySQL 4.1+ using old
     authentication."</code>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The new mysqlnd library does not read mysql configuration files 
     (my.cnf/my.ini), as the older libmysqlclient library does.  If your code relies on 
     settings in the configuration file, you can load it explicitly with the 
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/mysqli.options.html" class="function">mysqli_options()</a></span> function. Note that this means the 
     PDO specific constants <strong><code>PDO::MYSQL_ATTR_READ_DEFAULT_FILE</code></strong> 
     and <strong><code>PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</code></strong> are not defined 
     if MySQL support in PDO is compiled with mysqlnd.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The trailing / has been removed from the <a target="_blank" href="https://www.php.net/manual/en/class.splfileinfo.html" class="classname">SplFileInfo</a>
     class and other related directory classes.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The <a target="_blank" href="https://www.php.net/manual/en/language.oop5.magic.html#object.tostring" class="link">__toString()</a> magic
     method can no longer accept arguments.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The magic methods 
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.overloading.html#object.get" class="link">__get()</a>, 
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.overloading.html#object.set" class="link">__set()</a>, 
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.overloading.html#object.isset" class="link">__isset()</a>, 
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.overloading.html#object.unset" class="link">__unset()</a>, and
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.overloading.html#object.call" class="link">__call()</a> must always
     be public and can no longer be static. Method signatures are now enforced.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     The <a target="_blank" href="https://www.php.net/manual/en/language.oop5.overloading.html#object.call" class="link">__call()</a>
     magic method is now invoked on access to private and protected methods.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-get-arg.html" class="function">func_get_arg()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-get-args.html" class="function">func_get_args()</a></span> and
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.func-num-args.html" class="function">func_num_args()</a></span> can no longer be called from the
     outermost scope of a file that has been included by calling
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.include.html" class="function">include</a></span> or <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.require.html" class="function">require</a></span> from within
     a function in the calling file.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     An emulation layer for the MHASH extension to wrap around the Hash extension 
     have been added. However not all the algorithms are covered, notable the 
     s2k hashing algorithm. This means that s2k hashing is no longer available 
     as of PHP 5.3.0.
    </span>
   </li>
  </ul><p class="simpara">
   The following keywords are now reserved and may not be used in function,
   class, etc. names.
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/control-structures.goto.html" class="link">goto</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/language.namespaces.html" class="link">namespace</a>
    </span>
   </li>
  </ul></div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration52.incompatible.php" target="_blank">PHP 5.2</a></h1>
    </header>

    <div id="migration52.incompatible" class="section">
  <h2 class="title">Backward Incompatible Changes</h2>
  <p class="para">
   Although most existing PHP 5 code should work without changes, you should
   pay attention to the following backward incompatible changes:
  </p>
  <ul class="itemizedlist"><li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.getrusage.html" class="function">getrusage()</a></span> returns <strong><code>NULL</code></strong> when passed
     incompatible arguments as of PHP 5.2.1.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/ziparchive.setcommentname.html" class="function">ZipArchive::setCommentName()</a></span>
     returns <strong><code>TRUE</code></strong> on success as of PHP 5.2.1.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/ziparchive.setcommentindex.html" class="function">ZipArchive::setCommentIndex()</a></span>
     returns <strong><code>TRUE</code></strong> on success as of PHP 5.2.1.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><strong>SplFileObject::getFilename()</strong></span> returns
     the filename, not relative/path/to/file, as of PHP 5.2.1.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Changed priority of <var class="varname">PHPRC</var> environment variable on Win32
    </span>
    <span class="simpara">
     The <var class="varname">PHPRC</var> environment variable now takes priority over the path stored
     in the Windows registry.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     CLI SAPI no longer checks cwd for <var class="filename">php.ini</var> or the <var class="filename">php-cli.ini</var> file
    </span>
    <span class="simpara">
     In PHP 5.1.x an undocumented feature was added that made the CLI binary check
     the current working directory for a PHP configuration file, potentially
     leading to unpredictable behavior if an unexpected configuration file were
     read. This functionality was removed in 5.2.0, and PHP will no longer search
     CWD for the presence of <var class="filename">php.ini</var> or <var class="filename">php-cli.ini</var> files.
     See also the <a target="_blank" href="https://www.php.net/manual/en/features.commandline.html" class="link">command line</a> section
     of the manual.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Added a warning when performing modulus 0 operations
    </span>
    <span class="simpara">
     In earlier versions of PHP, performing integer % 0 did not emit any
     warning messages, instead returning an unexpected return value of <strong><code>FALSE</code></strong>.
     As of PHP 5.2.0, this operation will emit an <strong><code>E_WARNING</code></strong>, 
     as is the case in all other instances where division by zero is performed.
    </span>
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #007700">printÂ </span><span style="color: #0000BB">10Â </span><span style="color: #007700">%Â </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br></span><span style="color: #FF8000">/*Â Warning:Â Â DivisionÂ byÂ zeroÂ inÂ filenameÂ onÂ lineÂ nÂ */<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </li>
   <li class="listitem">
    <span class="simpara">
     Changed <a target="_blank" href="https://www.php.net/manual/en/language.oop5.magic.html#object.tostring" class="link">__toString()</a> to be called wherever
     applicable.
    </span>
    <span class="simpara">
     The magic method <a target="_blank" href="https://www.php.net/manual/en/language.oop5.magic.html#object.tostring" class="link">__toString()</a> will now be called
     in a string context, that is, anywhere an object is used as a
     string.
    </span>
    <span class="simpara">
     The fallback of returning a string that contains the
     object identifier was dropped in PHP 5.2.0.  It became
     problematic because an object identifier cannot be considered
     unique. This change will mean that your application is flawed if you
     have relied on the object identifier as a return value.  An attempt
     to use that value as a string will now result in a catchable fatal
     error.
    </span>
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #007700">classÂ </span><span style="color: #0000BB">fooÂ </span><span style="color: #007700">{}<br></span><span style="color: #0000BB">$fooÂ </span><span style="color: #007700">=Â newÂ </span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br>printÂ </span><span style="color: #0000BB">$foo</span><span style="color: #007700">;<br></span><span style="color: #FF8000">/*Â CatchableÂ fatalÂ error:Â Â ObjectÂ ofÂ classÂ fooÂ could<br>Â Â Â notÂ beÂ convertedÂ toÂ stringÂ inÂ filenameÂ onÂ lineÂ nÂ */<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    <span class="simpara">
     Even with <a target="_blank" href="https://www.php.net/manual/en/language.oop5.magic.html#object.tostring" class="link">__toString()</a>, objects cannot be used as
     array indices or keys. We may add built-in hash support for this at
     a later date, but as of PHP 5.2.x you will need to either provide your
     own hashing or use the new SPL function
     <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.spl-object-hash.html" class="function">spl_object_hash()</a></span>.
    </span>
    <span class="simpara">
     Exceptions can not be thrown from
     <a target="_blank" href="https://www.php.net/manual/en/language.oop5.magic.html#object.tostring" class="link">__toString()</a> methods.
    </span>
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #007700">classÂ </span><span style="color: #0000BB">fooÂ </span><span style="color: #007700">{<br>Â Â Â Â publicÂ functionÂ </span><span style="color: #0000BB">__toString</span><span style="color: #007700">()Â {<br>Â Â Â Â Â Â Â Â throwÂ newÂ </span><span style="color: #0000BB">Exception</span><span style="color: #007700">;<br>Â Â Â Â }<br>}<br><br>tryÂ {<br>Â Â Â Â printÂ newÂ </span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br>Â Â Â Â </span><span style="color: #FF8000">/*Â FatalÂ error:Â Â MethodÂ foo::__toString()Â must<br>Â Â Â Â Â Â Â notÂ throwÂ anÂ exceptionÂ inÂ filenameÂ onÂ lineÂ nÂ */<br></span><span style="color: #007700">}Â catch(</span><span style="color: #0000BB">ExceptionÂ $e</span><span style="color: #007700">)Â {}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </li>
   <li class="listitem">
    <span class="simpara">
     Dropped abstract static class functions.
    </span>
    <span class="simpara">
     Due to an oversight, PHP 5.0.x and 5.1.x allowed abstract static 
     functions in classes. As of PHP 5.2.x, only interfaces can have them.
    </span>
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #007700">abstractÂ classÂ </span><span style="color: #0000BB">fooÂ </span><span style="color: #007700">{<br>Â Â Â Â abstractÂ staticÂ functionÂ </span><span style="color: #0000BB">bar</span><span style="color: #007700">();<br>Â Â Â Â </span><span style="color: #FF8000">/*Â StrictÂ Standards:Â Â StaticÂ functionÂ foo::bar()<br>Â Â Â Â Â Â Â shouldÂ notÂ beÂ abstractÂ inÂ filenameÂ onÂ lineÂ nÂ */<br></span><span style="color: #007700">}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a target="_blank" href="https://www.php.net/manual/en/ref.oci8.html" class="link">Oracle extension</a> requires at least Oracle
     10 on Windows.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Added RFC2397 (<code class="literal">data:</code> stream) support.
    </span>
    <span class="simpara">
     The introduction of the 'data' URL scheme has the potential to lead to a
     change of behavior under Windows. If you are working with a <acronym>NTFS</acronym>
     file system and making use of meta streams in your application, and if you
     just happen to be using a file with the name 'data:' that is accessed without
     any path information - it won't work any more. The fix is to use the 'file:'
     protocol when accessing it.
    </span>
    <span class="simpara">
     See also <a target="_blank" href="https://www.php.net/manual/en/http://www.faqs.org/rfcs/rfc2397" class="link external">Â»Â RFC 2397</a> 
    </span>
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #FF8000">/*Â whenÂ allow_url_includeÂ isÂ OFFÂ (default)Â */<br></span><span style="color: #007700">includeÂ </span><span style="color: #DD0000">"data:;base64,PD9waHAgcGhwaW5mbygpOz8+"</span><span style="color: #007700">;<br></span><span style="color: #FF8000">/*Â Warning:Â Â include():Â URLÂ file-accessÂ isÂ disabled<br>Â Â Â inÂ theÂ serverÂ configurationÂ inÂ filenameÂ onÂ lineÂ nÂ */<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </li>
   <li class="listitem">
    <span class="simpara">
     Regression in <code class="literal">glob()</code> patterns
    </span>
    <span class="simpara">
     In version 5.2.4 a security fix caused a regression for patterns of
     the form "/foo/*/bar/*". Since version 5.2.5 instead of raising a warning the
     <code class="literal">glob()</code> function will return <strong><code>FALSE</code></strong> when
     <code class="literal">openbase_dir</code> restrictions are violated.
    </span>
   </li>
  </ul></div></article><article id="layout-content" class="info-version">
    <header class="info-version-header">
        <h1><a href="https://www.php.net/manual/en/migration5.incompatible.php" target="_blank">PHP 5.0</a></h1>
    </header>

    <div id="migration5.incompatible" class="section">
   <h2 class="title">Backward Incompatible Changes</h2>
   <p class="para">
    Although most existing PHP 4 code should work without changes, you should
    pay attention to the following backward incompatible changes:
   </p>
   <ul class="itemizedlist"><li class="listitem">
     <span class="simpara">
      There are some <a target="_blank" href="https://www.php.net/manual/en/reserved.keywords.html" class="link">new reserved
      keywords</a>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strrpos.html" class="function">strrpos()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strripos.html" class="function">strripos()</a></span> now use
      the entire string as a needle.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Illegal use of string offsets causes <strong><code>E_ERROR</code></strong> instead
      of <strong><code>E_WARNING</code></strong>. An example illegal use is: 
      <code class="literal">$str = 'abc'; unset($str[0]);</code>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.array-merge.html" class="function">array_merge()</a></span> was changed to accept only arrays. If a
      non-array variable is passed, a <strong><code>E_WARNING</code></strong> will be
      thrown for every such parameter. Be careful because your code may start
      emitting <strong><code>E_WARNING</code></strong> out of the blue.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <strong><code>PATH_TRANSLATED</code></strong> server variable is no longer set implicitly under
      Apache2 SAPI in contrast to the situation in PHP 4, where it is set to
      the same value as the <strong><code>SCRIPT_FILENAME</code></strong> server variable when it is not
      populated by Apache. This change was made to comply with the <a target="_blank" href="https://www.php.net/manual/en/http://www.faqs.org/rfcs/rfc3875" class="link external">Â»Â CGI/1.1 specification</a>. Please refer to <a target="_blank" href="https://www.php.net/manual/en/https://bugs.php.net/23610" class="link external">Â»Â bug #23610</a> for further information,
      and see also the <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.server.html" class="classname">$_SERVER['PATH_TRANSLATED']</a></var>
      description in the manual. This issue 
      also affects PHP versions &gt;= 4.3.2.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      The <strong><code>T_ML_COMMENT</code></strong> constant is no longer defined by
      the <a target="_blank" href="https://www.php.net/manual/en/ref.tokenizer.html" class="link">Tokenizer</a> extension. If
      error_reporting is set to <strong><code>E_ALL</code></strong>, PHP will
      generate a notice. Although the <strong><code>T_ML_COMMENT</code></strong> was
      never used at all, it was defined in PHP 4. In both PHP 4 and PHP 5
      // and /* */ are resolved as the <strong><code>T_COMMENT</code></strong>
      constant. However the PHPDoc style comments <code class="literal">/** */</code>, which starting PHP
      5 are parsed by PHP, are recognized as <strong><code>T_DOC_COMMENT</code></strong>. 
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.server.html" class="classname">$_SERVER</a></var> should be populated with <var class="varname">argc</var> and
      <var class="varname">argv</var> if
      <a target="_blank" href="https://www.php.net/manual/en/ini.core.html#ini.variables-order" class="link">variables_order</a> includes "S".
      If you have specifically configured your system to not create
      <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.server.html" class="classname">$_SERVER</a></var>, then of course it shouldn't be there.
      The change was to always make <var class="varname">argc</var>
      and <var class="varname">argv</var> available in the CLI version regardless of the
      <a target="_blank" href="https://www.php.net/manual/en/ini.core.html#ini.variables-order" class="link">variables_order</a> setting.
      As in, the CLI version will now always populate the global
      <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.argc.html" class="classname">$argc</a></var> and <var class="varname"><a target="_blank" href="https://www.php.net/manual/en/reserved.variables.argv.html" class="classname">$argv</a></var> variables.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      An object with no properties is no longer considered "empty".
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      In some cases classes must be declared before use. It only happens if
      some of the new features of PHP 5 (such as <a target="_blank" href="https://www.php.net/manual/en/language.oop5.interfaces.html" class="link">interfaces</a>) are used.
      Otherwise the behaviour is the old.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-class.html" class="function">get_class()</a></span>, <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-parent-class.html" class="function">get_parent_class()</a></span>
      and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.get-class-methods.html" class="function">get_class_methods()</a></span> now return the name of the
      classes/methods as they were declared (case-sensitive) which may lead to
      problems in older scripts that rely on the previous behaviour (the
      class/method name was always returned lowercased). A possible solution
      is to search for those functions in all your scripts and use
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strtolower.html" class="function">strtolower()</a></span>.
     </span>
     <span class="simpara">
      This case sensitivity change also applies to the 
      <a target="_blank" href="https://www.php.net/manual/en/language.constants.predefined.html" class="link">magical predefined 
      constants</a> <strong><code>__CLASS__</code></strong>, 
      <strong><code>__METHOD__</code></strong>, and <strong><code>__FUNCTION__</code></strong>.
      The values are returned exactly as they're declared (case-sensitive).
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.ip2long.html" class="function">ip2long()</a></span> now returns <strong><code>FALSE</code></strong> when an invalid IP
      address is passed as argument to the function, and no longer
      <code class="literal">-1</code>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      If there are functions defined in the included file, they can be used in the
      main file independent if they are before <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.return.html" class="function">return</a></span> or after.
      If the file is included twice, PHP 5 issues fatal error because functions
      were already declared, while PHP 4 doesn't complain about it.
      It is recommended to use <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.include-once.html" class="function">include_once</a></span> instead of
      checking if the file was already included and conditionally return inside
      the included file.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.include-once.html" class="function">include_once</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.require-once.html" class="function">require_once</a></span>
      first normalize the path of included file on Windows so that including
      A.php and a.php include the file just once.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Passing an array to a function by value no longer resets the
      array's internal pointer for array accesses made within the
      function. In other words, in PHP 4 when you passed an array to a
      function, its internal pointer inside the function would be
      reset, while in PHP 5, when you pass an array to a function, its
      array pointer within the function will be wherever it was when
      the array was passed to the function.
     </span>
    </li>
   </ul><p class="para">
    </p><div class="example" id="example-6941">
     <p><strong>Example #1 <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strrpos.html" class="function">strrpos()</a></span> and <span class="function"><a target="_blank" href="https://www.php.net/manual/en/function.strripos.html" class="function">strripos()</a></span> now
      use the entire string as a needle</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br>var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">strrpos</span><span style="color: #007700">(</span><span style="color: #DD0000">'ABCDEF'</span><span style="color: #007700">,</span><span style="color: #DD0000">'DEF'</span><span style="color: #007700">));Â </span><span style="color: #FF8000">//int(3)<br><br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">strrpos</span><span style="color: #007700">(</span><span style="color: #DD0000">'ABCDEF'</span><span style="color: #007700">,</span><span style="color: #DD0000">'DAF'</span><span style="color: #007700">));Â </span><span style="color: #FF8000">//bool(false)<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   
   <p class="para">
    </p><div class="example" id="example-6942">
     <p><strong>Example #2 An object with no properties is no longer considered "empty"</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br></span><span style="color: #007700">classÂ </span><span style="color: #0000BB">testÂ </span><span style="color: #007700">{Â }<br></span><span style="color: #0000BB">$tÂ </span><span style="color: #007700">=Â newÂ </span><span style="color: #0000BB">test</span><span style="color: #007700">();<br><br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(empty(</span><span style="color: #0000BB">$t</span><span style="color: #007700">));Â </span><span style="color: #FF8000">//Â echoÂ bool(false)<br><br></span><span style="color: #007700">ifÂ (</span><span style="color: #0000BB">$t</span><span style="color: #007700">)Â {<br>Â Â Â Â </span><span style="color: #FF8000">//Â WillÂ beÂ executed<br></span><span style="color: #007700">}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   
   <p class="para">
    </p><div class="example" id="example-6943">
     <p><strong>Example #3 In some cases classes must be declared before used</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB"><?php <br><br></span><span style="color: #FF8000">//worksÂ withÂ noÂ errors:<br></span><span style="color: #0000BB">$aÂ </span><span style="color: #007700">=Â newÂ </span><span style="color: #0000BB">a</span><span style="color: #007700">();<br>classÂ </span><span style="color: #0000BB">aÂ </span><span style="color: #007700">{<br>}<br><br><br></span><span style="color: #FF8000">//throwsÂ anÂ error:<br></span><span style="color: #0000BB">$aÂ </span><span style="color: #007700">=Â newÂ </span><span style="color: #0000BB">b</span><span style="color: #007700">();<br><br>interfaceÂ </span><span style="color: #0000BB">c</span><span style="color: #007700">{<br>}<br>classÂ </span><span style="color: #0000BB">bÂ </span><span style="color: #007700">implementsÂ </span><span style="color: #0000BB">cÂ </span><span style="color: #007700">{<br>}Â <br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   
  </div></article>    </main>
</section>    </body>
</html>
